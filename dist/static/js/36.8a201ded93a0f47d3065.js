webpackJsonp([36],{AV27:function(t,e){},CAGa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),r=a.n(o),s=a("Dd8w"),i=a.n(s),n=a("NYxO"),c=a("zL8q"),d={components:{Auth:a("vzON").a},props:{},data:function(){return{addCategoryValue:"",editCategoryPopup:!1,editCategoryValue:"",editCategoryIndex:"",tabList:[],editConfig:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},watch:{},computed:i()({getTime:function(){return function(t){return new Date(t).toDateString()===(new Date).toDateString()}}},Object(n.b)(["pageAuth","email"])),created:function(){this.searchCategory()},mounted:function(){},methods:{openEditCategory:function(t){var e=this;this.editCategoryIndex=t,this.$prompt("请输入新名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.editCategory(a)}).catch(function(){e.$message({type:"info",message:"取消输入"})})},editCategory:function(t){var e=this,a={url:"http://10.85.125.61:13150/edit_category.json",param:{type:3,idx:this.editCategoryIndex,category:t}},o=new URLSearchParams;o.append("data",r()(a)),o.append("cip",230),this.$store.dispatch("ProxyPost",o).then(function(t){t&&200==t.code?(e.searchCategory(),e.editCategoryValue=""):Object(c.Message)({showClose:!0,message:"分类保存失败！",type:"error",duration:0})},function(t){Object(c.Message)({showClose:!0,message:"分类保存接口异常！",type:"error",duration:0})})},delCategoryPopup:function(t){var e=this;this.$confirm("此操作将永久删除该分类以及分类下的文档, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.delCategory(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},delCategory:function(t){var e=this,a={url:"http://10.85.125.61:13150/edit_category.json",param:{type:2,idx:t}},o={data:r()(a),cip:230};this.$store.dispatch("ProxyGet",o).then(function(t){t&&200==t.code?(e.searchCategory(),e.$message({type:"success",message:"删除成功!"})):Object(c.Message)({showClose:!0,message:"删除异常！",type:"error",duration:0})},function(t){Object(c.Message)({showClose:!0,message:"删除接口异常！",type:"error",duration:0})})},toDetail:function(t,e){this.$router.push({path:"/mark/docs/detail",query:{category:t,id:e}})},searchCategory:function(){var t=this;console.log(111),this.tabList=[];var e={data:r()({url:"http://10.85.125.61:13150/query_category.json",param:{}}),cip:230};this.$store.dispatch("ProxyGet",e).then(function(e){e&&200==e.code?(t.tabList=e.result.map(function(t,e){return{category:t.category,children:t.children.reverse().slice(0,6)}}),console.log(2)):Object(c.Message)({showClose:!0,message:"查询异常！",type:"error",duration:0})},function(t){Object(c.Message)({showClose:!0,message:"查询接口异常！",type:"error",duration:0})})},addCategoryPopup:function(){var t=this;this.$prompt("请输入新添加分类名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var a=e.value;t.addCategory(a)}).catch(function(){t.$message({type:"info",message:"取消输入"})})},addCategory:function(t){var e=this,a={url:"http://10.85.125.61:13150/edit_category.json",param:{type:1,idx:1,category:t}},o=new URLSearchParams;o.append("data",r()(a)),o.append("cip",230),this.$store.dispatch("ProxyPost",o).then(function(t){t&&200==t.code?e.searchCategory():Object(c.Message)({showClose:!0,message:"分类保存失败！",type:"error",duration:0})},function(t){Object(c.Message)({showClose:!0,message:"分类保存接口异常！",type:"error",duration:0})})},toList:function(t){this.$router.push({path:"/mark/docs/list",query:{category:t}})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1===t.pageAuth?a("div",{staticClass:"mark-content"},[t._l(t.tabList,function(e,o){return a("el-card",{key:o,staticClass:"box-card",attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"category-title"},[t._v(t._s(e.category))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.toList(o)}}},[t._v("更多")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(e){t.delCategoryPopup(o)}}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:""},on:{click:function(e){t.openEditCategory(o)}}})],1),t._v(" "),t._l(e.children,function(e,r){return a("div",{key:r,staticClass:"text item",on:{click:function(e){t.toDetail(o,r)}}},[a("span",{staticClass:"page-title"},[t._v(t._s(e.title))]),t._v(" "),t.getTime(e.creat_time)?a("span",{staticStyle:{color:"red","padding-left":"30px"}},[t._v("new")]):t._e()])})],2)}),t._v(" "),a("el-card",{staticClass:"add-card",attrs:{shadow:"always"}},[a("div",{staticClass:"add-wrap",on:{click:t.addCategoryPopup}},[a("i",{staticClass:"el-icon-plus"})])])],2):0===t.pageAuth?a("el-main",[a("auth")],1):t._e()},staticRenderFns:[]};var u=a("VU/8")(d,l,!1,function(t){a("pN9k"),a("AV27")},"data-v-2c0ba81d",null);e.default=u.exports},pN9k:function(t,e){}});