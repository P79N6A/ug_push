webpackJsonp([18],{"8FNN":function(e,t){},CFXe:function(e,t){},P1dU:function(e,t,a){"use strict";var n=a("Dd8w"),i=a.n(n),l=a("NYxO"),o=a("zL8q"),s={name:"operateWhite",data:function(){return{delPopover:!1,delBtnPopover:!1,addBtnPopover:!1}},computed:i()({},Object(l.b)(["email"])),props:["data","kapi","callback"],methods:{deleteEvent:function(){var e=this;this.delPopover=!1,this.delBtnPopover=!1;var t={url:this.kapi.del,params:{kid:this.data.id,channel_history:this.data.channel_history,username:this.email,cip:230}};this.$store.dispatch("delKeywordList",t).then(function(t){t.code&&200==Number(t.code)?(Object(o.Message)({showClose:!0,message:"下线成功！",type:"success",duration:1e3}),e.callback()):Object(o.Message)({showClose:!0,message:t.msg||"下线失败!",type:"error",duration:3e3})})},setEvent:function(){var e=this;this.addBtnPopover=!1;var t={url:this.kapi.set,params:{kid:this.data.id,channel_history:this.data.channel_history,status:1,username:this.email,cip:230}};this.$store.dispatch("SetKeywordList",t).then(function(t){t.code&&200==Number(t.code)?(Object(o.Message)({showClose:!0,message:"上线成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(o.Message)({showClose:!0,message:t.msg||"上线失败!",type:"error",duration:3e3})})}},watch:{data:function(){}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data&&0===e.data.status?a("div",[a("el-popover",{ref:"popAddBtn",attrs:{placement:"top",width:"200"},model:{value:e.addBtnPopover,callback:function(t){e.addBtnPopover=t},expression:"addBtnPopover"}},[a("p",[e._v("确定上线【"+e._s(e.data.keyword)+"】关键词？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.addBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.setEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popAddBtn",arg:"popAddBtn"}],attrs:{type:"success",icon:"el-icon-check",plain:"",size:"mini",title:"上线"}},[a("span",{staticClass:"hidden-xs-only"},[e._v("上线")])])],1):e.data&&1===e.data.status?a("div",[a("el-popover",{ref:"popDelBtn",attrs:{placement:"top",width:"200"},model:{value:e.delBtnPopover,callback:function(t){e.delBtnPopover=t},expression:"delBtnPopover"}},[a("p",[e._v("确定下线【"+e._s(e.data.keyword)+"】关键词？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.deleteEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popDelBtn",arg:"popDelBtn"}],attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini",title:"下线"}},[a("span",{staticClass:"hidden-xs-only"},[e._v("下线")])])],1):e._e()},staticRenderFns:[]};var c=a("VU/8")(s,r,!1,function(e){a("8FNN")},"data-v-7e21a360",null);t.a=c.exports},mLWv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),l=a("NYxO"),o=a("0xDb"),s=a("zL8q"),r=a("vzON"),c=a("P1dU"),d={name:"keywordList",components:{Auth:r.a,OperateKeyword:c.a},data:function(){return{title:"关键词黑名单",kapi:{get:"/channel/getKeyBlackByCid",add:"/channel/addCKeyBlack",set:"/channel/setCKeyBlackStatus",del:"/channel/delCKeyBlack"},dialogVisible:!1,defaultChannel:"",formInline:{ckey:"all:all",keyword:"",curPage:1,count:5,total:0},formWord:{keyword:"",ckey:"",popover:!1},keywordList:null}},computed:i()({},Object(l.b)(["pageAuth","email","channelList","channelApi"])),methods:{init:function(){1===this.pageAuth&&this.setChannelList()},setChannelList:function(){var e={url:"/channel/getAuthChannelList",params:{username:this.email,cip:230}};this.$store.dispatch("SetChannelList",e)},onSearch:function(){var e=this,t=this.formInline.ckey.split(":"),a={url:this.kapi.get,params:{cid:t[1],channel_history:t[0],keyword:this.formInline.keyword,username:this.email,page:this.formInline.curPage,count:this.formInline.count,cip:230}};this.$store.dispatch("GetKeywordList",a).then(function(t){e.keywordList=t})},showAdd:function(){this.formWord.ckey="all:all"==this.formInline.ckey?this.defaultChannel:this.formInline.ckey,this.dialogVisible=!0},addEvent:function(){var e=this;if(this.formWord.popover=!1,this.formWord.ckey)if(this.formWord.keyword){this.dialogVisible=!1;var t=this.formWord.ckey.split(":"),a={url:this.kapi.add,params:{cid:t[1],channel_history:t[0],keyword:this.formWord.keyword,username:this.email,cip:230}};this.$store.dispatch("AddKeywordList",a).then(function(){e.cancelEvent(),e.onSearch()})}else Object(s.Message)({showClose:!0,message:"请输入关键词！",type:"error",duration:1e3});else Object(s.Message)({showClose:!0,message:"请选择频道！",type:"error",duration:1e3})},cancelEvent:function(){this.dialogVisible=!1,this.formWord={keyword:"",ckey:""}},handleSizeChange:function(e){this.formInline.count=e,this.onSearch()},handleCurrentChange:function(e){this.formInline.curPage=e,this.onSearch()},_parseTime:function(e,t){return Object(o.e)(e,t)}},created:function(){this.init()},watch:{pageAuth:function(){this.init()},channelList:function(){this.channelList&&this.channelList.length>0&&(this.defaultChannel=this.channelList[0].channel_history+":"+this.channelList[0].cid,this.formInline.ckey=this.defaultChannel,this.onSearch())},keywordList:function(){this.keywordList&&(this.formInline.total=this.keywordList.total)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return 1===e.pageAuth?a("el-main",[a("el-row",{staticClass:"pane-title-wrap"},[a("el-col",{attrs:{span:24}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-document hidden-xs-only",staticStyle:{"margin-right":"6px"}}),e._v(e._s(e.title||"关键词"))])])],1),e._v(" "),a("el-row",{staticClass:"search-form-wrap"},[e.channelList&&e.channelList.length>0?a("el-col",{attrs:{span:24}},[e.channelList?a("el-form",{attrs:{inline:"",model:e.formInline,size:"mini"}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{placeholder:"请输入关键词",clearable:""},model:{value:e.formInline.keyword,callback:function(t){e.$set(e.formInline,"keyword",t)},expression:"formInline.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择频道"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道"},model:{value:e.formInline.ckey,callback:function(t){e.$set(e.formInline,"ckey",t)},expression:"formInline.ckey"}},[a("el-option",{attrs:{label:"所有频道",value:"all:all"}}),e._v(" "),e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})})],2),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1):e._e()],1):null==e.channelApi?a("el-col",{attrs:{span:24}},[e._v("\n      loading……\n    ")]):"response failed"==e.channelApi?a("el-col",{attrs:{span:24}},[a("el-alert",{attrs:{title:"网络请求异常，请重试~",type:"warning","show-icon":"",closable:!1}})],1):1==e.channelApi?a("el-col",{attrs:{span:24}},[a("el-alert",{attrs:{title:"暂无有权限的频道",type:"warning","show-icon":"",closable:!1}})],1):e._e()],1),e._v(" "),a("el-row",{staticClass:"content-box-wrap"},[a("el-col",{attrs:{span:24}},[e.channelList&&e.channelList.length>0?a("div",{staticClass:"clearfix",staticStyle:{padding:"10px 0"}},[a("el-button",{staticClass:"left",attrs:{type:"success",size:"mini"},on:{click:function(t){e.showAdd()}}},[e._v("添加关键词")])],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"添加关键词",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.formWord,size:"small"}},[e.channelList?a("el-form-item",{attrs:{label:"选择频道","label-width":"120px",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道",clearable:""},model:{value:e.formWord.ckey,callback:function(t){e.$set(e.formWord,"ckey",t)},expression:"formWord.ckey"}},e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"关键词","label-width":"120px",required:""}},[a("el-input",{staticStyle:{"max-width":"194px"},attrs:{placeholder:"请输入关键词",clearable:""},model:{value:e.formWord.keyword,callback:function(t){e.$set(e.formWord,"keyword",t)},expression:"formWord.keyword"}})],1)],1),e._v(" "),a("div",{staticStyle:{color:"#e6a23c","text-align":"right"}},[e._v("此处只支持单个添加，一次性添加多个请联系\n          "),a("a",{staticClass:"link-btn",attrs:{title:"QQ联系"}},[e._v("@侯雷平（QQ：35675340）、 @李坤（QQ：46163936）")])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverAdd",attrs:{placement:"top",width:"200"},model:{value:e.formWord.popover,callback:function(t){e.$set(e.formWord,"popover",t)},expression:"formWord.popover"}},[a("p",[e._v("确定添加关键词？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.formWord.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.addEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.cancelEvent()}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverAdd",arg:"popoverAdd"}],attrs:{type:"primary",size:"small"}},[e._v("添 加")])],1)],1),e._v(" "),e.keywordList&&e.keywordList.data?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.keywordList.data,border:"",stripe:"",size:"mini"}},[a("el-table-column",{attrs:{fixed:"",align:"left",prop:"keyword",label:"关键词"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"channel_name",label:"频道"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"create_time",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._parseTime(t.row.create_time,"{y}-{m}-{d} {h}:{i}:{s}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",align:"left",prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.status?"在线上":"已下线"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作项","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operate-keyword",{attrs:{data:t.row,kapi:e.kapi,callback:e.onSearch}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"padding-top":"10px",overflow:"auto"}},[a("el-pagination",{attrs:{"current-page":e.formInline.curPage,"page-sizes":[5,10,20,30,40],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.formInline.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()},staticRenderFns:[]};var h=a("VU/8")(d,p,!1,function(e){a("CFXe")},"data-v-1d484d36",null);t.default=h.exports}});