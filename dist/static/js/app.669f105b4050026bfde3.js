webpackJsonp([2],{"+Hzr":function(e,t){},"+xM4":function(e,t){},0:function(e,t){},1:function(e,t){},2:function(e,t){},"2ZbU":function(e,t){},"2f/p":function(e,t){},"2woI":function(e,t){},"3SLI":function(e,t){},"49ru":function(e,t){},"4EWJ":function(e,t){},"4Uji":function(e,t){},"62FB":function(e,t){},"6oZA":function(e,t){},"8R24":function(e,t){},"Bbb/":function(e,t){},Cj7x:function(e,t){},D01m:function(e,t){},HsGM:function(e,t){},KtDj:function(e,t){},L7t5:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},l=a("VU/8")({name:"app"},i,!1,null,null,null).exports,r=a("/ocq"),o=a("mvHQ"),s=a.n(o),c=a("Dd8w"),u=a.n(c),m=a("NYxO"),d={name:"ItemMenu",props:["item","preindex"],components:{ItemMenu:h},data:function(){return{index:"1"}},methods:{init:function(){this.item&&(this.preindex?this.index=this.preindex+"-"+this.item.id:this.index=""+this.item.id)}},created:function(){this.init()},watch:{item:function(){this.init()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.item&&!e.item.list&&e.item.visible?a("el-menu-item",{attrs:{index:e.index}},[a("a",{attrs:{href:e.item.path||"javascript:void(0)"}},[e._v(e._s(e.item.name))])]):e.item&&e.item.list&&e.item.visible?a("el-submenu",{attrs:{index:e.index}},[a("template",{slot:"title"},[a("a",{attrs:{href:e.item.path||"javascript:void(0)"}},[e._v(e._s(e.item.name))])]),e._v(" "),e._l(e.item.list,function(t){return a("item-menu",{key:t.id,attrs:{preindex:""+e.index,item:t}})})],2):e._e()},staticRenderFns:[]};var h=a("VU/8")(d,p,!1,function(e){a("Bbb/")},"data-v-0661db3a",null).exports,f={name:"ItemHeader",components:{ItemMenu:h},data:function(){return{loginLink:"",logoutLink:""}},computed:u()({},Object(m.b)(["email","isLogin","pageAuth","menulist"])),methods:{init:function(){var e=encodeURIComponent(location.href);this.loginLink="http://cas.erp.sina.com.cn/cas/login?service="+e,this.logoutLink="http://cas.erp.sina.com.cn/cas/logout?service="+e,document.title=this.$route.meta.title,this.isLogin&&(this.setMenu(),this.getPageAuth(),this.setAuth())},setAuth:function(){var e={username:this.email,cip:230};this.$store.dispatch("GetAuth",e)},setMenu:function(){var e={userid:this.email,username:this.email,cip:230};this.$store.dispatch("GetMenu",e)},getPageAuth:function(){var e=this.$route.query.source?this.$route.query.source:this.$route.path,t={userid:this.email,username:this.email,path:"/hot/#"+e,cip:230};this.$store.dispatch("GetPageAuth",t)}},created:function(){this.init(),this.isLogin||this.$store.dispatch("GetUserInfo")},watch:{email:function(){},isLogin:function(){this.init()},menulist:function(){},pageAuth:function(){}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-header",{attrs:{height:"auto"}},[a("el-row",{staticClass:"header-top",attrs:{type:"flex",align:"middle",justify:"space-between"}},[a("el-col",[a("img",{staticClass:"header-logo hidden-xs-only",attrs:{src:"//mlplat.intra.weibo.com/static/layout/img/logo.png",alt:"mlplat-logo"}}),e._v(" "),a("span",[e._v("机器学习平台 WML")])]),e._v(" "),a("el-col",[e.isLogin?a("a",{staticClass:"right linkBtn",attrs:{href:e.logoutLink}},[e._v("退出")]):a("a",{staticClass:"right linkBtn",attrs:{href:e.loginLink}},[e._v("登录")]),e._v(" "),a("span",{staticClass:"right",staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.email))])])],1),e._v(" "),e.isLogin?a("el-row",{staticClass:"nav-wrapper",attrs:{type:"flex",justify:"center"}},[e.menulist?a("el-menu",{staticClass:"el-header-menu",attrs:{"default-active":e.$route.meta.activeidx,mode:"horizontal","background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b"}},e._l(e.menulist,function(t){return a("el-submenu",{key:t.id,attrs:{index:""+t.id}},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._v(" "),e._l(t.list,function(n){return t.list&&n.visible?a("item-menu",{key:n.id,attrs:{preindex:""+t.id,item:n}}):e._e()})],2)})):e._e()],1):null==e.isLogin?a("el-main",[e._v("Loading···")]):a("el-main",[e._v("请先登录")]),e._v(" "),"response failed"==e.pageAuth?a("el-main",[a("el-alert",{attrs:{title:"网络异常，请重试一下",type:"info","show-icon":"",center:"",closable:!1}})],1):e._e()],1)],1)},staticRenderFns:[]};var v=a("VU/8")(f,_,!1,function(e){a("WNga")},"data-v-626ff5ba",null).exports,g={name:"PanThumb",props:{image:{type:String,required:!0},zIndex:{type:Number,default:100},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pan-item",style:{zIndex:this.zIndex,height:this.height,width:this.width}},[t("div",{staticClass:"pan-info"},[t("div",{staticClass:"pan-info-roles-container"},[this._t("default")],2)]),this._v(" "),t("img",{staticClass:"pan-thumb",attrs:{src:this.image}})])},staticRenderFns:[]};var y=a("VU/8")(g,b,!1,function(e){a("Cj7x")},"data-v-530f5f14",null).exports,w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{attrs:{type:"flex",justify:"center",gutter:10}},[t("el-col",{attrs:{xs:12,sm:6,md:6,lg:3,xl:3}},[t("el-alert",{attrs:{title:"暂无权限",type:"warning","show-icon":"",closable:!1}})],1),this._v(" "),t("el-col",{attrs:{xs:12,sm:4,md:4,lg:3,xl:3}},[t("a",{staticStyle:{display:"inline-block"},attrs:{title:"邮件联系",href:"mailto:"+this.emailLink}},[t("el-button",{attrs:{type:"primary",plain:""}},[t("i",{staticClass:"el-icon-message",staticStyle:{"margin-right":"5px"}}),this._v("邮件申请权限\n      ")])],1)])],1)},staticRenderFns:[]},x=a("VU/8")({name:"AuthTips",props:["admin"],data:function(){return{emailLink:"wangyang29@staff.weibo.com;juanmin@staff.weibo.com"}},methods:{init:function(){this.emailLink=this.admin||this.emailLink}},created:function(){this.init()},watch:{admin:function(){this.init()}}},w,!1,null,null,null).exports,k=a("RRo+"),C=a.n(k),I=a("pFYg"),S=a.n(I);function T(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===e?"undefined":S()(e))?n=e:(10===(""+e).length&&(e=1e3*parseInt(e)),n=new Date(e));var i={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=i[t];return"a"===t?["一","二","三","四","五","六","日"][a-1]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function L(e){var t=C()(e)?e:parseFloat(e).toFixed(3),a=t;if(e){var n=Math.abs(parseInt(t)).toString().length;n>12?a=Number(Math.round(t/1e9)/1e3)+"万亿":n>8?a=Number(Math.round(t/1e5)/1e3)+"亿":n>4&&(a=Number(Math.round(t/10)/1e3)+"万")}else a=0;return a}function D(e,t){if(isNaN(e))return"-";var a=t||2,n=Math.pow(10,a+2),i=Math.pow(10,a);return Math.round(e*n)/i+"%"}var A={name:"querymaterial",components:{ItemHeader:v,Auth:x,PanThumb:y},data:function(){return{formInline:{mid:"4228669780091167",loading:!1},searchTimer:null,list:null,errorMsg:null,tips:null,materialData:null,showMasker:!0}},computed:u()({},Object(m.b)(["materialInfo","authorInfo","authorType","isLogin","usergroup"])),methods:{init:function(){"inner"==this.usergroup?this.onSearch():console.log("用户未登录")},onSearch:function(){this.formInline.loading=!0,this.searchTimer||this.setTimer();var e={url:"http://10.75.28.123:8077/get_mid_info",param:{mid:this.formInline.mid}},t={data:s()(e),cip:230};this.$store.dispatch("GetMaterial",t),this.getAuthor()},getAuthor:function(){var e={url:"http://mlplat.intra.weibo.com/lab/showbatch",param:{ids:this.formInline.mid}},t={data:s()(e),cip:230},a={url:"http://172.16.105.67:8091/newtest1011/getMidPersona.html",param:{mid:this.formInline.mid}},n={data:s()(a),cip:230};this.$store.dispatch("ShowBatch",t),this.$store.dispatch("AuthorType",n)},setTimer:function(){var e=this;this.searchTimer=setTimeout(function(){e.formInline.loading&&(e.formInline.loading=!1),e.searchTimer=null},5e3)},focusEvent:function(){this.formInline.loading&&(this.formInline.loading=!1)},setSex:function(e){var t="其他";switch(e){case"male":t="男性";break;case"female":t="女性";break;case"other":t="其他";break;case"all":t="全部";break;default:t="其他"}return t},setAge:function(e){return"other"==e?"其他":"all"==e?"全部":e+"后"},setNum:function(e,t,a){return L(a)},setTagName:function(e,t,a){return a.trim()||"未知"},getSummaries:function(e){e.columns,e.data;var t=[];if(this.materialData){var a=this.materialData.expose_num?D(this.materialData.act_num/this.materialData.expose_num):"0%",n=this.materialData.expose_num?D(this.materialData.inter_act_num/this.materialData.expose_num):"0%";t=["合计","所有年龄","所有性别",L(this.materialData.expose_num),L(this.materialData.act_num),a,L(this.materialData.inter_act_num),n]}return t},_formatNum:function(e){return L(e)},_parsePercent:function(e){return D(e)},analyData:function(){var e=this.materialData.age_gender_expose_rate;this.list=[];for(var t={age70:{age:"70",sex:"all",expose_num:0,click_num:0,act_num:0},age80:{age:"80",sex:"all",expose_num:0,click_num:0,act_num:0},age90:{age:"90",sex:"all",expose_num:0,click_num:0,act_num:0},age00:{age:"00",sex:"all",expose_num:0,click_num:0,act_num:0},ageother:{age:"other",sex:"all",expose_num:0,click_num:0,act_num:0}},a={sexmale:{age:"all",sex:"male",expose_num:0,click_num:0,act_num:0},sexfemale:{age:"all",sex:"female",expose_num:0,click_num:0,act_num:0},sexother:{age:"all",sex:"other",expose_num:0,click_num:0,act_num:0}},n=0;n<e.length;n++){var i=e[n];"other"!=i.age&&"other"==i.sex||this.addList(i),t["age"+i.age].expose_num+=i.expose_num,t["age"+i.age].click_num+=i.click_num,t["age"+i.age].act_num+=i.act_num,a["sex"+i.sex].expose_num+=i.expose_num,a["sex"+i.sex].click_num+=i.click_num,a["sex"+i.sex].act_num+=i.act_num}this.addList(t.age70),this.addList(t.age80),this.addList(t.age90),this.addList(t.age00),this.addList(t.ageother),this.addList(a.sexmale),this.addList(a.sexfemale),this.addList(a.sexother)},addList:function(e){var t=0,a=0;e.expose_num&&(t=e.click_num/e.expose_num,a=e.act_num/e.expose_num),e.click_rate=t,e.act_rate=a,this.list.push(e)},filterHandler:function(e,t,a){return t[a.property]===e},autoHide:function(e){this.showMasker=!1}},created:function(){this.init()},mounted:function(){document.addEventListener("click",this.autoHide,!1)},destroyed:function(){document.removeEventListener("click",this.autoHide,!1)},watch:{materialInfo:function(){this.materialInfo&&(this.formInline.loading=!1,this.tips=this.materialInfo.msg,this.materialInfo.data&&this.materialInfo.data.age_gender_expose_rate&&(this.materialData=this.materialInfo.data,this.analyData()))},isLogin:function(){},usergroup:function(){this.init()},authorInfo:function(){},authorType:function(){}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),"inner"==e.usergroup?a("el-main",[a("el-row",{attrs:{type:"flex",align:"middle",justify:"left"}},[a("el-col",{staticClass:"main-title hidden-xs-only",attrs:{sm:8,md:6,lg:4,xl:2}},[a("i",{staticClass:"el-icon-goods"}),e._v("热门微博物料查询\n      ")]),e._v(" "),a("el-col",{attrs:{sm:16,md:12,lg:8,xl:4}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入mid查询物料",clearable:""},on:{focus:function(t){e.focusEvent()}},model:{value:e.formInline.mid,callback:function(t){e.$set(e.formInline,"mid",t)},expression:"formInline.mid"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.formInline.loading},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),e.tips?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticClass:"error-msg",attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-alert",{attrs:{title:e.tips,type:"warning","show-icon":"",closable:!1}})],1)],1):e._e(),e._v(" "),e.authorInfo&&e.authorInfo.user?a("el-row",{staticClass:"thumb-box",attrs:{type:"flex",align:"middle",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23,title:"进入<"+e.authorInfo.user.name+">的主页"}},[a("el-row",{staticClass:"thumb-wrap",attrs:{type:"flex",align:"middle"}},[a("a",{staticStyle:{display:"inline-block","font-size":"12px",color:"#606266"},attrs:{href:"//weibo.com/"+e.authorInfo.user.profile_url,target:"_blank"}},[a("pan-thumb",{staticClass:"thumb-content",attrs:{image:e.authorInfo.user.avatar_hd,width:"60px",height:"60px"}},[e._v(e._s(e.authorInfo.user.name))])],1),e._v(" "),a("a",{staticClass:"author-name",attrs:{title:e.authorInfo.user.name,href:"//weibo.com/"+e.authorInfo.user.profile_url,target:"_blank"}},[e._v(e._s(e.authorInfo.user.name))])])],1)],1):e._e(),e._v(" "),e.authorInfo&&e.authorInfo.user?a("el-row",{staticClass:"thumb-box",staticStyle:{"margin-left":"2%"}},[a("el-col",{attrs:{xs:24,sm:5,md:5,lg:5,xl:5}},[a("span",{staticClass:"info-label",staticStyle:{color:"#e65d6e"}},[e._v("【关注数】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e._formatNum(e.authorInfo.user.friends_count)))])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:5,md:5,lg:5,xl:5}},[a("span",{staticClass:"info-label",staticStyle:{color:"#30b08f"}},[e._v("【粉丝数】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e._formatNum(e.authorInfo.user.followers_count)))])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:5,md:5,lg:5,xl:5}},[a("span",{staticClass:"info-label",staticStyle:{color:"#4ab7bd"}},[e._v("【发博量】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e._formatNum(e.authorInfo.user.statuses_count)))])]),e._v(" "),e.authorType?a("el-col",{attrs:{xs:24,sm:4,md:4,lg:4,xl:4}},[a("span",{staticClass:"info-label",staticStyle:{color:"#fec171"}},[e._v("【V类型】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e.authorType.vtype))])]):e._e(),e._v(" "),e.authorType?a("el-col",{attrs:{xs:24,sm:4,md:4,lg:4,xl:4}},[a("span",{staticClass:"info-label",staticStyle:{color:"#3a71a8"}},[e._v("【Clevel】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e.authorType.clevel))])]):e._e()],1):e._e(),e._v(" "),e.authorInfo?a("el-row",{staticClass:"content-box",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-row",[a("a",{staticClass:"info-link",attrs:{target:"_blank",href:e.authorInfo.link}},[e._v("查看微博")])]),e._v(" "),a("el-popover",{ref:"content",attrs:{placement:"top",trigger:"hover",content:e.authorInfo.text,"popper-class":"content-pop","visible-arrow":!1}}),e._v(" "),a("el-row",{directives:[{name:"popover",rawName:"v-popover:content",arg:"content"}],staticClass:"content-text"},[e._v(e._s(e.authorInfo.text))])],1)],1):e._e(),e._v(" "),e.list?a("el-row",{staticClass:"table-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("div",{staticClass:"table-title left"},[e._v("物料详情")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"max-height":"400",stripe:"","summary-method":e.getSummaries,"show-summary":"","sum-text":"总计"}},[a("el-table-column",{attrs:{width:"50",type:"index",align:"center",fixed:"",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",fixed:"",prop:"age",label:"年龄",filters:[{text:"70后",value:"70"},{text:"80后",value:"80"},{text:"90后",value:"90"},{text:"00后",value:"00"},{text:"其他",value:"other"},{text:"全部",value:"all"}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"all"===t.row.age?"danger":"success"}},[e._v(e._s(e.setAge(t.row.age)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",fixed:"",prop:"sex",label:"性别",filters:[{text:"男性",value:"male"},{text:"女性",value:"female"},{text:"其他",value:"other"},{text:"全部",value:"all"}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"all"===t.row.sex?"danger":"warning"}},[e._v(e._s(e.setSex(t.row.sex)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"expose_num",label:"曝光量",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"click_num",label:"点击量",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"click_rate",label:"点击率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:0===Number(t.row.click_num)?"danger":"primary"}},[e._v(e._s(e._parsePercent(t.row.click_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"act_num",label:"互动量",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"act_rate",label:"互动率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:0===Number(t.row.act_num)?"danger":"primary"}},[e._v(e._s(e._parsePercent(t.row.act_rate)))])]}}])})],1)],1)],1):e._e(),e._v(" "),e.materialData&&e.materialData.content_tag?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("div",{staticClass:"table-title left"},[e._v("标签权重")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialData.content_tag,"max-height":"400",border:"",stripe:""}},[a("el-table-column",{attrs:{align:"left",prop:"tagid",label:"标签ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",label:"标签名",formatter:e.setTagName,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"left",prop:"rel_weight",label:"权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e._parsePercent(t.row.rel_weight)))])]}}])})],1)],1)],1):e._e()],1):null!=e.usergroup&&"response failed"!=e.usergroup?a("el-main",{staticClass:"el-noauth"},[a("auth")],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerSkip"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerTips"},[e._v("\n    页面内容已迁移至\n    "),a("a",{attrs:{href:"/hot/#/hotcenter/analysis/material?type=3",title:"跳转至【热门管理-物料分析-单条物料分析】"}},[e._v("热门管理-物料分析-单条物料分析")]),e._v("当前页面即将废弃~")])],1)},staticRenderFns:[]};var E=a("VU/8")(A,M,!1,function(e){a("R+Uz"),a("4EWJ")},"data-v-3a595f8e",null).exports,N="http://i.hot.weibo.com",$="990750541234567890",P={name:"operatematerial",components:{ItemHeader:v,Auth:x},data:function(){return{tabPosition:"left",searchTimer:null,setBlackPopover:!1,goTopForm:{mid:"",type:["混合流"],flow:{"混合流":1,"访客流":2},upPopover:!1,downPopover:!1},goTopRules:{mid:[{required:!0,message:"mid不能为空",trigger:"blur"}],type:[{type:"array",required:!0,message:"请至少选择一个流",trigger:"change"}]},shieldForm:{isShowCancel:!1,placeholder:"请先选择屏蔽类型",content:"",type:"",addPopover:!1,cancelPopover:!1,options:[{value:"link",label:"微博链接"},{value:"uid",label:"uid"},{value:"mid",label:"mid"},{value:"url",label:"URL"},{value:"tag",label:"标签"},{value:"keyword",label:"关键字"}],placeObj:{link:"请输入微博链接",uid:"请输入uid,使用 , 分隔多个值",mid:"请输入mid,使用 , 分隔多个值",url:"请输入URL,使用 , 分隔多个值",tag:"请输入tag,使用 , 分隔多个值",keyword:"输入keyword,同一组用逗号分隔，不同组用｜分割"}},shieldRules:{content:[{required:!0,message:"物料不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择屏蔽类型",trigger:"blur"}]},operateForm:{loading:!1,user:"",total:0,count:10,currentPage:1}}},computed:u()({},Object(m.b)(["email","materialRecord","pageAuth","blackList"])),methods:{init:function(){1===this.pageAuth&&(this.onSearch(),this.getBlackList())},goTopEvent:function(e,t){var a=this,n=this,i="up"==t?"set19top":"del19top";this.goTopForm.upPopover=!1,this.goTopForm.downPopover=!1,this.$refs[e].validate(function(e){if(!e)return console.log("error "+i),!1;for(var t=n.goTopForm.type,l=[],r=0;r<t.length;r++)l.push(n.goTopForm.flow[t[r]]);var o={url:N+"/3/admin/"+i,param:{staff:n.email,source:$,data:n.goTopForm.mid,flow:l.join(",")}},c={data:s()(o),cip:230};a.$store.dispatch("TopMaterial",c)})},shieldEvent:function(e,t){var a=this,n=this;this.shieldForm.addPopover=!1,this.shieldForm.cancelPopover=!1,this.$refs[e].validate(function(e){if(!e)return console.log("error "+t),!1;var i=n.shieldForm.type,l=n.shieldForm.content;"link"==i&&(i="mid",l=n.urlToMid(l));var r={url:N+"/3/admin/apiAgent",param:{staff:n.email,source:$,action:t,flow:1,type:i,data:l}},o={data:s()(r),cip:230};a.$store.dispatch("ShieldMaterial",o),"mid"==i&&"add_black"==t&&n.addBlackList(l),"uid"==i&&"add_black"==t&&n.setBlackList(l,2),"uid"==i&&"cancel_black"==t&&n.setBlackList(l,0)})},resetForm:function(e){this.$refs[e].resetFields(),this.shieldForm.placeholder="请先选择屏蔽类型"},shieldChangeEvent:function(){""==this.shieldForm.type?this.shieldForm.placeholder="请先选择屏蔽类型":(this.shieldForm.isShowCancel="mid"!=this.shieldForm.type&&"link"!=this.shieldForm.type,this.shieldForm.placeholder=this.shieldForm.placeObj[this.shieldForm.type])},urlToMid:function(e){var t=e.split("/");return t[t.length-1]},onSearch:function(){this.operateForm.loading=!0,this.searchTimer||this.setTimer();var e={url:N+"/3/admin/getalllog",param:{staff:this.email,source:$,user:this.operateForm.user,page:this.operateForm.currentPage,count:this.operateForm.count}},t={data:s()(e),cip:230};this.$store.dispatch("GetRecord",t)},getBlackList:function(){var e={username:this.email,cip:230};this.$store.dispatch("GetBlackList",e)},addBlackList:function(e){var t=this,a={cip:230,mid:e,username:this.email};this.$store.dispatch("AddBlackList",a).then(function(){t.getBlackList()})},setBlackList:function(e,t){var a=this;this.setBlackPopover=!1;var n={cip:230,uid:e,status:t,username:this.email};this.$store.dispatch("SetBlackList",n).then(function(){a.getBlackList()})},operateChangeEvent:function(){this.operateForm.currentPage=1},setTimer:function(){var e=this;this.searchTimer=setTimeout(function(){e.operateForm.loading&&(e.operateForm.loading=!1),e.searchTimer=null},5e3)},focusEvent:function(){this.operateForm.loading&&(this.operateForm.loading=!1)},handleSizeChange:function(e){this.operateForm.count=e,this.onSearch()},handleCurrentChange:function(e){this.operateForm.currentPage=e,this.onSearch()},_formatNum:function(e){return L(e)}},created:function(){window.isPhone&&(this.tabPosition="top"),this.init()},watch:{dataInfo:function(){},materialRecord:function(){this.operateForm.loading=!1,this.operateForm.total=Number(this.materialRecord.total)},email:function(){},pageAuth:function(){this.init()},blackList:function(){}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-tabs",{attrs:{"tab-position":e.tabPosition}},[a("el-tab-pane",{attrs:{label:"操作记录"}},[a("h6",{staticClass:"pane-title hidden-xs-only"},[a("i",{staticClass:"el-icon-goods"}),e._v("物料操作记录查询")]),e._v(" "),a("el-row",{attrs:{type:"flex",align:"middle",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:20,md:20,lg:20,xl:20}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"300px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"查询指定用户, 为空则查询所有记录",clearable:""},on:{change:function(t){e.operateChangeEvent()}},model:{value:e.operateForm.user,callback:function(t){e.$set(e.operateForm,"user",t)},expression:"operateForm.user"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.operateForm.loading},on:{click:e.onSearch}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{staticClass:"pane-table",staticStyle:{width:"100%"},attrs:{data:e.materialRecord&&e.materialRecord.list,border:""}},[a("el-table-column",{attrs:{align:"left",width:"190",sortable:"",prop:"time",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time hidden-xs-only"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"120",prop:"name",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"300",prop:"content",label:"内容"}})],1),e._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{"current-page":e.operateForm.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.operateForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"置顶操作"}},[a("h6",{staticClass:"pane-title hidden-xs-only"},[a("i",{staticClass:"el-icon-goods"}),e._v("置顶操作")]),e._v(" "),a("el-row",{attrs:{type:"flex",align:"middle",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:18,md:12,lg:9,xl:4}},[a("el-form",{ref:"goTopForm",staticClass:"pane-form",attrs:{model:e.goTopForm,rules:e.goTopRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"微博mid",prop:"mid"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit",placeholder:"请输入mid",clearable:""},model:{value:e.goTopForm.mid,callback:function(t){e.$set(e.goTopForm,"mid",t)},expression:"goTopForm.mid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料类型",prop:"type"}},[a("el-checkbox-group",{model:{value:e.goTopForm.type,callback:function(t){e.$set(e.goTopForm,"type",t)},expression:"goTopForm.type"}},[a("el-checkbox",{attrs:{label:"混合流",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"访客流",name:"type"}})],1)],1),e._v(" "),a("el-form-item",[a("el-popover",{ref:"popoverUp",attrs:{placement:"bottom",width:"200"},model:{value:e.goTopForm.upPopover,callback:function(t){e.$set(e.goTopForm,"upPopover",t)},expression:"goTopForm.upPopover"}},[a("p",[e._v("确定上榜？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.goTopForm.upPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.goTopEvent("goTopForm","up")}}},[e._v("确定")])],1)]),e._v(" "),a("el-popover",{ref:"popoverDown",attrs:{placement:"bottom",width:"200"},model:{value:e.goTopForm.downPopover,callback:function(t){e.$set(e.goTopForm,"downPopover",t)},expression:"goTopForm.downPopover"}},[a("p",[e._v("确定下榜？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.goTopForm.downPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.goTopEvent("goTopForm","down")}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverUp",arg:"popoverUp"}],attrs:{type:"success",size:"small"}},[e._v("上榜")]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverDown",arg:"popoverDown"}],attrs:{type:"warning",size:"small"}},[e._v("下榜")])],1)],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"屏蔽操作"}},[a("h6",{staticClass:"pane-title hidden-xs-only"},[a("i",{staticClass:"el-icon-goods"}),e._v("屏蔽操作")]),e._v(" "),a("el-row",{attrs:{type:"flex",align:"middle",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:18,md:12,lg:9,xl:4}},[a("el-form",{ref:"shieldForm",staticClass:"pane-form",attrs:{model:e.shieldForm,rules:e.shieldRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"屏蔽类型",prop:"type"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.shieldChangeEvent()}},model:{value:e.shieldForm.type,callback:function(t){e.$set(e.shieldForm,"type",t)},expression:"shieldForm.type"}},e._l(e.shieldForm.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"输入物料",prop:"content"}},[a("el-input",{attrs:{type:"textarea","suffix-icon":"el-icon-edit",placeholder:e.shieldForm.placeholder,clearable:!0},model:{value:e.shieldForm.content,callback:function(t){e.$set(e.shieldForm,"content",t)},expression:"shieldForm.content"}})],1),e._v(" "),a("el-form-item",[a("el-popover",{ref:"addBlack",attrs:{placement:"bottom",width:"200"},model:{value:e.shieldForm.addPopover,callback:function(t){e.$set(e.shieldForm,"addPopover",t)},expression:"shieldForm.addPopover"}},[a("p",[e._v("确定屏蔽？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.shieldForm.addPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.shieldEvent("shieldForm","add_black")}}},[e._v("确定")])],1)]),e._v(" "),a("el-popover",{ref:"cancelBlack",attrs:{placement:"bottom",width:"200"},model:{value:e.shieldForm.cancelPopover,callback:function(t){e.$set(e.shieldForm,"cancelPopover",t)},expression:"shieldForm.cancelPopover"}},[a("p",[e._v("取消屏蔽？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.shieldForm.cancelPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.shieldEvent("shieldForm","cancel_black")}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:addBlack",arg:"addBlack"}],attrs:{type:"success",size:"small"}},[e._v("屏蔽物料")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.shieldForm.isShowCancel,expression:"shieldForm.isShowCancel"},{name:"popover",rawName:"v-popover:cancelBlack",arg:"cancelBlack"}],attrs:{type:"warning",size:"small"}},[e._v("取消屏蔽")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(t){e.resetForm("shieldForm")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("div",{staticClass:"table-title left"},[e._v("24小时内拉黑mid关联的uid审核")]),e._v(" "),a("el-table",{staticClass:"table-wrap",staticStyle:{width:"100%"},attrs:{data:e.blackList,border:"","max-height":"600"}},[a("el-table-column",{attrs:{width:"50",type:"index",align:"center",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"Uid",prop:"uid",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger",size:"medium"}},[e._v(e._s(t.row.uid))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"昵称",prop:"name",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"领域(最高分能力领域)",prop:"tagName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",size:"medium"}},[e._v(e._s(t.row.tagName||"未知"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"历史拉黑微博数(条)",prop:"num",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning",size:"medium"}},[e._v(e._s(e._formatNum(t.row.num))+"条")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"今日拉黑微博",prop:"list",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.list,function(t,n){return a("div",{key:n},[a("a",{staticClass:"link-btn",attrs:{target:"_blank",href:t.link}},[e._v(e._s(t.mid))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{ref:"setBlack",attrs:{placement:"bottom",width:"200"},model:{value:e.setBlackPopover,callback:function(t){e.setBlackPopover=t},expression:"setBlackPopover"}},[a("p",[e._v("确定解除定时拉黑？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.setBlackPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(a){e.setBlackList(t.row.uid,0)}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:setBlack",arg:"setBlack"}],attrs:{type:"primary",size:"mini"}},[e._v("解除定时拉黑\n                  ")])]}}])})],1)],1)],1)],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var j=a("VU/8")(P,F,!1,function(e){a("qPyZ")},"data-v-ff448012",null).exports,U={name:"operatematerial",components:{ItemHeader:v,Auth:x},data:function(){return{tabName:"offline",searchTimer:null,dataList:null,formData:{date:"",loading:!1},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},showMasker:!0}},computed:u()({},Object(m.b)(["email","materialMonitor","usergroup"])),methods:{init:function(){this.formData.date=T(Date.now()-1728e5,"{y}{m}{d}"),"inner"==this.usergroup?this.onSearch():console.log("用户未登录")},onSearch:function(){this.formData.loading=!0,this.searchTimer||this.setTimer();var e={url:"http://172.16.105.67:8091/newtest1011/getMaterialMonitorData.html",param:{dt:this.formData.date}},t={data:s()(e),cip:230};this.$store.dispatch("GetMonitor",t)},setTimer:function(){var e=this;this.searchTimer=setTimeout(function(){e.formData.loading&&(e.formData.loading=!1),e.searchTimer=null},5e3)},setNum:function(e,t,a){return L(a)||0},_parsePercent:function(e){return D(e)},setData:function(){this.dataList=this.materialMonitor[this.tabName]},autoHide:function(e){this.showMasker=!1}},created:function(){this.init()},mounted:function(){document.addEventListener("click",this.autoHide,!1)},destroyed:function(){document.removeEventListener("click",this.autoHide,!1)},watch:{materialMonitor:function(){this.formData.loading=!1,this.materialMonitor&&this.setData()},tabName:function(){this.setData()},email:function(){},usergroup:function(){this.init()}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),"inner"==e.usergroup?a("el-main",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:20,md:20,lg:20,xl:20}},[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"space-between"}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-goods"}),e._v("物料库监控")])]),e._v(" "),a("el-row",{staticClass:"search-box"},[a("el-date-picker",{attrs:{align:"right",type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyyMMdd",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.formData.loading},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:20,md:20,lg:20,xl:20}},[a("el-radio-group",{model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-radio",{attrs:{border:"",label:"offline"}},[e._v("原始数据")]),e._v(" "),a("el-radio",{attrs:{border:"",label:"online"}},[e._v("入库数据")])],1),e._v(" "),a("el-table",{staticClass:"pane-table",staticStyle:{width:"100%"},attrs:{data:e.dataList,"default-sort":{prop:"total_num",order:"descending"},border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",align:"left","min-width":"80",prop:"name",label:"所属领域"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"90",sortable:"",prop:"total_num",label:"总曝光数（条）",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"second_tag_rate_material",label:"内容标签2级覆盖率（按物料统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.second_tag_rate_material?a("el-tag",[e._v(e._s(e._parsePercent(t.row.second_tag_rate_material)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"third_tag_rate_material",label:"内容标签3级覆盖率（按物料统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.third_tag_rate_material?a("el-tag",[e._v(e._s(e._parsePercent(t.row.third_tag_rate_material)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"second_tag_rate_expose",label:"内容标签2级覆盖率（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.second_tag_rate_expose?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e._parsePercent(t.row.second_tag_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"third_tag_rate_expose",label:"内容标签3级覆盖率（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.third_tag_rate_expose?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e._parsePercent(t.row.third_tag_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"150",sortable:"",prop:"second_user_rate_expose",label:"用户2级兴趣匹配度（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.second_user_rate_expose?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e._parsePercent(t.row.second_user_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"150",sortable:"",prop:"third_user_rate_expose",label:"用户3级兴趣匹配度（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.third_user_rate_expose?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e._parsePercent(t.row.third_user_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])})],1)],1)],1)],1):null!=e.usergroup&&"response failed"!=e.usergroup?a("el-main",[a("auth")],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerSkip"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerTips"},[e._v("\n    页面内容已迁移至\n    "),a("a",{attrs:{href:"/hot/#/hotcenter/analysis/material?type=2",title:"跳转至【热门管理-物料分析-内容标签统计"}},[e._v("热门管理-物料分析-内容标签统计")]),e._v("当前页面即将废弃~")])],1)},staticRenderFns:[]};var B=a("VU/8")(U,O,!1,function(e){a("62FB")},"data-v-0a5b0045",null).exports,z={name:"operatematerial",components:{ItemHeader:v,Auth:x},data:function(){return{showMasker:!0}},computed:u()({},Object(m.b)(["isLogin","email","materialStatus","usergroup"])),methods:{init:function(){"inner"==this.usergroup?this.onSearch():console.log("用户未登录")},onSearch:function(){var e={data:s()({url:"http://172.16.139.44:10999/get_materials_status"}),cip:230};this.$store.dispatch("GetStatus",e)},setNum:function(e,t,a){return L(a)},autoHide:function(e){this.showMasker=!1}},created:function(){this.init()},mounted:function(){document.addEventListener("click",this.autoHide,!1)},destroyed:function(){document.removeEventListener("click",this.autoHide,!1)},watch:{materialStatus:function(){},isLogin:function(){},email:function(){},usergroup:function(){this.init()}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),"inner"==e.usergroup?a("el-main",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:20,md:20,lg:20,xl:20}},[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"space-between"}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-goods"}),e._v("物料库现状")]),e._v(" "),a("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 刷新")])],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:20,md:20,lg:20,xl:20}},[a("el-table",{staticClass:"pane-table",staticStyle:{width:"100%"},attrs:{data:e.materialStatus&&e.materialStatus.material,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",align:"left",prop:"name",label:"所属领域"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",sortable:"",prop:"mysql_num",label:"原始数据（条）",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{align:"left",sortable:"",prop:"online_num",label:"入库数据（条）",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{align:"left",sortable:"",prop:"expo_num",label:"领域曝光（条）",formatter:e.setNum}})],1)],1)],1)],1):null!=e.usergroup&&"response failed"!=e.usergroup?a("el-main",[a("auth")],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerSkip"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerTips"},[e._v("\n    页面内容已迁移至\n    "),a("a",{attrs:{href:"/hot/#/hotcenter/analysis/material",title:"跳转至【热门管理-物料分析-物料库规模"}},[e._v("热门管理-物料分析-物料库规模")]),e._v("当前页面即将废弃~")])],1)},staticRenderFns:[]};var W=a("VU/8")(z,V,!1,function(e){a("e+tk")},"data-v-2b9577a1",null).exports,R=[{tagid:"1042015:tagCategory_055",name:"家装家居"},{tagid:"1042015:tagCategory_100004",name:"电信"},{tagid:"1042015:tagCategory_1004",name:"其他"},{tagid:"1042015:tagCategory_009",name:"动漫"},{tagid:"1042015:tagCategory_027",name:"星座命理"},{tagid:"1042015:tagCategory_029",name:"汽车"},{tagid:"1042015:tagCategory_028",name:"母婴育儿"},{tagid:"1042015:tagCategory_001",name:"互联网"},{tagid:"1042015:tagCategory_026",name:"时尚"},{tagid:"1042015:tagCategory_025",name:"旅游出行"},{tagid:"1042015:tagCategory_024",name:"教育"},{tagid:"1042015:tagCategory_023",name:"政府政务"},{tagid:"1042015:tagCategory_004",name:"人文艺术"},{tagid:"1042015:tagCategory_021",name:"摄影拍照"},{tagid:"1042015:tagCategory_020",name:"搞笑幽默"},{tagid:"1042015:tagCategory_016",name:"媒体传播"},{tagid:"1042015:tagCategory_017",name:"宗教"},{tagid:"1042015:tagCategory_014",name:"奢侈品"},{tagid:"1042015:tagCategory_015",name:"婚庆服务"},{tagid:"1042015:tagCategory_012",name:"体育"},{tagid:"1042015:tagCategory_010",name:"动物宠物"},{tagid:"1042015:tagCategory_011",name:"美妆"},{tagid:"1042015:tagCategory_005",name:"健康养生"},{tagid:"1042015:tagCategory_050",name:"娱乐明星"},{tagid:"1042015:tagCategory_057",name:"休闲娱乐"},{tagid:"1042015:tagCategory_018",name:"情感两性"},{tagid:"1042015:tagCategory_019",name:"财经"},{tagid:"1042015:tagCategory_007",name:"军事"},{tagid:"1042015:tagCategory_006",name:"健康医疗"},{tagid:"1042015:tagCategory_002",name:"交通服务"},{tagid:"1042015:tagCategory_058",name:"房地产"},{tagid:"1042015:tagCategory_039",name:"美女帅哥"},{tagid:"1042015:tagCategory_10001",name:"收藏"},{tagid:"1042015:tagCategory_034",name:"电视剧"},{tagid:"1042015:tagCategory_035",name:"科学科普"},{tagid:"1042015:tagCategory_036",name:"综艺节目"},{tagid:"1042015:tagCategory_030",name:"法律"},{tagid:"1042015:tagCategory_031",name:"数码"},{tagid:"1042015:tagCategory_032",name:"游戏"},{tagid:"1042015:tagCategory_033",name:"电影"},{tagid:"1042015:tagCategory_062",name:"广播电台"},{tagid:"1042015:tagCategory_061",name:"历史"},{tagid:"1042015:tagCategory_060",name:"时事"},{tagid:"1042015:tagCategory_049",name:"日化"},{tagid:"1042015:tagCategory_048",name:"公益"},{tagid:"1042015:tagCategory_045",name:"运动健身"},{tagid:"1042015:tagCategory_044",name:"读书作家"},{tagid:"1042015:tagCategory_047",name:"家政"},{tagid:"1042015:tagCategory_046",name:"音乐"},{tagid:"1042015:tagCategory_041",name:"美食"},{tagid:"1042015:tagCategory_043",name:"设计美学"},{tagid:"1042015:tagCategory_042",name:"职场"},{tagid:"1042015:tagCategory_10003",name:"IT技术"},{tagid:"1042015:tagCategory_11501",name:"文化"},{tagid:"1042015:tagCategory_11502",name:"社会"},{tagid:"1042015:tagCategory_11503",name:"国际"},{tagid:"1042015:tagCategory_11504",name:"娱乐"},{tagid:"1042015:tagCategory_11505",name:"健康"},{tagid:"1042015:tagCategory_11506",name:"科技"}],H={name:"itemList",props:["item","index"],data:function(){return{loading:!1,isEditable:!1,videoSrc:"",categoryList:[],secondTagList:[],thirdTagList:[],cate:"",second_tag:"",third_tag:[],deleteReason:"",controls:!1,testSource:'<a href="http://app.weibo.com/t/feed/vzdRJ" rel="nofollow">OPPO超视野全面屏R15</a>',logList:[{content:"删除",operator:"tester",create_time:1524672798,description:"内容有待审核"},{content:"通过审核",operator:"tester",create_time:1524672598}]}},computed:u()({},Object(m.b)(["curvideo"])),methods:{init:function(){this.cate=this.item.cate.split("|")[0],this.second_tag=this.item.second_tag.split("|")[0]},togglePlay:function(){this.$store.dispatch("updateVideo",this.item.mid),this.videoSrc||(this.videoSrc=this.item.video_urls[0],this.controls=!0)},_formatNum:function(e){return L(e)},_parsePercent:function(e,t){return D(e,t)},_parseTime:function(e,t){return T(e,t)},getMysql:function(e){return"fast_recommend_materials"==e?"推荐物料":"冷启动"},getState:function(e){var t="";switch(e){case"-1":t="已删除";break;case"0":t="已通过";break;case"1":t="待审"}return t},remoteMethod:function(e){var t=this;if(""!==e){this.loading=!0;var a={url:"http://172.16.139.44:6066/query_tag",param:{tag_name:e}},n={data:s()(a),cip:230};this.$store.dispatch("GetThirdTag",n).then(function(e){t.loading=!1,e.code&&200==Number(e.code)&&(t.thirdTagList=e.data)})}},cancelEvent:function(){this.isEditable=!1,this.init()},passEvent:function(){var e=this;this.$confirm("物料审核通过, 是否继续?","删除物料",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){console.log("item.mid:",e.item.mid),e.$message({type:"success",message:"通过审核成功!"})}).catch(function(){e.$message({type:"info",message:"取消通过审核"})})},deleteEvent:function(){var e=this;this.$prompt("请输入删除原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea",inputPattern:/[\s\S]/,inputErrorMessage:"输入内容不能为空",beforeClose:function(t,a,n){"confirm"===t&&(e.deleteReason=a.inputValue),n()}}).then(function(){console.log("删除原因：",e.deleteReason),console.log("item.mid:",e.item.mid),e.$message({type:"success",message:"删除成功！"})}).catch(function(){e.$message({type:"info",message:"取消删除"})})}},created:function(){this.categoryList=R,this.init()},watch:{item:function(){this.init()},index:function(){},curvideo:function(){this.curvideo!=this.item.mid&&(this.videoSrc="",this.controls=!1)}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{staticClass:"item-wrapper",attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-row",[a("div",{staticClass:"item-status-box clearfix"},[a("el-checkbox",{attrs:{label:e.item.mid}},[e._v(e._s(""))]),e._v(" "),a("label",{staticClass:"item-num"},[e._v("NO."+e._s(e.index))]),e._v(" "),a("label",{staticClass:"item-mid"},[e._v("mid: "+e._s(e.item.mid))]),e._v(" "),a("label",{staticClass:"item-uid"},[e._v("uid: "+e._s(e.item.uid))]),e._v(" "),a("label",{staticClass:"item-mysql"},[e._v("召回池: "+e._s(e.getMysql(e.item.mysql)))]),e._v(" "),a("label",{staticClass:"item-origin"},[e._v("原创: 是")]),e._v(" "),a("label",{staticClass:"item-state"},[e._v("物料状态: "+e._s(e.getState(e.item.materials_type)))]),e._v(" "),"-1"!=e.item.materials_type?a("el-button",{staticClass:"right",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",plain:"",size:"mini"},on:{click:e.deleteEvent}},[e._v("删除")]):e._e(),e._v(" "),"0"!=e.item.materials_type?a("el-button",{staticClass:"right",attrs:{type:"success",plain:"",size:"mini"},on:{click:e.passEvent}},[e._v("通过")]):e._e(),e._v(" "),a("el-button",{staticClass:"right",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){e.isEditable=!0}}},[e._v("修改标签")])],1),e._v(" "),a("div",{staticStyle:{margin:"10px"}},[a("el-form",{attrs:{inline:!0}},[e.categoryList?a("el-form-item",{attrs:{label:"分类1",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",disabled:!e.isEditable},model:{value:e.cate,callback:function(t){e.cate=t},expression:"cate"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.tagid,attrs:{label:e.name,value:e.tagid}})}))],1):e._e(),e._v(" "),e.categoryList?a("el-form-item",{attrs:{label:"分类2",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",disabled:!e.isEditable},model:{value:e.second_tag,callback:function(t){e.second_tag=t},expression:"second_tag"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.tagid,attrs:{label:e.name,value:e.tagid}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"tags",size:"mini"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","remote-method":e.remoteMethod,placeholder:"请输入关键词",loading:e.loading,disabled:!e.isEditable},model:{value:e.third_tag,callback:function(t){e.third_tag=t},expression:"third_tag"}},e._l(e.thirdTagList,function(e){return a("el-option",{key:e.tagid,attrs:{label:e.name,value:e.tagid}})}))],1),e._v(" "),e.isEditable?a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("保 存")]):e._e(),e._v(" "),e.isEditable?a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.cancelEvent()}}},[e._v("取消")]):e._e()],1)],1),e._v(" "),e.logList?a("div",{staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"table-title left"},[e._v("【操作记录】")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logList,"max-height":"200",border:"",stripe:""}},[a("el-table-column",{attrs:{align:"left",prop:"content",label:"内容"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"create_time",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._parseTime(t.row.create_time,"{y}-{m}-{d} {h}:{m}:{s}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"description",label:"说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.description||"暂无"))])]}}])})],1)],1):e._e()]),e._v(" "),a("el-row",{staticClass:"clearfix"},[a("div",{staticClass:"left"},[a("a",{staticClass:"item-avatar",attrs:{href:"//weibo.com/u/"+e.item.uid,title:"跳转微博主页"}},[a("img",{attrs:{src:e.item.profile_image_url}})])]),e._v(" "),a("div",{staticClass:"left",staticStyle:{padding:"10px"}},[a("el-row",[a("a",{staticClass:"item-name",attrs:{href:"//weibo.com/u/"+e.item.uid,target:"_blank",title:"跳转微博主页"}},[e._v(e._s(e.item.screen_name))])]),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex"}},[a("span",{staticClass:"item-info",attrs:{title:"查看微博详情"}},[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("a",{attrs:{href:e.item.link,target:"_blank"}},[e._v(e._s(e._parseTime(e.item.created_at)))])]),e._v(" "),a("span",{staticClass:"info-box"},[e._v("来自\n            "),a("label",{staticClass:"item-info",domProps:{innerHTML:e._s(e.testSource)}})])])],1)]),e._v(" "),a("el-row",{staticClass:"content-text"},[a("a",{attrs:{href:e.item.link,target:"_blank",title:"查看微博详情"}},[e._v(e._s(e.item.text))])]),e._v(" "),e.item.pic_ids&&e.item.pic_ids.length>0?a("el-row",{staticClass:"img-wrapper"},e._l(e.item.pic_ids,function(e,t){return a("el-col",{key:t,staticStyle:{margin:"4px 0 0 4px"},attrs:{xs:8,sm:7,md:5,lg:4,xl:20}},[a("img",{attrs:{src:"//ww2.sinaimg.cn/bmiddle/"+e+".jpg"}})])})):e._e(),e._v(" "),e.item.video_pic_urls&&e.item.video_pic_urls.length>0?a("el-row",{staticClass:"video-wrapper"},[e.videoSrc?e._e():a("span",{staticClass:"play-btn",on:{click:function(t){e.togglePlay()}}},[a("i",{staticClass:"el-icon-caret-right play-btn-icon"})]),e._v(" "),a("video",{attrs:{id:"video"+e.item.mid,poster:e.item.video_pic_urls[0],controls:e.controls,src:e.videoSrc,autoplay:""}},[e._v("您的浏览器不支持HTML5")])]):e._e(),e._v(" "),a("el-row",{staticClass:"item-footer",attrs:{type:"flex"}},[a("el-col",{staticClass:"footer-list"},[a("i",{staticClass:"el-icon-phone-outline"}),e._v(" "),a("label"),e._v(" "),a("span",[e._v("热度 "+e._s(e._formatNum(e.item.hot_num)))])]),e._v(" "),a("el-col",{staticClass:"footer-list"},[a("i",{staticClass:"el-icon-view"}),e._v(" "),a("label",[e._v("曝光量 ")]),e._v(" "),a("span",[e._v(e._s(e._formatNum(e.item.expo)))])]),e._v(" "),a("el-col",{staticClass:"footer-list"},[a("i",{staticClass:"el-icon-edit"}),e._v(" "),a("label",[e._v("点击量 ")]),e._v(" "),a("span",[e._v(e._s(e._formatNum(e.item.click_num)))])]),e._v(" "),a("el-col",{staticClass:"footer-list",staticStyle:{border:"0"}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" "),a("label",[e._v("ctr ")]),e._v(" "),a("span",[e._v(e._s(e._parsePercent(e.item.click_rate)))])])],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(H,q,!1,function(e){a("2f/p")},"data-v-4a74b8d7",null).exports,K=a("zL8q"),Y=a.n(K),Q={name:"manage",components:{ItemHeader:v,Auth:x,ItemList:G},data:function(){return{datalist:null,formInline:{last_digit:["all"],table_name:"fast_recommend_materials",cate:["all"],date:[],sort_type:"",flag_check:"",mid:[],uid:[],page:1,count:2,total:0},initoption:{cate:[{tagid:"all",name:"全部"},{tagid:"tags",name:"一级标签",children:R}],lastdigit:[{value:"all",label:"全部"},{value:"0",label:0},{value:"1",label:1},{value:"2",label:2},{value:"3",label:3},{value:"4",label:4},{value:"5",label:5},{value:"6",label:6},{value:"7",label:7},{value:"8",label:8},{value:"9",label:9}],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},props:{value:"tagid",label:"name"}},way:"mid",content:[],isIndeterminate:!1,checkAll:!1,midList:[],checkedMid:[],deleteReason:""}},computed:u()({},Object(m.b)(["email","pageAuth"])),methods:{init:function(){1===this.pageAuth?(this.formInline.date=[Date.now(),Date.now()],this.onSearch()):console.log("用户未登录")},onSearch:function(){var e=this;if(0!=this.formInline.date.length){this.formInline[this.way]=this.content.join(","),"mid"==this.way?this.formInline.uid="":this.formInline.mid="";var t={url:"http://172.16.139.44:6065/query_mid",param:{mid:this.formInline.mid,uid:this.formInline.uid,last_digit:"all"==this.formInline.last_digit?"":this.formInline.last_digit.join(","),table_name:this.formInline.table_name,cate:"tags"==this.formInline.cate[0]?this.formInline.cate[1]:"",sort_type:this.formInline.sort_type,flag_check:this.formInline.flag_check,page:this.formInline.page,count:this.formInline.count}};console.log("入参：",t);var a={data:s()(t),cip:230};this.$store.dispatch("GetManageData",a).then(function(t){t.code&&200==Number(t.code)&&(Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),e.datalist=t.data,e.formInline.total=t.total_length,t.total_length>0&&e.setMidList(t.data))})}else Object(K.Message)({showClose:!0,message:"请选择查询时间！",type:"error",duration:3e3})},setMidList:function(e){this.midList=[];for(var t=0;t<e.length;t++)this.midList.push(e[t].mid)},handleCheckAllChange:function(e){this.checkedMid=e?this.midList:[],this.isIndeterminate=!1},handleCheckedMidChange:function(e){var t=e.length;this.checkAll=t===this.midList.length,this.isIndeterminate=t>0&&t<this.midList.length},allPassEvent:function(){var e=this;this.$confirm("所选物料将全部通过审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){console.log("checkedMid",e.checkedMid),e.$message({type:"success",message:"所选物料已全部通过审核!"})}).catch(function(){e.$message({type:"info",message:"已取消通过审核"})})},aallDeleteEvent:function(){var e=this;this.$confirm("所选物料将全部删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){console.log("checkedMid",e.checkedMid),e.$message({type:"success",message:"所选物料已全部删除!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},allDeleteEvent:function(){var e=this;this.$prompt("请输入删除原因","删除所选物料",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea",inputPattern:/[\s\S]/,inputErrorMessage:"输入内容不能为空",beforeClose:function(t,a,n){"confirm"===t&&(e.deleteReason=a.inputValue),n()}}).then(function(){console.log("删除原因：",e.deleteReason),console.log("checkedMid",e.checkedMid),e.$message({type:"success",message:"删除成功！"})}).catch(function(){e.$message({type:"info",message:"取消删除"})})},handleLastDigit:function(){-1!=this.formInline.last_digit.indexOf("all")&&0!=this.formInline.last_digit.indexOf("all")?this.formInline.last_digit=["all"]:this.formInline.last_digit.length>=2&&0==this.formInline.last_digit.indexOf("all")&&this.formInline.last_digit.splice(0,1)}},created:function(){this.init()},watch:{email:function(){},pageAuth:function(){this.init()}}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-form",{staticClass:"selecte-active",attrs:{model:e.formInline,"label-width":"70px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12,md:7,lg:5,xl:24}},[a("el-form-item",{staticClass:"active",attrs:{label:"mid尾号"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择mid尾号，可多选",size:"small"},on:{change:function(t){e.handleLastDigit()}},model:{value:e.formInline.last_digit,callback:function(t){e.$set(e.formInline,"last_digit",t)},expression:"formInline.last_digit"}},e._l(e.initoption.lastdigit,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:7,lg:4,xl:24}},[a("el-form-item",{attrs:{label:"召回池"}},[a("el-select",{attrs:{placeholder:"请选择召回池",size:"small"},model:{value:e.formInline.table_name,callback:function(t){e.$set(e.formInline,"table_name",t)},expression:"formInline.table_name"}},[a("el-option",{attrs:{label:"推荐物料",value:"fast_recommend_materials"}}),e._v(" "),a("el-option",{attrs:{label:"冷启动",value:"fast_fro_new_user_recommend_materials"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:9,lg:5,xl:24}},[a("el-form-item",{attrs:{label:"领域"}},[a("el-cascader",{attrs:{options:e.initoption.cate,placeholder:"请选择物料领域",props:e.initoption.props,size:"small","change-on-select":""},model:{value:e.formInline.cate,callback:function(t){e.$set(e.formInline,"cate",t)},expression:"formInline.cate"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:9,xl:15}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"timestamp","unlink-panels":"","picker-options":e.initoption.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:11,xl:9}},[a("el-form-item",{attrs:{label:"排序方式"}},[a("el-radio-group",{model:{value:e.formInline.sort_type,callback:function(t){e.$set(e.formInline,"sort_type",t)},expression:"formInline.sort_type"}},[a("el-radio",{attrs:{label:""}},[e._v("发布时间")]),e._v(" "),a("el-radio",{attrs:{label:"hot_num"}},[e._v("热度")]),e._v(" "),a("el-radio",{attrs:{label:"expo"}},[e._v("曝光量")]),e._v(" "),a("el-radio",{attrs:{label:"click_num"}},[e._v("点击量")]),e._v(" "),a("el-radio",{attrs:{label:"click_rate"}},[e._v("CTR")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:11,xl:9}},[a("el-form-item",{attrs:{label:"物料状态"}},[a("el-radio-group",{model:{value:e.formInline.flag_check,callback:function(t){e.$set(e.formInline,"flag_check",t)},expression:"formInline.flag_check"}},[a("el-radio",{attrs:{label:""}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("待审")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("已通过")]),e._v(" "),a("el-radio",{attrs:{label:-1}},[e._v("已删除")])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,sm:24,md:24,lg:13,xl:6}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:11,sm:6,md:5,lg:6,xl:5}},[a("el-form-item",{attrs:{label:"搜索方式"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.way,callback:function(t){e.way=t},expression:"way"}},[a("el-option",{attrs:{label:"mid",value:"mid"}}),e._v(" "),a("el-option",{attrs:{label:"uid",value:"uid"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入内容 选中/回车分隔","no-data-text":"输入"+e.way+" 选中/回车分隔"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}},e._l([],function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"-1px"},attrs:{span:5}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.onSearch()}}},[e._v("查询")])],1)],1)],1)],1)],1),e._v(" "),e.datalist?a("el-row",[a("el-col",{attrs:{span:23}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success",size:"mini"},on:{click:e.allPassEvent}},[e._v("选中物料全部通过")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.allDeleteEvent}},[e._v("选中物料全部删除")]),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedMidChange},model:{value:e.checkedMid,callback:function(t){e.checkedMid=t},expression:"checkedMid"}},e._l(e.datalist,function(t,n){return a("item-list",{key:n,attrs:{item:t,index:20*(e.formInline.page-1)+n+1}})}))],1)],1):e._e()],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var Z=a("VU/8")(Q,J,!1,function(e){a("D01m")},"data-v-b34cdb72",null).exports,X=a("ifoU"),ee=a.n(X),te={name:"monitorItem",props:["data","name","type","item"],methods:{_formatNum:function(e){return L(e)},_parsePercent:function(e){return e?D(e):"0%"},checkRate:function(e,t){return e<-.15?"danger":e>.15?"success":"info"}},watch:{data:function(){}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data?a("el-row",{staticClass:"table-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("div",{staticClass:"table-title left"},[e._v("【"+e._s(e.type.label)+"】"+e._s(e.name))]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,"max-height":"400",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",label:e.name},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link-btn",attrs:{target:"_blank",href:"/hot/#/hotcenter/analydata?items="+e.item+"&type="+e.type.value}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"110",prop:"day_num",sortable:"",label:"当日数据"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.day_num)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"280",prop:"day_rate",sortable:"",label:"天环比 (当日数据-前天数据)/前天数据"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.yesterday_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.checkRate(t.row.day_rate)}},[e._v(e._s(e._parsePercent(t.row.day_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"280",prop:"week_rate",sortable:"",label:"周环比 (本周均值-上周均值)/上周均值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.week_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.checkRate(t.row.week_rate)}},[e._v(e._s(e._parsePercent(t.row.week_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"280",prop:"month_rate",sortable:"",label:"月环比 (本月均值-上月均值)/上月均值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.month_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.checkRate(t.row.month_rate)}},[e._v(e._s(e._parsePercent(t.row.month_rate)))])]}}])})],1)],1)],1):e._e()},staticRenderFns:[]};var ne={name:"monitorPage",props:["data"],components:{MonitorItem:a("VU/8")(te,ae,!1,function(e){a("KtDj")},"data-v-7a7ca77e",null).exports},data:function(){return{titleDate:"",dataMonitor:null,itemMap:null,formInline:{category:["recommend_source","agent_version","system","network_type","hotwb_frequency_type","all_frequency_type","age","gender","mid_type","user_c_level","user_v_level","source"],date:""},categoryList:[{value:"recommend_source",label:"来源"},{value:"agent_version",label:"客户端版本"},{value:"system",label:"操作系统"},{value:"network_type",label:"网络环境"},{value:"hotwb_frequency_type",label:"分登录频次-热门"},{value:"all_frequency_type",label:"分登录频次-全站"},{value:"age",label:"年龄"},{value:"gender",label:"性别"},{value:"mid_type",label:"内容形式"},{value:"user_c_level",label:"C类型"},{value:"user_v_level",label:"V类型"},{value:"source",label:"领域"}],pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},computed:u()({},Object(m.b)(["usergroup"])),methods:{init:function(){this.formInline.date=T(Date.now()-1728e5,"{y}{m}{d}"),this.updateTime(),this.itemMap=new ee.a([["recommend_source","来源"],["agent_version","客户端版本"],["system","操作系统"],["network_type","网络环境"],["hotwb_frequency_type","分登录频次-热门"],["all_frequency_type","分登录频次-全站"],["age","年龄"],["gender","性别"],["mid_type","内容形式"],["user_c_level","C类型"],["user_v_level","V类型"],["source","领域"]]),"inner"==this.usergroup?this.onSearch():console.log("用户未登录")},updateTime:function(){this.titleDate=this.formInline.date},onSearch:function(){var e=this,t=this.formInline.category.join(",");if(t){var a={url:"http://172.16.105.67:8091/newtest1011/getKpiMonitorData.html",param:{dt:this.formInline.date,items:t,type:this.data.value}},n={data:s()(a),cip:230};this.$store.dispatch("GetDataMonitor",n).then(function(t){t.code&&200==Number(t.code)&&(e.updateTime(),e.dataMonitor=t.data)})}else Object(K.Message)({showClose:!0,message:"请选择监控项！",type:"error",duration:1e3})},_formatNum:function(e){return L(e)},_parsePercent:function(e){return e?D(e):"0%"},entireRate:function(e,t){return e<-.1?"danger":e>.1?"success":"info"}},created:function(){this.init()},watch:{dataMonitor:function(){},data:function(){}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-bell",staticStyle:{"margin-right":"6px"}}),e._v("热门流-数据监控-"+e._s(e.data.label)+"（"+e._s(e.titleDate)+"）")])]),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:8}},[a("el-form",{attrs:{model:e.formInline}},[a("el-form-item",{attrs:{label:"监控选项"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.formInline.category,callback:function(t){e.$set(e.formInline,"category",t)},expression:"formInline.category"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"时间选择"}},[a("el-date-picker",{attrs:{align:"right",type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyyMMdd",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e.dataMonitor&&e.dataMonitor.entire?a("el-col",{attrs:{span:16}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataMonitor.entire,"max-height":"220",border:"",stripe:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",width:"120",prop:"name",label:"维度",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link-btn",attrs:{target:"_blank",href:"/hot/#/hotcenter/analydata?type="+e.data.value}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"160",prop:"day_num",sortable:"",label:"当日数据"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.day_num)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"day_rate",sortable:"",label:"天环比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.yesterday_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.entireRate(t.row.day_rate)}},[e._v(e._s(e._parsePercent(t.row.day_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"week_rate",sortable:"",label:"周环比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.week_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.entireRate(t.row.week_rate)}},[e._v(e._s(e._parsePercent(t.row.week_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"month_rate",sortable:"",label:"月环比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.month_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.entireRate(t.row.month_rate)}},[e._v(e._s(e._parsePercent(t.row.month_rate)))])]}}])})],1)],1):e._e()],1),e._v(" "),e._l(e.formInline.category,function(t,n){return e.dataMonitor&&e.dataMonitor[t]?a("monitor-item",{key:n,attrs:{data:e.dataMonitor[t],name:e.itemMap.get(t),type:e.data,item:t}}):e._e()})],2)},staticRenderFns:[]};var le={name:"datamonitor",components:{ItemHeader:v,Auth:x,MonitorPage:a("VU/8")(ne,ie,!1,function(e){a("+Hzr")},"data-v-fd296820",null).exports},data:function(){return{formInline:{date:[]},tabList:[{label:"千次点击",value:"thd_click"},{label:"千次互动",value:"thd_act"},{label:"人均刷新",value:"average_fresh_times"},{label:"PV",value:"pv"},{label:"UV",value:"uv"},{label:"曝光量",value:"exposure"},{label:"次日留存(热门)",value:"two_save_rate"},{label:"次日留存(首页)",value:"two_feed_save_rate"}],pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},showMasker:!0}},computed:u()({},Object(m.b)(["email","usergroup","entireMonitor"])),methods:{init:function(){var e=T(Date.now()-6912e5,"{y}{m}{d}"),t=T(Date.now()-1728e5,"{y}{m}{d}");this.formInline.date=[e,t],"inner"==this.usergroup?this.onSearch():console.log("用户未登录")},onSearch:function(){var e={url:"http://172.16.105.67:8091/newtest1011/getEntireDayTableData.html",param:{dt_start:this.formInline.date[0],dt_end:this.formInline.date[1]}},t={data:s()(e),cip:230};this.$store.dispatch("GetEntireMonitor",t)},_formatNum:function(e){return L(e)},_parseTime:function(e){return e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)},autoHide:function(e){this.showMasker=!1}},created:function(){this.init()},mounted:function(){document.addEventListener("click",this.autoHide,!1)},destroyed:function(){document.removeEventListener("click",this.autoHide,!1)},watch:{email:function(){},usergroup:function(){this.init()}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),"inner"==e.usergroup?a("el-main",[a("el-tabs",{attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"整体数据"}},[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-bell",staticStyle:{"margin-right":"6px"}}),e._v("热门流-数据监控-整体数据")])]),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",[a("el-date-picker",{attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},on:{change:function(t){e.getDropList()}},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e.entireMonitor?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.entireMonitor,border:"",stripe:""}},[a("el-table-column",{attrs:{align:"center",width:"100",prop:"dt",label:"日期",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._parseTime(t.row.dt)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"70",prop:"day",label:"星期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thd_click",sortable:"",label:"千次点击"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.thd_click)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thd_act",sortable:"",label:"千次互动"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.thd_act)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"average_fresh_times",sortable:"",label:"人均刷新"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.average_fresh_times)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pv",sortable:"",label:"PV"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.pv)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"uv",sortable:"",label:"UV"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.uv)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"exposure",sortable:"",label:"曝光量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.exposure)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90",prop:"two_save_rate",sortable:"",label:"次日留存(热门)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.two_save_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90",prop:"two_feed_save_rate",sortable:"",label:"次日留存(首页)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.two_feed_save_rate)))])]}}])})],1)],1):e._e()],1),e._v(" "),e._l(e.tabList,function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e.label}},[a("monitor-page",{attrs:{data:e}})],1)})],2)],1):null!=e.usergroup&&"response failed"!=e.usergroup?a("el-main",[a("auth")],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerSkip"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMasker,expression:"showMasker"}],staticClass:"maskerTips"},[e._v("\n    页面内容已迁移至\n    "),a("a",{attrs:{href:"/hot/#/hotcenter/analysis/data",title:"跳转至【热门管理-数据分析】"}},[e._v("热门管理-数据分析")]),e._v("当前页面即将废弃~")])],1)},staticRenderFns:[]};var oe=a("VU/8")(le,re,!1,function(e){a("YS+L")},"data-v-9462b8a2",null).exports,se=a("cs+8"),ce={name:"templateChart",components:{VueEcharts:a.n(se).a},props:["data"],data:function(){return{options:null,width:"100%",height:"400px",title:"统计图表"}},created:function(){this.data&&this.setChart()},methods:{setChart:function(){this.title=this.data.title||this.title,this.width=this.data.width||this.width,this.height=this.data.height||this.height,this.options={color:["#fc97af","#87f7cf","#fcce10","#72ccff","#f7c5a0","#d4a4eb","#d2f5a6","#76f2f2"],title:{text:this.title,textStyle:{color:"#516b91",fontSize:16}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{type:"scroll",bottom:10,data:this.data.legendName},toolbox:{feature:{dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{pixelRatio:2}},right:15,top:18,emphasis:{iconStyle:{borderColor:"#409eff"}}},grid:{left:"1%",containLabel:!0},xAxis:this.data.xAxis,yAxis:this.data.yAxis,series:this.data.series}}},watch:{data:function(){this.data&&this.setChart()}}},ue={render:function(){var e=this.$createElement,t=this._self._c||e;return this.data?t("div",{staticClass:"chartsBox"},[t("div",{style:"width:"+this.width+";height:"+this.height},[this.options?t("vue-echarts",{attrs:{options:this.options,loading:"true"}}):this._e()],1)]):this._e()},staticRenderFns:[]};var me=a("VU/8")(ce,ue,!1,function(e){a("o6l3")},"data-v-47762b86",null).exports,de={name:"datamonitor",components:{ItemHeader:v,Auth:x,ItemChart:me},data:function(){return{formInline:{type:"",items:"author_c_level",date:[],charts:[]},itemsList:[{value:"recommend_source",label:"来源"},{value:"agent_version",label:"客户端版本"},{value:"system",label:"操作系统"},{value:"network_type",label:"网络环境"},{value:"hotwb_frequency_type",label:"分登录频次-热门"},{value:"all_frequency_type",label:"分登录频次-全站"},{value:"age",label:"年龄"},{value:"gender",label:"性别"},{value:"mid_type",label:"内容形式"},{value:"user_c_level",label:"C类型"},{value:"user_v_level",label:"V类型"},{value:"source",label:"领域"},{value:"wm",label:"渠道"},{value:"ispageup",label:"刷新方向"},{value:"luicode",label:"入口"},{value:"refresh",label:"刷新方式"}],pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},itemMap:null,chartItem:null,chartEntire:null}},computed:u()({},Object(m.b)(["email","pageAuth","analyDropList","analyData"])),methods:{init:function(){var e=T(Date.now()-2592e6,"{y}{m}{d}"),t=T(Date.now()-864e5,"{y}{m}{d}");this.formInline.date=[e,t],this.formInline.type=this.$route.query.type||"thd_click",this.formInline.items=this.$route.query.items||"recommend_source",this.itemMap=new ee.a([["recommend_source","来源"],["agent_version","客户端版本"],["system","操作系统"],["network_type","网络环境"],["hotwb_frequency_type","分登录频次-热门"],["all_frequency_type","分登录频次-全站"],["age","年龄"],["gender","性别"],["mid_type","内容形式"],["user_c_level","C类型"],["user_v_level","V类型"],["source","领域"],["wm","渠道"],["ispageup","刷新方向"],["luicode","入口"],["refresh","刷新方式"]]),1===this.pageAuth?this.getDropList():console.log("用户未登录")},onSearch:function(){var e=this.formInline.charts.join(",");if(e){var t={url:"http://172.16.105.67:8091/newtest1011/getKpiLine.html",param:{dt_start:this.formInline.date[0],dt_end:this.formInline.date[1],type:this.formInline.type,items:this.formInline.items,items_name:e}},a={data:s()(t),cip:230};this.$store.dispatch("GetAnalyData",a)}else Object(K.Message)({showClose:!0,message:"请选择数据分析列表项！",type:"error",duration:1e3})},getDropList:function(){var e={url:"http://172.16.105.67:8091/newtest1011/getKpiWeiduName.html",param:{dt_start:this.formInline.date[0],dt_end:this.formInline.date[1],items:this.formInline.items}},t={data:s()(e),cip:230};this.$store.dispatch("GetAnalyDrop",t)},setAnalyData:function(e,t){for(var a=e.series,n=[],i=0;i<a.length;i++)n.push({name:a[i].name,type:"line",data:a[i].data,smooth:!0});return{title:t,width:"100%",height:"400px",legendName:e.legendName,xAxis:[{type:"category",data:e.xAxis.data,name:e.xAxis.name,axisLabel:{rotate:0},axisLine:{symbol:["none","arrow"]},splitLine:{show:!0},axisTick:{show:!1}}],yAxis:[{type:"value",name:e.yAxis.name,axisLine:{symbol:["none","arrow"]},axisTick:{show:!1}}],series:n}}},created:function(){this.init()},watch:{email:function(){},pageAuth:function(){this.init()},analyDropList:function(){this.formInline.charts=[],this.analyDropList[0]&&this.formInline.charts.push(this.analyDropList[0].value)},analyData:function(){this.analyData&&(this.chartItem=this.setAnalyData(this.analyData.item,this.itemMap.get(this.formInline.items)+"分析"),this.chartEntire=this.setAnalyData(this.analyData.entire,"整体分析"))}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-printer",staticStyle:{"margin-right":"6px"}}),e._v("热门流数据分析")])]),e._v(" "),a("el-row",[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},on:{change:function(t){e.getDropList()}},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维度选择"}},[a("el-select",{attrs:{placeholder:"请选择查询维度"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[a("el-option",{attrs:{label:"千次点击",value:"thd_click"}}),e._v(" "),a("el-option",{attrs:{label:"千次互动",value:"thd_act"}}),e._v(" "),a("el-option",{attrs:{label:"人均刷新",value:"average_fresh_times"}}),e._v(" "),a("el-option",{attrs:{label:"PV",value:"pv"}}),e._v(" "),a("el-option",{attrs:{label:"UV",value:"uv"}}),e._v(" "),a("el-option",{attrs:{label:"曝光量",value:"exposure"}}),e._v(" "),a("el-option",{attrs:{label:"次日留存率(仅热门)",value:"two_save_rate"}}),e._v(" "),a("el-option",{attrs:{label:"次日留存率(包含首页)",value:"two_feed_save_rate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分析项"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.getDropList()}},model:{value:e.formInline.items,callback:function(t){e.$set(e.formInline,"items",t)},expression:"formInline.items"}},e._l(e.itemsList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择，支持搜索"},model:{value:e.formInline.charts,callback:function(t){e.$set(e.formInline,"charts",t)},expression:"formInline.charts"}},e._l(e.analyDropList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"chartWrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:12}},[a("item-chart",{attrs:{data:e.chartEntire}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("item-chart",{attrs:{data:e.chartItem}})],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var he=a("VU/8")(de,pe,!1,function(e){a("4Uji")},"data-v-20eb3fa4",null).exports,fe={name:"datamonitor",components:{ItemChart:me},data:function(){return{formInline:{type:"",date:[]},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},typeMap:null,chartEntire:null}},computed:u()({},Object(m.b)(["pageAuth","analyData"])),methods:{init:function(){if(1===this.pageAuth){var e=T(Date.now()-2592e6,"{y}{m}{d}"),t=T(Date.now()-864e5,"{y}{m}{d}");this.formInline.date=[e,t],this.formInline.type=this.$route.query.type||"thd_click",this.typeMap=new ee.a([["thd_click","千次点击"],["thd_act","千次互动"],["average_fresh_times","人均刷新"],["pv","PV"],["uv","UV"],["exposure","曝光量"],["two_save_rate","次日留存(热门)"],["two_feed_save_rate","次日留存(首页)"]])}},onSearch:function(){var e={url:"http://172.16.105.67:8091/newtest1011/getKpiLine.html",param:{dt_start:this.formInline.date[0],dt_end:this.formInline.date[1],type:this.formInline.type}},t={data:s()(e),cip:230};this.$store.dispatch("GetAnalyData",t)},setAnalyData:function(e,t){for(var a=e.series,n=[],i=0;i<a.length;i++)n.push({name:a[i].name,type:"line",data:a[i].data,smooth:!0});return{title:t,width:"100%",height:"400px",legendName:e.legendName,xAxis:[{type:"category",data:e.xAxis.data,name:e.xAxis.name,axisLabel:{rotate:0},axisLine:{symbol:["none","arrow"]},splitLine:{show:!0},axisTick:{show:!1}}],yAxis:[{type:"value",name:e.yAxis.name,axisLine:{symbol:["none","arrow"]},axisTick:{show:!1}}],series:n}}},created:function(){this.init()},watch:{pageAuth:function(){this.init()},analyData:function(){this.analyData&&(this.chartEntire=this.setAnalyData(this.analyData.entire,this.typeMap.get(this.formInline.type)+"-趋势分析"))}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-printer",staticStyle:{"margin-right":"6px"}}),e._v("热门流-KPI指标趋势")])]),e._v(" "),a("el-row",[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"时间选择"}},[a("el-date-picker",{attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"指标选择"}},[a("el-select",{attrs:{placeholder:"请选择查询维度"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[a("el-option",{attrs:{label:"千次点击",value:"thd_click"}}),e._v(" "),a("el-option",{attrs:{label:"千次互动",value:"thd_act"}}),e._v(" "),a("el-option",{attrs:{label:"人均刷新",value:"average_fresh_times"}}),e._v(" "),a("el-option",{attrs:{label:"PV",value:"pv"}}),e._v(" "),a("el-option",{attrs:{label:"UV",value:"uv"}}),e._v(" "),a("el-option",{attrs:{label:"曝光量",value:"exposure"}}),e._v(" "),a("el-option",{attrs:{label:"次日留存率(仅热门)",value:"two_save_rate"}}),e._v(" "),a("el-option",{attrs:{label:"次日留存率(包含首页)",value:"two_feed_save_rate"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e.chartEntire?a("el-row",{staticClass:"chartWrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:24}},[a("item-chart",{attrs:{data:e.chartEntire}})],1)],1):e._e()],1)},staticRenderFns:[]};var ve=a("VU/8")(fe,_e,!1,function(e){a("Skx4")},"data-v-34e41860",null).exports,ge={name:"materialPage",components:{ItemChart:me},data:function(){return{formInline:{database:"offline",type:"entire",date:[],items:[]},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},chartData:null,itemsList:null}},computed:u()({},Object(m.b)(["pageAuth"])),methods:{init:function(){var e=T(Date.now()-2592e6,"{y}{m}{d}"),t=T(Date.now()-864e5,"{y}{m}{d}");this.formInline.date=[e,t],this.getSourceList()},onSearch:function(){var e=this,t={database:this.formInline.database,type:this.formInline.type,dt_start:this.formInline.date[0],dt_end:this.formInline.date[1],status:"total_num"};if("source"==this.formInline.type){var a=this.formInline.items.join(",");if(!a)return void Object(K.Message)({showClose:!0,message:"请选择查询领域！",type:"error",duration:1e3});t.items=a}var n={url:"http://172.16.105.67:8091/newtest1011/getMaterialLineData.html",param:t},i={data:s()(n),cip:230};this.$store.dispatch("GetBaseAnaly",i).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),t.code&&200==Number(t.code)&&(e.chartData=e.setAnalyData(t.data,"趋势分析"))})},getSourceList:function(){var e=this,t={data:s()({url:"http://172.16.105.67:8091/newtest1011/getMaterialWeiduName.html",param:{type:"material"}}),cip:230};this.$store.dispatch("GetSourceList",t).then(function(t){t.code&&200==Number(t.code)&&(e.itemsList=t.data)})},setAnalyData:function(e,t){for(var a=e.series,n=[],i=0;i<a.length;i++)n.push({name:a[i].name,type:"line",data:a[i].data,smooth:!0});return{title:t,width:"100%",height:"400px",legendName:e.legendName,xAxis:[{type:"category",data:e.xAxis.data,name:e.xAxis.name,axisLabel:{rotate:0},axisLine:{symbol:["none","arrow"]},splitLine:{show:!0},axisTick:{show:!1}}],yAxis:[{type:"value",name:e.yAxis.name,axisLine:{symbol:["none","arrow"]},axisTick:{show:!1}}],series:n}}},created:function(){this.init()},watch:{pageAuth:function(){this.init()}}},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-printer",staticStyle:{"margin-right":"6px"}}),e._v("物料日增规模")])]),e._v(" "),a("el-row",[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"数据库"}},[a("el-select",{attrs:{placeholder:"请选择数据库"},model:{value:e.formInline.database,callback:function(t){e.$set(e.formInline,"database",t)},expression:"formInline.database"}},[a("el-option",{attrs:{label:"原始数据",value:"offline"}}),e._v(" "),a("el-option",{attrs:{label:"入库数据",value:"online"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"维度"}},[a("el-select",{attrs:{placeholder:"请选择查询维度"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[a("el-option",{attrs:{label:"整体数据",value:"entire"}}),e._v(" "),a("el-option",{attrs:{label:"分领域",value:"source"}})],1)],1),e._v(" "),"source"==e.formInline.type?a("el-form-item",{attrs:{label:"领域"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择领域，支持搜索",multiple:""},model:{value:e.formInline.items,callback:function(t){e.$set(e.formInline,"items",t)},expression:"formInline.items"}},e._l(e.itemsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e.chartData?a("el-row",{staticClass:"chartWrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:24}},[a("item-chart",{attrs:{data:e.chartData}})],1)],1):e._e()],1)},staticRenderFns:[]};var ye=a("VU/8")(ge,be,!1,function(e){a("Yiw3")},"data-v-2abf9db3",null).exports,we={name:"ratePage",components:{ItemChart:me},data:function(){return{formInline:{database:"offline",status:"second_tag_rate_material",date:[],items:["1042015:tagCategory_050"]},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},chartData:null,itemsList:null,statusList:[{label:"内容标签2级覆盖率(按物料统计)",value:"second_tag_rate_material"},{label:"内容标签3级覆盖率(按物料统计)",value:"third_tag_rate_material"},{label:"内容标签2级覆盖率(按曝光统计)",value:"second_tag_rate_expose"},{label:"内容标签3级覆盖率(按曝光统计)",value:"third_tag_rate_expose"},{label:"用户2级兴趣匹配度(按曝光统计)",value:"second_user_rate_expose"},{label:"用户3级兴趣匹配度(按曝光统计)",value:"third_user_rate_expose"}]}},computed:u()({},Object(m.b)(["pageAuth"])),methods:{init:function(){var e=T(Date.now()-2592e6,"{y}{m}{d}"),t=T(Date.now()-864e5,"{y}{m}{d}");this.formInline.date=[e,t],this.getSourceList()},onSearch:function(){var e=this,t=this.formInline.items.join(",");if(t){var a={url:"http://172.16.105.67:8091/newtest1011/getMaterialLineData.html",param:{database:this.formInline.database,type:"source",items:t,status:this.formInline.status,dt_start:this.formInline.date[0],dt_end:this.formInline.date[1]}},n={data:s()(a),cip:230};this.$store.dispatch("GetBaseAnaly",n).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),t.code&&200==Number(t.code)&&(e.chartData=e.setAnalyData(t.data,"趋势分析"))})}else Object(K.Message)({showClose:!0,message:"请选择查询领域！",type:"error",duration:1e3})},getSourceList:function(){var e=this,t={data:s()({url:"http://172.16.105.67:8091/newtest1011/getMaterialWeiduName.html",param:{type:"rate"}}),cip:230};this.$store.dispatch("GetSourceList",t).then(function(t){t.code&&200==Number(t.code)&&(e.itemsList=t.data)})},setAnalyData:function(e,t){for(var a=e.series,n=[],i=0;i<a.length;i++)n.push({name:a[i].name,type:"line",data:a[i].data,smooth:!0});return{title:t,width:"100%",height:"400px",legendName:e.legendName,xAxis:[{type:"category",data:e.xAxis.data,name:e.xAxis.name,axisLabel:{rotate:0},axisLine:{symbol:["none","arrow"]},splitLine:{show:!0},axisTick:{show:!1}}],yAxis:[{type:"value",name:e.yAxis.name,axisLine:{symbol:["none","arrow"]},axisTick:{show:!1}}],series:n}}},created:function(){this.init()},watch:{pageAuth:function(){this.init()}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-printer",staticStyle:{"margin-right":"6px"}}),e._v("兴趣标签覆盖率")])]),e._v(" "),a("el-row",[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"数据库"}},[a("el-select",{attrs:{placeholder:"请选择数据库"},model:{value:e.formInline.database,callback:function(t){e.$set(e.formInline,"database",t)},expression:"formInline.database"}},[a("el-option",{attrs:{label:"原始数据",value:"offline"}}),e._v(" "),a("el-option",{attrs:{label:"入库数据",value:"online"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"维度"}},[a("el-select",{staticStyle:{"min-width":"250px"},attrs:{placeholder:"请选择查询维度"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},e._l(e.statusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"领域"}},[a("el-select",{attrs:{placeholder:"请选择领域，支持搜索",filterable:"",multiple:""},model:{value:e.formInline.items,callback:function(t){e.$set(e.formInline,"items",t)},expression:"formInline.items"}},e._l(e.itemsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e.chartData?a("el-row",{staticClass:"chartWrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:24}},[a("item-chart",{attrs:{data:e.chartData}})],1)],1):e._e()],1)},staticRenderFns:[]};var ke={name:"datamonitor",components:{ItemHeader:v,Auth:x,AnalyPage:ve,MaterialPage:ye,RatePage:a("VU/8")(we,xe,!1,function(e){a("cV7a")},"data-v-264c011c",null).exports},data:function(){return{tabPosition:"left",formInline:{date:[]},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},isFirstArr:[!1,!0,!0,!0]}},computed:u()({},Object(m.b)(["email","pageAuth","entireMonitor"])),methods:{init:function(){if(1===this.pageAuth){var e=T(Date.now()-6912e5,"{y}{m}{d}"),t=T(Date.now()-1728e5,"{y}{m}{d}");this.formInline.date=[e,t],this.onSearch()}},onSearch:function(){var e={url:"http://172.16.105.67:8091/newtest1011/getEntireDayTableData.html",param:{dt_start:this.formInline.date[0],dt_end:this.formInline.date[1]}},t={data:s()(e),cip:230};this.$store.dispatch("GetEntireMonitor",t)},_formatNum:function(e){return L(e)},_parseTime:function(e){return e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)},handleClick:function(e,t){"0"!==e.index&&this.isFirstArr[e.index]&&(this.isFirstArr[e.index]=!1,e.$children[0].onSearch())}},created:function(){window.isPhone&&(this.tabPosition="top"),this.init()},watch:{email:function(){},pageAuth:function(){this.init()}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-tabs",{attrs:{"tab-position":e.tabPosition},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{label:"整体数据"}},[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-bell",staticStyle:{"margin-right":"6px"}}),e._v("热门流-整体数据监控")])]),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",[a("el-date-picker",{attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},on:{change:function(t){e.getDropList()}},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e.entireMonitor?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.entireMonitor,border:"",stripe:""}},[a("el-table-column",{attrs:{align:"center",width:"100",prop:"dt",label:"日期",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._parseTime(t.row.dt)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"70",prop:"day",label:"星期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thd_click",sortable:"",label:"千次点击"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.thd_click)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thd_act",sortable:"",label:"千次互动"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.thd_act)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"average_fresh_times",sortable:"",label:"人均刷新"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.average_fresh_times)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pv",sortable:"",label:"PV"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.pv)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"uv",sortable:"",label:"UV"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.uv)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"exposure",sortable:"",label:"曝光量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.exposure)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90",prop:"two_save_rate",sortable:"",label:"次日留存(热门)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.two_save_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90",prop:"two_feed_save_rate",sortable:"",label:"次日留存(首页)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.two_feed_save_rate)))])]}}])})],1)],1):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"KPI指标趋势"}},[a("analy-page")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"物料日增规模"}},[a("material-page")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"兴趣标签覆盖率"}},[a("rate-page")],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var Ie=a("VU/8")(ke,Ce,!1,function(e){a("mozD")},"data-v-2b08bbdd",null).exports,Se={name:"monitorItem",props:["data","name","type","item"],methods:{_formatNum:function(e){return L(e)},_parsePercent:function(e){return e?D(e):"0%"},checkRate:function(e,t){return e<-.15?"danger":e>.15?"success":"info"}},watch:{data:function(){}}},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data?a("el-row",{staticClass:"table-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("div",{staticClass:"table-title left"},[e._v("【"+e._s(e.type.label)+"】"+e._s(e.name))]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,"max-height":"400",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",label:e.name},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link-btn",attrs:{target:"_blank",href:"/hot/#/hotcenter/analydata?items="+e.item+"&type="+e.type.value}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"110",prop:"day_num",sortable:"",label:"当日数据"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.day_num)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"280",prop:"day_rate",sortable:"",label:"天环比 (当日数据-前天数据)/前天数据"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.yesterday_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.checkRate(t.row.day_rate)}},[e._v(e._s(e._parsePercent(t.row.day_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"280",prop:"week_rate",sortable:"",label:"周环比 (本周均值-上周均值)/上周均值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.week_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.checkRate(t.row.week_rate)}},[e._v(e._s(e._parsePercent(t.row.week_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"280",prop:"month_rate",sortable:"",label:"月环比 (本月均值-上月均值)/上月均值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.month_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.checkRate(t.row.month_rate)}},[e._v(e._s(e._parsePercent(t.row.month_rate)))])]}}])})],1)],1)],1):e._e()},staticRenderFns:[]};var Le={name:"datamonitor",components:{ItemHeader:v,Auth:x,MonitorItem:a("VU/8")(Se,Te,!1,function(e){a("WxJg")},"data-v-1fc279d1",null).exports},data:function(){return{tabPosition:"left",dataMonitor:null,entireData:null,itemMap:null,typeMap:null,curType:"thd_click",curTime:"",entireDate:"",formInline:{type:"thd_click",items:["recommend_source","agent_version","system","network_type","hotwb_frequency_type","all_frequency_type","age","gender","mid_type","user_c_level","user_v_level","source","wm","ispageup","luicode","refresh"],date:""},itemsList:[{value:"recommend_source",label:"来源"},{value:"agent_version",label:"客户端版本"},{value:"system",label:"操作系统"},{value:"network_type",label:"网络环境"},{value:"hotwb_frequency_type",label:"分登录频次-热门"},{value:"all_frequency_type",label:"分登录频次-全站"},{value:"age",label:"年龄"},{value:"gender",label:"性别"},{value:"mid_type",label:"内容形式"},{value:"user_c_level",label:"C类型"},{value:"user_v_level",label:"V类型"},{value:"source",label:"领域"},{value:"wm",label:"渠道"},{value:"ispageup",label:"刷新方向"},{value:"luicode",label:"入口"},{value:"refresh",label:"刷新方式"}],typeList:[{label:"千次点击",value:"thd_click"},{label:"千次互动",value:"thd_act"},{label:"人均刷新",value:"average_fresh_times"},{label:"PV",value:"pv"},{label:"UV",value:"uv"},{label:"曝光量",value:"exposure"},{label:"次日留存(热门)",value:"two_save_rate"},{label:"次日留存(首页)",value:"two_feed_save_rate"}],pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},computed:u()({},Object(m.b)(["pageAuth"])),methods:{init:function(){1===this.pageAuth&&(this.formInline.date=T(Date.now()-1728e5,"{y}{m}{d}"),this.entireDate=this.formInline.date,this.curTime=this.formInline.date,this.curEntireTime=this.formInline.date,this.itemMap=new ee.a([["recommend_source","来源"],["agent_version","客户端版本"],["system","操作系统"],["network_type","网络环境"],["hotwb_frequency_type","分登录频次-热门"],["all_frequency_type","分登录频次-全站"],["age","年龄"],["gender","性别"],["mid_type","内容形式"],["user_c_level","C类型"],["user_v_level","V类型"],["source","领域"],["wm","渠道"],["ispageup","刷新方向"],["luicode","入口"],["refresh","刷新方式"]]),this.typeMap=new ee.a([["thd_click",0],["thd_act",1],["average_fresh_times",2],["pv",3],["uv",4],["exposure",5],["two_save_rate",6],["two_feed_save_rate",7]]),this.searchEntire(),this.onSearch())},searchEntire:function(){var e=this,t=this,a={url:"http://172.16.105.67:8091/newtest1011/getKpiMonitorData.html",param:{dt:this.entireDate}},n={data:s()(a),cip:230};this.$store.dispatch("GetDataMonitor",n).then(function(a){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),a.code&&200==Number(a.code)&&(t.entireData=a.data&&a.data.entire||[]),e.curEntireTime=e.entireDate})},onSearch:function(){var e=this,t=this.formInline.items.join(",");if(t){var a={url:"http://172.16.105.67:8091/newtest1011/getKpiMonitorData.html",param:{dt:this.formInline.date,items:t,type:this.formInline.type}},n={data:s()(a),cip:230};this.$store.dispatch("GetDataMonitor",n).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),t.code&&200==Number(t.code)&&(e.dataMonitor=t.data),e.updateData()})}else Object(K.Message)({showClose:!0,message:"请选择监控项！",type:"error",duration:1e3})},updateData:function(){this.curType=this.formInline.type,this.curTime=this.formInline.date},_formatNum:function(e){return L(e)},_parsePercent:function(e){return e?D(e):"0%"},entireRate:function(e,t){return e<-.1?"danger":e>.1?"success":"info"}},created:function(){window.isPhone&&(this.tabPosition="top"),this.init()},watch:{pageAuth:function(){this.init()},dataMonitor:function(){}}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-tabs",{attrs:{"tab-position":e.tabPosition}},[a("el-tab-pane",{attrs:{label:"整体数据"}},[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-bell",staticStyle:{"margin-right":"6px"}}),e._v("热门流-整体数据分析（"+e._s(e.curEntireTime)+"）")])]),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-form",[a("el-form-item",[a("el-date-picker",{attrs:{align:"right",type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyyMMdd",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.entireDate,callback:function(t){e.entireDate=t},expression:"entireDate"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchEntire()}}},[e._v("查询")])],1)],1)],1),e._v(" "),e.entireData?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.entireData,border:"",stripe:""}},[a("el-table-column",{attrs:{align:"center",width:"140",prop:"name",label:"KPI指标",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link-btn",attrs:{target:"_blank",href:"/hot/#/hotcenter/analydata"}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"160",prop:"day_num",sortable:"",label:"当日数据"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.day_num)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"day_rate",sortable:"",label:"天环比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.yesterday_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.entireRate(t.row.day_rate)}},[e._v(e._s(e._parsePercent(t.row.day_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"week_rate",sortable:"",label:"周环比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.week_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.entireRate(t.row.week_rate)}},[e._v(e._s(e._parsePercent(t.row.week_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"month_rate",sortable:"",label:"月环比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"numBox"},[e._v(e._s(e._formatNum(t.row.month_num)))]),e._v(" "),a("el-tag",{attrs:{type:e.entireRate(t.row.month_rate)}},[e._v(e._s(e._parsePercent(t.row.month_rate)))])]}}])})],1)],1):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"KPI指标分析"}},[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-bell",staticStyle:{"margin-right":"6px"}}),e._v("热门流-KPI指标分析（"+e._s(e.curTime)+"）")])]),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-form",{attrs:{model:e.formInline,inline:""}},[a("el-form-item",{attrs:{label:"指标"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"分析项"}},[a("el-select",{staticStyle:{width:"590px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.formInline.items,callback:function(t){e.$set(e.formInline,"items",t)},expression:"formInline.items"}},e._l(e.itemsList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{align:"right",type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyyMMdd",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e._l(e.formInline.items,function(t,n){return e.dataMonitor&&e.dataMonitor[t]?a("monitor-item",{key:n,attrs:{data:e.dataMonitor[t],name:e.itemMap.get(t),type:e.typeList[e.typeMap.get(e.curType)],item:t}}):e._e()})],2)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var Ae=a("VU/8")(Le,De,!1,function(e){a("iXiC")},"data-v-7bc73c8f",null).exports,Me={name:"tagPage",data:function(){return{tabName:"offline",searchTimer:null,dataList:null,formData:{date:"",loading:!1},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},computed:u()({},Object(m.b)(["email","materialMonitor","pageAuth"])),methods:{init:function(){this.formData.date=T(Date.now()-1728e5,"{y}{m}{d}"),1===this.pageAuth&&this.onSearch()},onSearch:function(){this.formData.loading=!0,this.searchTimer||this.setTimer();var e={url:"http://172.16.105.67:8091/newtest1011/getMaterialMonitorData.html",param:{dt:this.formData.date}},t={data:s()(e),cip:230};this.$store.dispatch("GetMonitor",t)},setTimer:function(){var e=this;this.searchTimer=setTimeout(function(){e.formData.loading&&(e.formData.loading=!1),e.searchTimer=null},5e3)},setNum:function(e,t,a){return L(a)||0},_parsePercent:function(e){return D(e)},setData:function(){this.dataList=this.materialMonitor[this.tabName]}},created:function(){this.init()},watch:{materialMonitor:function(){this.formData.loading=!1,this.materialMonitor&&this.setData()},tabName:function(){this.setData()},email:function(){},pageAuth:function(){this.init()}}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"space-between"}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-goods"}),e._v("内容标签统计")])]),e._v(" "),a("el-row",{staticClass:"search-box"},[a("el-date-picker",{attrs:{align:"right",type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyyMMdd",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.formData.loading},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),e.dataList?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-radio-group",{model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-radio",{attrs:{border:"",label:"offline"}},[e._v("原始数据")]),e._v(" "),a("el-radio",{attrs:{border:"",label:"online"}},[e._v("入库数据")])],1),e._v(" "),a("el-table",{staticClass:"pane-table",staticStyle:{width:"100%"},attrs:{data:e.dataList,"default-sort":{prop:"total_num",order:"descending"},border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",align:"left","min-width":"80",prop:"name",label:"所属领域"}}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"90",sortable:"",prop:"total_num",label:"总曝光数（条）",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"second_tag_rate_material",label:"内容标签2级覆盖率（按物料统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.second_tag_rate_material?a("el-tag",[e._v(e._s(e._parsePercent(t.row.second_tag_rate_material)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"third_tag_rate_material",label:"内容标签3级覆盖率（按物料统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.third_tag_rate_material?a("el-tag",[e._v(e._s(e._parsePercent(t.row.third_tag_rate_material)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"second_tag_rate_expose",label:"内容标签2级覆盖率（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.second_tag_rate_expose?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e._parsePercent(t.row.second_tag_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"150",sortable:"",prop:"third_tag_rate_expose",label:"内容标签3级覆盖率（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.third_tag_rate_expose?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e._parsePercent(t.row.third_tag_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"150",sortable:"",prop:"second_user_rate_expose",label:"用户2级兴趣匹配度（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.second_user_rate_expose?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e._parsePercent(t.row.second_user_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left","min-width":"150",sortable:"",prop:"third_user_rate_expose",label:"用户3级兴趣匹配度（按曝光统计）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.third_user_rate_expose?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e._parsePercent(t.row.third_user_rate_expose)))]):a("el-tag",{attrs:{type:"danger"}},[e._v("0%")])]}}])})],1)],1)],1):e._e()],1)},staticRenderFns:[]};var Ne=a("VU/8")(Me,Ee,!1,function(e){a("zuAU")},"data-v-445ea976",null).exports,$e={name:"querymaterial",components:{ItemHeader:v,Auth:x,PanThumb:y},data:function(){return{formInline:{mid:"4244316279389309",loading:!1},searchTimer:null,list:null,tips:null,materialData:null}},computed:u()({},Object(m.b)(["materialInfo","authorInfo","authorType","pageAuth"])),methods:{init:function(){1===this.pageAuth?this.onSearch():console.log("用户未登录")},onSearch:function(){this.formInline.loading=!0,this.searchTimer||this.setTimer();var e={url:"http://10.75.28.123:8077/get_mid_info",param:{mid:this.formInline.mid}},t={data:s()(e),cip:230};this.$store.dispatch("GetMaterial",t),this.getAuthor()},getAuthor:function(){var e={url:"http://mlplat.intra.weibo.com/lab/showbatch",param:{ids:this.formInline.mid}},t={data:s()(e),cip:230},a={url:"http://172.16.105.67:8091/newtest1011/getMidPersona.html",param:{mid:this.formInline.mid}},n={data:s()(a),cip:230};this.$store.dispatch("ShowBatch",t),this.$store.dispatch("AuthorType",n)},setTimer:function(){var e=this;this.searchTimer=setTimeout(function(){e.formInline.loading&&(e.formInline.loading=!1),e.searchTimer=null},5e3)},focusEvent:function(){this.formInline.loading&&(this.formInline.loading=!1)},setSex:function(e){var t="其他";switch(e){case"male":t="男性";break;case"female":t="女性";break;case"other":t="其他";break;case"all":t="全部";break;default:t="其他"}return t},setAge:function(e){return"other"==e?"其他":"all"==e?"全部":e+"后"},setNum:function(e,t,a){return L(a)},setTagName:function(e,t,a){return a.trim()||"未知"},getSummaries:function(e){e.columns,e.data;var t=[];if(this.materialData){var a=this.materialData.expose_num?D(this.materialData.act_num/this.materialData.expose_num):"0%",n=this.materialData.expose_num?D(this.materialData.inter_act_num/this.materialData.expose_num):"0%";t=["合计","所有年龄","所有性别",L(this.materialData.expose_num),L(this.materialData.act_num),a,L(this.materialData.inter_act_num),n]}return t},_formatNum:function(e){return L(e)},_parsePercent:function(e){return D(e)},analyData:function(){var e=this.materialData.age_gender_expose_rate;this.list=[];for(var t={age70:{age:"70",sex:"all",expose_num:0,click_num:0,act_num:0},age80:{age:"80",sex:"all",expose_num:0,click_num:0,act_num:0},age90:{age:"90",sex:"all",expose_num:0,click_num:0,act_num:0},age00:{age:"00",sex:"all",expose_num:0,click_num:0,act_num:0},ageother:{age:"other",sex:"all",expose_num:0,click_num:0,act_num:0}},a={sexmale:{age:"all",sex:"male",expose_num:0,click_num:0,act_num:0},sexfemale:{age:"all",sex:"female",expose_num:0,click_num:0,act_num:0},sexother:{age:"all",sex:"other",expose_num:0,click_num:0,act_num:0}},n=0;n<e.length;n++){var i=e[n];"other"!=i.age&&"other"==i.sex||this.addList(i),t["age"+i.age].expose_num+=i.expose_num,t["age"+i.age].click_num+=i.click_num,t["age"+i.age].act_num+=i.act_num,a["sex"+i.sex].expose_num+=i.expose_num,a["sex"+i.sex].click_num+=i.click_num,a["sex"+i.sex].act_num+=i.act_num}this.addList(t.age70),this.addList(t.age80),this.addList(t.age90),this.addList(t.age00),this.addList(t.ageother),this.addList(a.sexmale),this.addList(a.sexfemale),this.addList(a.sexother)},addList:function(e){var t=0,a=0;e.expose_num&&(t=e.click_num/e.expose_num,a=e.act_num/e.expose_num),e.click_rate=t,e.act_rate=a,this.list.push(e)},filterHandler:function(e,t,a){return t[a.property]===e}},created:function(){this.init()},watch:{materialInfo:function(){this.materialInfo&&(this.formInline.loading=!1,this.tips=this.materialInfo.msg,this.materialInfo.data&&this.materialInfo.data.age_gender_expose_rate&&(this.materialData=this.materialInfo.data,this.analyData()))},pageAuth:function(){this.init()},authorInfo:function(){},authorType:function(){}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",align:"middle",justify:"left"}},[a("el-col",{staticClass:"main-title hidden-xs-only",attrs:{sm:8,md:6,lg:4,xl:2}},[a("i",{staticClass:"el-icon-goods"}),e._v("热门微博物料查询\n        ")]),e._v(" "),a("el-col",{attrs:{sm:16,md:12,lg:8,xl:4}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入mid查询物料",clearable:""},on:{focus:function(t){e.focusEvent()}},model:{value:e.formInline.mid,callback:function(t){e.$set(e.formInline,"mid",t)},expression:"formInline.mid"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.formInline.loading},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),e.tips?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticClass:"error-msg",attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-alert",{attrs:{title:e.tips,type:"warning","show-icon":"",closable:!1}})],1)],1):e._e(),e._v(" "),e.authorInfo&&e.authorInfo.user?a("el-row",{staticClass:"thumb-box",attrs:{type:"flex",align:"middle",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23,title:"进入<"+e.authorInfo.user.name+">的主页"}},[a("el-row",{staticClass:"thumb-wrap",attrs:{type:"flex",align:"middle"}},[a("a",{staticStyle:{display:"inline-block","font-size":"12px",color:"#606266"},attrs:{href:"//weibo.com/"+e.authorInfo.user.profile_url,target:"_blank"}},[a("pan-thumb",{staticClass:"thumb-content",attrs:{image:e.authorInfo.user.avatar_hd,width:"60px",height:"60px"}},[e._v(e._s(e.authorInfo.user.name))])],1),e._v(" "),a("a",{staticClass:"author-name",attrs:{title:e.authorInfo.user.name,href:"//weibo.com/"+e.authorInfo.user.profile_url,target:"_blank"}},[e._v(e._s(e.authorInfo.user.name))])])],1)],1):e._e(),e._v(" "),e.authorInfo&&e.authorInfo.user?a("el-row",{staticClass:"thumb-box",staticStyle:{"margin-left":"2%"}},[a("el-col",{attrs:{xs:24,sm:5,md:5,lg:5,xl:5}},[a("span",{staticClass:"info-label",staticStyle:{color:"#e65d6e"}},[e._v("【关注数】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e._formatNum(e.authorInfo.user.friends_count)))])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:5,md:5,lg:5,xl:5}},[a("span",{staticClass:"info-label",staticStyle:{color:"#30b08f"}},[e._v("【粉丝数】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e._formatNum(e.authorInfo.user.followers_count)))])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:5,md:5,lg:5,xl:5}},[a("span",{staticClass:"info-label",staticStyle:{color:"#4ab7bd"}},[e._v("【发博量】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e._formatNum(e.authorInfo.user.statuses_count)))])]),e._v(" "),e.authorType?a("el-col",{attrs:{xs:24,sm:4,md:4,lg:4,xl:4}},[a("span",{staticClass:"info-label",staticStyle:{color:"#fec171"}},[e._v("【V类型】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e.authorType.vtype))])]):e._e(),e._v(" "),e.authorType?a("el-col",{attrs:{xs:24,sm:4,md:4,lg:4,xl:4}},[a("span",{staticClass:"info-label",staticStyle:{color:"#3a71a8"}},[e._v("【Clevel】")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e.authorType.clevel))])]):e._e()],1):e._e(),e._v(" "),e.authorInfo?a("el-row",{staticClass:"content-box",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-row",[a("a",{staticClass:"info-link",attrs:{target:"_blank",href:e.authorInfo.link}},[e._v("查看微博")])]),e._v(" "),a("el-popover",{ref:"content",attrs:{placement:"top",trigger:"hover",content:e.authorInfo.text,"popper-class":"content-pop","visible-arrow":!1}}),e._v(" "),a("el-row",{directives:[{name:"popover",rawName:"v-popover:content",arg:"content"}],staticClass:"content-text"},[e._v(e._s(e.authorInfo.text))])],1)],1):e._e(),e._v(" "),e.list?a("el-row",{staticClass:"table-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("div",{staticClass:"table-title left"},[e._v("物料详情")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"max-height":"400",stripe:"","summary-method":e.getSummaries,"show-summary":"","sum-text":"总计"}},[a("el-table-column",{attrs:{width:"50",type:"index",align:"center",fixed:"",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",fixed:"",prop:"age",label:"年龄",filters:[{text:"70后",value:"70"},{text:"80后",value:"80"},{text:"90后",value:"90"},{text:"00后",value:"00"},{text:"其他",value:"other"},{text:"全部",value:"all"}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"all"===t.row.age?"danger":"success"}},[e._v(e._s(e.setAge(t.row.age)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",fixed:"",prop:"sex",label:"性别",filters:[{text:"男性",value:"male"},{text:"女性",value:"female"},{text:"其他",value:"other"},{text:"全部",value:"all"}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"all"===t.row.sex?"danger":"warning"}},[e._v(e._s(e.setSex(t.row.sex)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"expose_num",label:"曝光量",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"click_num",label:"点击量",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"click_rate",label:"点击率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:0===Number(t.row.click_num)?"danger":"primary"}},[e._v(e._s(e._parsePercent(t.row.click_rate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"act_num",label:"互动量",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center","min-width":"90",prop:"act_rate",label:"互动率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:0===Number(t.row.act_num)?"danger":"primary"}},[e._v(e._s(e._parsePercent(t.row.act_rate)))])]}}])})],1)],1)],1):e._e(),e._v(" "),e.materialData&&e.materialData.content_tag?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("div",{staticClass:"table-title left"},[e._v("标签权重")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialData.content_tag,"max-height":"400",border:"",stripe:""}},[a("el-table-column",{attrs:{align:"left",prop:"tagid",label:"标签ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",label:"标签名",formatter:e.setTagName,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"left",prop:"rel_weight",label:"权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e._parsePercent(t.row.rel_weight)))])]}}])})],1)],1)],1):e._e()],1)},staticRenderFns:[]};var Fe={name:"operatematerial",components:{ItemHeader:v,Auth:x,TagPage:Ne,QueryPage:a("VU/8")($e,Pe,!1,function(e){a("u1kt"),a("d/H7")},"data-v-2aaa40fa",null).exports},data:function(){return{tabPosition:"left",type:"hot",curType:"hot",activeName:"1"}},computed:u()({},Object(m.b)(["materialStatus","pageAuth","email"])),methods:{init:function(){1===this.pageAuth&&(this.activeName=this.$route.query.type||"1",this.onSearch())},onSearch:function(){var e=this,t=null;"hot"==this.type&&(t={url:"http://172.16.139.44:10999/get_materials_status"});var a={data:s()(t),cip:230};this.$store.dispatch("GetStatus",a).then(function(){e.curType=e.type})},setNum:function(e,t,a){return L(a)}},created:function(){window.isPhone&&(this.tabPosition="top"),this.init()},watch:{materialStatus:function(){},pageAuth:function(){this.init()},email:function(){}}},je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-tabs",{attrs:{"tab-position":e.tabPosition},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"物料库规模",name:"1"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"space-between"}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-goods"}),e._v("物料库规模")]),e._v(" "),a("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 刷新")])],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:23,md:23,lg:23,xl:23}},[a("el-table",{staticClass:"pane-table",staticStyle:{width:"100%"},attrs:{data:e.materialStatus&&e.materialStatus.material,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",align:"left",prop:"name",label:"所属领域"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",sortable:"",prop:"mysql_num",label:"原始数据（条）",formatter:e.setNum}}),e._v(" "),a("el-table-column",{attrs:{align:"left",sortable:"",prop:"online_num",label:"入库数据（条）",formatter:e.setNum}}),e._v(" "),"hot"==e.curType?a("el-table-column",{attrs:{align:"left",sortable:"",prop:"expo_num",label:"领域曝光（条）",formatter:e.setNum}}):e._e()],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"内容标签统计",name:"2"}},[a("tag-page")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"单条物料分析",name:"3"}},[a("query-page")],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var Ue=a("VU/8")(Fe,je,!1,function(e){a("iv7A")},"data-v-16a4f74d",null).exports,Oe={name:"minePage",data:function(){return{cname:"",formInline:{ckey:""}}},computed:u()({},Object(m.b)(["email","channelList","channelData","channelApi"])),methods:{onSearch:function(){var e=this.formInline.ckey.split(":"),t={url:"/channel/getDetailByCid",params:{cid:e[1],channel_history:e[0],username:this.email,cip:230}};this.$store.dispatch("GetChannelData",t)},_parseTime:function(e,t){return T(e,t)}},watch:{channelList:function(){this.channelList&&this.channelList[0]&&this.channelList[0].cid&&(this.formInline.ckey=this.channelList[0].channel_history+":"+this.channelList[0].cid,this.onSearch())},channelData:function(){this.channelData&&(this.cname=this.channelData[0].channel_name)}}},Be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-service",staticStyle:{"margin-right":"6px"}}),e._v("我的频道 "+e._s(e.cname))])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[e.channelList&&e.channelList.length>0?a("el-col",{attrs:{span:23}},[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"选择频道"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道"},on:{change:e.onSearch},model:{value:e.formInline.ckey,callback:function(t){e.$set(e.formInline,"ckey",t)},expression:"formInline.ckey"}},e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1)],1),e._v(" "),e.channelData&&e.channelData[0]?a("div",[a("div",{staticClass:"item-box"},[a("label",[e._v("【频道名称】")]),e._v(" "),a("el-tag",[e._v(e._s(e.channelData[0].channel_name))])],1),e._v(" "),a("div",{staticClass:"item-box"},[a("label",[e._v("【频道属性】")]),e._v(" "),a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(1===e.channelData[0].channel_history?"历史频道":"自定义频道"))])],1),e._v(" "),e.channelData[0].channel_type?a("div",{staticClass:"item-box"},[a("label",[e._v("【频道类型】")]),e._v(" "),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.channelData[0].channel_type))])],1):e._e(),e._v(" "),e.channelData[0].stat_time?a("div",{staticClass:"item-box"},[a("label",[e._v("【运营时间】")]),e._v(" "),a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e._parseTime(e.channelData[0].stat_time,"{y}-{m}-{d}"))+" 到 "+e._s(e._parseTime(e.channelData[0].end_time,"{y}-{m}-{d}")))])],1):e._e(),e._v(" "),e.channelData[0].source?a("div",{staticClass:"item-box"},[a("label",[e._v("【内容来源】")]),e._v(" "),a("el-tag",[e._v(e._s(e.channelData[0].source))])],1):e._e(),e._v(" "),e.channelData[0].tag_id?a("div",{staticClass:"item-box"},[a("label",[e._v("【分类选择】")]),e._v(" "),a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.channelData[0].tag_id))])],1):e._e(),e._v(" "),e.channelData[0].order?a("div",{staticClass:"item-box"},[a("label",[e._v("【排序方式】")]),e._v(" "),a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.channelData[0].order))])],1):e._e(),e._v(" "),e.channelData[0].channel_id?a("div",{staticClass:"item-box"},[a("label",[e._v("【频道 ID】")]),e._v(" "),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.channelData[0].channel_id))])],1):e._e()]):e._e()],1):null==e.channelApi?a("el-col",{attrs:{span:23}},[e._v("\n      loading……\n    ")]):"response failed"==e.channelApi?a("el-col",{attrs:{span:23}},[a("el-alert",{attrs:{title:"网络请求异常，请重试~",type:"warning","show-icon":"",closable:!1}})],1):1==e.channelApi?a("el-col",{attrs:{span:23}},[a("el-alert",{attrs:{title:"暂无有权限的频道",type:"warning","show-icon":"",closable:!1}})],1):e._e()],1)],1)},staticRenderFns:[]};var ze=a("VU/8")(Oe,Be,!1,function(e){a("49ru")},"data-v-5bb0cce2",null).exports,Ve={name:"addChannel",data:function(){return{cname:"",formInline:{channel_name:"",channel_type:1,date:[],source:0,tag_id:"",order:1,popover:!1},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5<Date.now()}}}},computed:u()({},Object(m.b)(["email","channelType","channelTag"])),methods:{init:function(){var e=Date.now();this.formInline.date=[e,e]},onSubmit:function(){var e=this;if(this.formInline.popover=!1,this.formInline.channel_name){if(0===this.formInline.source)this.formInline.tag_id="";else if(!this.formInline.tag_id)return void Object(K.Message)({showClose:!0,message:"请选择分类！",type:"error",duration:1e3});var t={url:"/channel/addChannel",params:{channel_name:this.formInline.channel_name,channel_type:this.formInline.channel_type,stat_time:this.formInline.date[0],end_time:this.formInline.date[1],source:this.formInline.source,tag_id:this.formInline.tag_id,order:this.formInline.order,username:this.email,cip:230}};this.$store.dispatch("SetChannelData",t).then(function(t){t.code&&200==Number(t.code)?e.$alert("系统正在紧张的创建中，请一个小时后再来查看！","【"+e.formInline.channel_name+"】频道的创建已经申请成功！",{confirmButtonText:"确定",callback:function(e){location.reload()}}):Object(K.Message)({showClose:!0,message:t.msg||"频道创建失败！",type:"error",duration:3e3})})}else Object(K.Message)({showClose:!0,message:"请输入频道名称！",type:"error",duration:1e3})}},created:function(){this.init()},watch:{email:function(){this.init()},channelType:function(){this.channelType&&(this.formInline.channel_type=this.channelType[0].tid)},channelTag:function(){}}},We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-edit-outline",staticStyle:{"margin-right":"6px"}}),e._v("频道创建")])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("el-form",{attrs:{model:e.formInline,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"频道名称",required:""}},[a("el-input",{staticStyle:{"max-width":"350px"},attrs:{placeholder:"请输入频道名称",clearable:"",autofocus:""},model:{value:e.formInline.channel_name,callback:function(t){e.$set(e.formInline,"channel_name",t)},expression:"formInline.channel_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"频道类型",required:""}},[a("el-select",{attrs:{placeholder:"请选择频道类型"},model:{value:e.formInline.channel_type,callback:function(t){e.$set(e.formInline,"channel_type",t)},expression:"formInline.channel_type"}},e._l(e.channelType,function(e,t){return a("el-option",{key:t,attrs:{label:e.type_name,value:e.tid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"运营时间",required:""}},[a("el-date-picker",{attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"timestamp","picker-options":e.pickerOptions,clearable:!1},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容来源",required:""}},[a("el-select",{attrs:{placeholder:"请选择内容来源"},model:{value:e.formInline.source,callback:function(t){e.$set(e.formInline,"source",t)},expression:"formInline.source"}},[a("el-option",{attrs:{label:"白名单",value:0}}),e._v(" "),a("el-option",{attrs:{label:"分类",value:1}}),e._v(" "),a("el-option",{attrs:{label:"白名单+分类",value:2}})],1)],1),e._v(" "),0!==e.formInline.source&&e.channelTag?a("el-form-item",{attrs:{label:"分类选择",required:""}},[a("el-select",{attrs:{placeholder:"请选择分类，支持搜索",filterable:"",clearable:""},model:{value:e.formInline.tag_id,callback:function(t){e.$set(e.formInline,"tag_id",t)},expression:"formInline.tag_id"}},e._l(e.channelTag,function(e,t){return a("el-option",{key:t,attrs:{label:e.tag_name,value:e.tag_id}})})),e._v(" "),a("span",{staticStyle:{color:"#e6a23c"}},[e._v("（只有内容来源选择了分类才可选）")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"排序方式",required:""}},[a("el-select",{attrs:{placeholder:"请选择排序方式"},model:{value:e.formInline.order,callback:function(t){e.$set(e.formInline,"order",t)},expression:"formInline.order"}},[a("el-option",{attrs:{label:"时间序",value:1}}),e._v(" "),a("el-option",{attrs:{label:"模型序",value:2}})],1)],1),e._v(" "),a("el-form-item",[a("el-popover",{ref:"popoverAdd",attrs:{placement:"right",width:"200"},model:{value:e.formInline.popover,callback:function(t){e.$set(e.formInline,"popover",t)},expression:"formInline.popover"}},[a("p",[e._v("确定创建新频道？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.formInline.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.onSubmit()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverAdd",arg:"popoverAdd"}],attrs:{type:"primary"}},[e._v("立即创建")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Re=a("VU/8")(Ve,We,!1,function(e){a("uvbm")},"data-v-4a7a9b9a",null).exports,He={name:"operateWhite",data:function(){return{dialogVisible:!1,delBtnPopover:!1,updatePopover:!1}},computed:u()({},Object(m.b)(["email"])),props:["data","callback"],methods:{_parseTime:function(e,t){return T(e,t)},deleteEvent:function(){var e=this;this.delBtnPopover=!1;var t={url:"/Channel/",params:{channel_id:t.channel_id,channel_history:t.channel_history,username:this.email,cip:230}};this.$store.dispatch("",t).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"删除成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(K.Message)({showClose:!0,message:t.msg||"删除失败!",type:"error",duration:3e3})})},updateEvent:function(){this.updatePopover=!1;var e={url:"/Channel/",params:{channel_id:e.channel_id,channel_name:e.channel_name,channel_history:e.channel_history,username:this.email,cip:230}};this.$store.dispatch("",e).then(function(e){e.code&&200==Number(e.code)?Object(K.Message)({showClose:!0,message:"保存成功！",type:"success",duration:1e3}):Object(K.Message)({showClose:!0,message:e.msg||"保存失败!",type:"error",duration:3e3})})}},watch:{data:function(){}}},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data?a("div",[a("el-dialog",{attrs:{title:"编辑【"+e.data.channel_name+"】频道",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"频道名称","label-width":"120px",required:""}},[a("el-input",{attrs:{placeholder:"请输入频道名称",clearable:""},model:{value:e.data.channel_name,callback:function(t){e.$set(e.data,"channel_name",t)},expression:"data.channel_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"频道id","label-width":"120px",required:""}},[a("el-input",{attrs:{placeholder:"频道id",clearable:""},model:{value:e.data.channel_id,callback:function(t){e.$set(e.data,"channel_id",t)},expression:"data.channel_id"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverUpdate",attrs:{placement:"top",width:"200"},model:{value:e.updatePopover,callback:function(t){e.updatePopover=t},expression:"updatePopover"}},[a("p",[e._v("确定保存当前修改？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.updatePopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.updateEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverUpdate",arg:"popoverUpdate"}],attrs:{type:"primary"}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-popover",{ref:"popDelBtn",attrs:{placement:"top",width:"200"},model:{value:e.delBtnPopover,callback:function(t){e.delBtnPopover=t},expression:"delBtnPopover"}},[a("p",[e._v("确定从频道列表删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.deleteEvent()}}},[e._v("确定")])],1)]),e._v(" "),1===e.data.channel_history?a("el-button",{staticStyle:{"margin-left":"5px","margin-bottom":"5px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini",title:"编辑"},on:{click:function(t){e.dialogVisible=!0}}},[a("span",{staticClass:"hidden-xs-only"})]):e._e(),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popDelBtn",arg:"popDelBtn"}],staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini",title:"删除频道"}},[a("span",{staticClass:"hidden-xs-only"})])],1):e._e()},staticRenderFns:[]};var Ge={name:"channelList",components:{OperateChannel:a("VU/8")(He,qe,!1,function(e){a("HsGM")},"data-v-1a58503a",null).exports},data:function(){return{dialogVisible:!1,formInline:{cname:""},channelData:[]}},computed:u()({},Object(m.b)(["pageAuth","email","allChannel"])),methods:{onSearch:function(){var e=this,t={url:"/channel_auth/getChannelList",params:{channel_name:this.formInline.cname,username:this.email,cip:230}};this.$store.dispatch("GetChannelList",t).then(function(t){t.code&&200==Number(t.code)&&(e.channelData=t.result)})},_parseTime:function(e,t){return T(e,t)}},watch:{allChannel:function(){this.allChannel&&this.allChannel.length>0&&(this.channelData=this.allChannel)}}},Ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-document",staticStyle:{"margin-right":"6px"}}),e._v("频道列表")])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请输入频道名称",clearable:""},model:{value:e.formInline.cname,callback:function(t){e.$set(e.formInline,"cname",t)},expression:"formInline.cname"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[e.channelData?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData,"max-height":"600",border:"",stripe:""}},[a("el-table-column",{attrs:{fixed:"",align:"center",prop:"channel_name",label:"频道名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"channel_id",label:"频道id"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.channel_id||"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"channel_history",label:"频道属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.channel_history?"历史频道":"自定义频道"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"channel_type",label:"频道类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.channel_type||"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"160",align:"center",prop:"",label:"运营时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.stat_time?a("span",[e._v(e._s(e._parseTime(t.row.stat_time,"{y}-{m}-{d}"))+" 到 "+e._s(e._parseTime(t.row.end_time,"{y}-{m}-{d}")))]):a("span",[e._v("--")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"source",label:"内容来源"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.source||"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tag_id",label:"分类选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.tag_id||"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"order",label:"排序方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.order||"--"))]}}])})],1)],1):e._e()],1)],1)],1)},staticRenderFns:[]};var Ye=a("VU/8")(Ge,Ke,!1,function(e){a("QOzx")},"data-v-d6d1c13c",null).exports,Qe={name:"operateWhite",data:function(){return{dialogVisible:!1,delBtnPopover:!1,updatePopover:!1,selectedChannel:[],tempval:[]}},computed:u()({},Object(m.b)(["email","allChannel"])),props:["data","callback","defaultChannel"],methods:{init:function(){var e=this.data.channellist;if(e&&e.length>0){this.selectedChannel=[];for(var t=0;t<e.length;t++)this.selectedChannel.push(e[t].channel_history+":"+e[t].cid);this.tempval=this.selectedChannel}},_parseTime:function(e,t){return T(e,t)},deleteEvent:function(){var e=this;this.delBtnPopover=!1;var t={url:"/channel_auth/delCAuthByUnames",params:{userids:this.data.username,username:this.email,cip:230}};this.$store.dispatch("DeleteUserChannels",t).then(function(t){t.code&&200==Number(t.code)?(e.dialogVisible=!1,e.callback()):Object(K.Message)({showClose:!0,message:t.msg||"删除失败!",type:"error",duration:3e3})})},updateEvent:function(){var e=this;this.updatePopover=!1;var t={url:"/channel_auth/setCAuthByuserid",params:{channellist:this.selectedChannel.join(","),userid:this.data.username,username:this.email,cip:230}};this.$store.dispatch("SetUserChannels",t).then(function(t){t.code&&200==Number(t.code)?e.callback():Object(K.Message)({showClose:!0,message:t.msg||"保存失败!",type:"error",duration:3e3})})},cancelEvent:function(){this.dialogVisible=!1,this.selectedChannel=this.tempval}},created:function(){this.init()},watch:{data:function(){this.init()}}},Je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data?a("div",[a("el-dialog",{attrs:{title:"【"+e.data.username+"】用户 频道授权",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"用户名","label-width":"120px"}},[a("el-input",{attrs:{disabled:""},model:{value:e.data.username,callback:function(t){e.$set(e.data,"username",t)},expression:"data.username"}})],1),e._v(" "),e.allChannel?a("el-form-item",{attrs:{label:"授权频道","label-width":"120px",required:""}},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择频道",clearable:""},model:{value:e.selectedChannel,callback:function(t){e.selectedChannel=t},expression:"selectedChannel"}},e._l(e.allChannel,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverUpdate",attrs:{placement:"top",width:"200"},model:{value:e.updatePopover,callback:function(t){e.updatePopover=t},expression:"updatePopover"}},[a("p",[e._v("确定保存当前修改？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.updatePopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.updateEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverUpdate",arg:"popoverUpdate"}],attrs:{type:"primary"}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.cancelEvent()}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-popover",{ref:"popDelBtn",attrs:{placement:"top",width:"200"},model:{value:e.delBtnPopover,callback:function(t){e.delBtnPopover=t},expression:"delBtnPopover"}},[a("p",[e._v("确定删除所有授权频道？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.deleteEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px","margin-bottom":"5px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini",title:"编辑"},on:{click:function(t){e.dialogVisible=!0}}},[a("span",{staticClass:"hidden-xs-only"})]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popDelBtn",arg:"popDelBtn"}],staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini",title:"删除授权用户"}},[a("span",{staticClass:"hidden-xs-only"})])],1):e._e()},staticRenderFns:[]};var Ze=a("VU/8")(Qe,Je,!1,function(e){a("Vgte")},"data-v-50feac5e",null).exports,Xe=a("uXZL"),et=a.n(Xe),tt={data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateDate:function(e){var t=e.header,a=e.results;this.excelData.header=t,this.excelData.results=a,this.$emit("on-selected-file",this.excelData)},handleDrop:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(1===t.length){var a=t[0];this.readerData(a),e.stopPropagation(),e.preventDefault()}else this.$message.error("Only support uploading one file!")},handleDragover:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleUpload:function(){document.getElementById("excel-upload-input").click()},handkeFileChange:function(e){var t=e.target.files[0];this.readerData(t)},readerData:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=e.target.result,n=t.fixdata(a),i=et.a.read(btoa(n),{type:"base64"}),l=i.SheetNames[0],r=i.Sheets[l],o=t.get_header_row(r),s=et.a.utils.sheet_to_json(r);t.generateDate({header:o,results:s})},a.readAsArrayBuffer(e)},fixdata:function(e){for(var t="",a=0,n=10240;a<e.byteLength/n;++a)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*n,a*n+n)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*n)))},get_header_row:function(e){var t=[],a=et.a.utils.decode_range(e["!ref"]),n=void 0,i=a.s.r;for(n=a.s.c;n<=a.e.c;++n){var l=e[et.a.utils.encode_cell({c:n,r:i})],r="UNKNOWN "+n;l&&l.t&&(r=et.a.utils.format_cell(l)),t.push(r)}return t}}},at={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{staticClass:"c-hide",attrs:{id:"excel-upload-input",type:"file",accept:".xlsx, .xls"},on:{change:e.handkeFileChange}}),e._v(" "),a("div",{attrs:{id:"drop"},on:{drop:e.handleDrop,dragover:e.handleDragover,dragenter:e.handleDragover}},[e._v("\n    将excel文件拖拽到此处或\n    "),a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{size:"mini",type:"primary"},on:{click:e.handleUpload}},[e._v("浏览")])],1)])},staticRenderFns:[]};var nt={name:"uploadExcel",components:{UploadExcelComponent:a("VU/8")(tt,at,!1,function(e){a("XFJ3")},"data-v-a53c6fd8",null).exports},props:["callback","initdata"],data:function(){return{tableData:[],tableHeader:[]}},methods:{selected:function(e){this.tableData=e.results,this.tableHeader=e.header,this.callback(e.results)}},watch:{initdata:function(){this.initdata||(this.tableData=[],this.tableHeader=[])}}},it={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-container"},[t("upload-excel-component",{on:{"on-selected-file":this.selected}}),this._v(" "),t("el-table",{staticClass:"tableBox",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:this.tableData,border:"","max-height":"200"}},this._l(this.tableHeader,function(e){return t("el-table-column",{key:e,attrs:{prop:e,label:e}})}))],1)},staticRenderFns:[]};var lt=a("VU/8")(nt,it,!1,function(e){a("6oZA")},"data-v-ec1056f4",null).exports,rt={name:"accredit",components:{OperateAuthuser:Ze,UploadExcel:lt},data:function(){return{userlist:null,dialogVisible:!1,defaultChannel:"",formInline:{ckey:"all:all",userid:"",curPage:1,count:5,total:0},formWhite:{userids:"",ckey:"",popover:!1}}},computed:u()({},Object(m.b)(["pageAuth","email","allChannel"])),methods:{onSearch:function(){var e=this,t=this.formInline.ckey.split(":"),a={url:"/channel_auth/getChannelAuthByCid",params:{cid:t[1],channel_history:t[0],userid:this.formInline.userid,username:this.email,page:this.formInline.curPage,count:this.formInline.count,cip:230}};this.$store.dispatch("GetChannelUsers",a).then(function(t){t.code&&200==Number(t.code)&&(e.userlist=t.result,e.userlist&&(e.formInline.total=e.userlist.total||0),Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}))})},showAdd:function(){this.formWhite.ckey="all:all"==this.formInline.ckey?this.defaultChannel:this.formInline.ckey,this.dialogVisible=!0},addEvent:function(){var e=this;if(this.formWhite.popover=!1,this.formWhite.ckey)if(this.formWhite.userids){this.dialogVisible=!1;var t={url:"/channel_auth/addChannelAuth",params:{channellist:this.formWhite.ckey,userids:this.formWhite.userids,username:this.email,cip:230}};this.$store.dispatch("AddChannelUsers",t).then(function(t){t.code&&200==Number(t.code)?(e.cancelEvent(),e.onSearch()):Object(K.Message)({showClose:!0,message:t.msg||"操作失败！",type:"error",duration:3e3})})}else Object(K.Message)({showClose:!0,message:"请输入用户邮箱前缀！",type:"error",duration:1e3});else Object(K.Message)({showClose:!0,message:"请选择频道！",type:"error",duration:1e3})},cancelEvent:function(){this.dialogVisible=!1,this.formWhite={userids:"",ckey:""}},handleSizeChange:function(e){this.formInline.count=e,this.onSearch()},handleCurrentChange:function(e){this.formInline.curPage=e,this.onSearch()},_parseTime:function(e,t){return T(e,t)},getChannelName:function(e){var t="暂无";if(e&&e.length>0){for(var a=[],n=0;n<e.length;n++)a.push(e[n].channel_name);t=a.join("、")}return t}},watch:{allChannel:function(){this.allChannel&&this.allChannel.length>0&&(this.defaultChannel=this.allChannel[0].channel_history+":"+this.allChannel[0].cid,this.onSearch())}}},ot={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-edit-outline",staticStyle:{"margin-right":"6px"}}),e._v("频道授权")])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[e.allChannel&&e.allChannel.length>0?a("el-col",{attrs:{span:23}},[e.allChannel?a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"邮箱前缀"}},[a("el-input",{attrs:{placeholder:"请输入用户邮箱前缀",clearable:""},model:{value:e.formInline.userid,callback:function(t){e.$set(e.formInline,"userid",t)},expression:"formInline.userid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择频道"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道"},model:{value:e.formInline.ckey,callback:function(t){e.$set(e.formInline,"ckey",t)},expression:"formInline.ckey"}},[a("el-option",{attrs:{label:"所有频道",value:"all:all"}}),e._v(" "),e._l(e.allChannel,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})})],2),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1):e._e()],1):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[e.allChannel&&e.allChannel.length>0?a("div",{staticClass:"pane-title-wrap clearfix"},[a("el-button",{staticClass:"left",attrs:{type:"success",round:"",size:"mini"},on:{click:function(t){e.showAdd()}}},[e._v("添加授权用户")])],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"添加授权用户",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.formWhite}},[e.allChannel?a("el-form-item",{attrs:{label:"选择频道","label-width":"120px",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道",clearable:""},model:{value:e.formWhite.ckey,callback:function(t){e.$set(e.formWhite,"ckey",t)},expression:"formWhite.ckey"}},e._l(e.allChannel,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"邮箱前缀","label-width":"120px",required:""}},[a("el-input",{staticStyle:{"max-width":"194px"},attrs:{type:"textarea","auto-complete":"off",placeholder:"输入用户邮箱前缀 多个值,分隔",clearable:""},model:{value:e.formWhite.userids,callback:function(t){e.$set(e.formWhite,"userids",t)},expression:"formWhite.userids"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverAdd",attrs:{placement:"top",width:"200"},model:{value:e.formWhite.popover,callback:function(t){e.$set(e.formWhite,"popover",t)},expression:"formWhite.popover"}},[a("p",[e._v("确定授权？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.formWhite.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.addEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{on:{click:function(t){e.cancelEvent()}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverAdd",arg:"popoverAdd"}],attrs:{type:"primary"}},[e._v("添 加")])],1)],1),e._v(" "),e.userlist&&e.userlist.data?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userlist.data,border:"",stripe:""}},[a("el-table-column",{attrs:{align:"left",prop:"username",label:"用户"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"channellist",label:"频道"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.getChannelName(t.row.channellist)))]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"160",align:"left",prop:"modify_time",label:"授权时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operate-authuser",{attrs:{data:t.row,"default-channel":e.defaultChannel,callback:e.onSearch}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"padding-top":"10px",overflow:"auto"}},[a("el-pagination",{attrs:{"current-page":e.formInline.curPage,"page-sizes":[5,10,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.formInline.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)],1)],1)},staticRenderFns:[]};var st=a("VU/8")(rt,ot,!1,function(e){a("Nrh6")},"data-v-74806e40",null).exports,ct={name:"operateWhite",data:function(){return{dialogVisible:!1,delBtnPopover:!1,updatePopover:!1,addBtnPopover:!1,degreeList:[{value:5,label:"优秀"},{value:4,label:"良好"},{value:3,label:"一般"},{value:2,label:"及格"},{value:1,label:"低质"}],whiteList:null,logList:null}},computed:u()({},Object(m.b)(["email"])),props:["data","callback"],methods:{_parseTime:function(e,t){return T(e,t)},showEditDialog:function(){var e=this,t={url:"/Channel/editChannelWhiteList",params:{wid:this.data.id,channel_history:this.data.channel_history,username:this.email,cip:230}};this.$store.dispatch("editWhiteList",t).then(function(t){t.code&&200==Number(t.code)&&(e.whiteList=t.result&&t.result.whiteList[0],e.logList=t.result&&t.result.logList,e.dialogVisible=!0)})},deleteEvent:function(){var e=this;this.delBtnPopover=!1;var t={url:"/Channel/delChannelWhiteList",params:{wid:this.data.id,channel_history:this.data.channel_history,username:this.email,cip:230}};this.$store.dispatch("delWhiteList",t).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"下线成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(K.Message)({showClose:!0,message:t.msg||"下线失败!",type:"error",duration:3e3})})},updateEvent:function(){this.updatePopover=!1;var e={url:"/Channel/editSaveChannelWhiteList",params:{wid:this.data.id,channel_history:this.data.channel_history,health_degree:this.whiteList.health_degree,vertical_degree:this.whiteList.vertical_degree,origin_degree:this.whiteList.origin_degree,username:this.email,cip:230}};this.$store.dispatch("updateWhiteList",e).then(function(e){e.code&&200==Number(e.code)?Object(K.Message)({showClose:!0,message:"保存成功！",type:"success",duration:1e3}):Object(K.Message)({showClose:!0,message:e.msg||"保存失败!",type:"error",duration:3e3})})},setEvent:function(){var e=this;this.addBtnPopover=!1;var t={url:"/channel/setCWLStatus",params:{wid:this.data.id,channel_history:this.data.channel_history,status:1,username:this.email,cip:230}};this.$store.dispatch("SetWhiteList",t).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"上线成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(K.Message)({showClose:!0,message:t.msg||"上线失败!",type:"error",duration:3e3})})}},watch:{data:function(){}}},ut={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data?a("div",[a("el-dialog",{attrs:{title:"【"+e.data.channel_name+"】频道 白名单编辑",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.whiteList?a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"作者UID","label-width":"120px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.whiteList.uid))])],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名","label-width":"120px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.whiteList.username||"未知"))])],1),e._v(" "),a("el-form-item",{attrs:{label:"博主领域","label-width":"120px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.whiteList.blogger_field||"未知"))])],1),e._v(" "),a("el-form-item",{attrs:{label:"认证信息","label-width":"120px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.whiteList.verified_reason||"暂无"))])],1),e._v(" "),a("el-form-item",{attrs:{label:"添加时间","label-width":"120px"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e._parseTime(e.whiteList.create_time,"{y}-{m}-{d} {h}:{m}:{s}")))])],1)],1):e._e(),e._v(" "),e.whiteList?a("el-form",[a("el-form-item",{attrs:{label:"健康度","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择健康度"},model:{value:e.whiteList.health_degree,callback:function(t){e.$set(e.whiteList,"health_degree",t)},expression:"whiteList.health_degree"}},e._l(e.degreeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"hidden-xs-only"},[e._v("(低质：1，及格：2，一般：3，良好：4，优秀：5)")])],1),e._v(" "),a("el-form-item",{attrs:{label:"垂直度","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择健康度"},model:{value:e.whiteList.vertical_degree,callback:function(t){e.$set(e.whiteList,"vertical_degree",t)},expression:"whiteList.vertical_degree"}},e._l(e.degreeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"hidden-xs-only"},[e._v("(低质：1，及格：2，一般：3，良好：4，优秀：5)")])],1),e._v(" "),a("el-form-item",{attrs:{label:"原创度","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择健康度"},model:{value:e.whiteList.origin_degree,callback:function(t){e.$set(e.whiteList,"origin_degree",t)},expression:"whiteList.origin_degree"}},e._l(e.degreeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("span",{staticClass:"hidden-xs-only"},[e._v("(低质：1，及格：2，一般：3，良好：4，优秀：5)")])],1)],1):e._e(),e._v(" "),e.logList?a("el-row",[a("div",{staticClass:"table-title left"},[e._v("【操作日志】")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logList,"max-height":"200",border:"",stripe:""}},[a("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"create_time",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._parseTime(t.row.create_time,"{y}-{m}-{d} {h}:{m}:{s}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"content",label:"内容"}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverUpdate",attrs:{placement:"top",width:"200"},model:{value:e.updatePopover,callback:function(t){e.updatePopover=t},expression:"updatePopover"}},[a("p",[e._v("确定保存当前修改？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.updatePopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.updateEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverUpdate",arg:"popoverUpdate"}],attrs:{type:"primary"}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),0===e.data.status?a("el-popover",{ref:"popAddBtn",attrs:{placement:"top",width:"200"},model:{value:e.addBtnPopover,callback:function(t){e.addBtnPopover=t},expression:"addBtnPopover"}},[a("p",[e._v("确定上线到白名单？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.addBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.setEvent()}}},[e._v("确定")])],1)]):e._e(),e._v(" "),1===e.data.status?a("el-popover",{ref:"popDelBtn",attrs:{placement:"top",width:"200"},model:{value:e.delBtnPopover,callback:function(t){e.delBtnPopover=t},expression:"delBtnPopover"}},[a("p",[e._v("确定从白名单下线？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.deleteEvent()}}},[e._v("确定")])],1)]):e._e(),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px","margin-bottom":"5px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini",title:"编辑"},on:{click:function(t){e.showEditDialog()}}},[a("span",{staticClass:"hidden-xs-only"},[e._v("编辑")])]),e._v(" "),0===e.data.status?a("el-button",{directives:[{name:"popover",rawName:"v-popover:popAddBtn",arg:"popAddBtn"}],staticStyle:{"margin-left":"5px"},attrs:{type:"success",icon:"el-icon-check",plain:"",size:"mini",title:"上线"}},[a("span",{staticClass:"hidden-xs-only"},[e._v("上线")])]):e._e(),e._v(" "),1===e.data.status?a("el-button",{directives:[{name:"popover",rawName:"v-popover:popDelBtn",arg:"popDelBtn"}],staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini",title:"下线"}},[a("span",{staticClass:"hidden-xs-only"},[e._v("下线")])]):e._e()],1):e._e()},staticRenderFns:[]};var mt={name:"whiteList",components:{OperateWhite:a("VU/8")(ct,ut,!1,function(e){a("Wd3M")},"data-v-2d7cf6dc",null).exports,UploadExcel:lt},data:function(){return{isUpload:!1,dialogVisible:!1,defaultChannel:"",formInline:{ckey:"all:all",uid:"",curPage:1,count:5,total:0},formWhite:{uid:"",ckey:"",popover:!1},formUpload:{ckey:"",uids:null},health_degree:"3",vertical_degree:"3",origin_degree:"3",degreeList:[{value:"5",label:"优秀"},{value:"4",label:"良好"},{value:"3",label:"一般"},{value:"2",label:"及格"},{value:"1",label:"低质"}]}},computed:u()({},Object(m.b)(["pageAuth","email","channelList","whiteList","channelApi"])),methods:{onSearch:function(){var e=this.formInline.ckey.split(":"),t={url:"/channel/getWhiteListByCid",params:{cid:e[1],channel_history:e[0],uid:this.formInline.uid,username:this.email,page:this.formInline.curPage,count:this.formInline.count,cip:230}};this.$store.dispatch("GetWhiteList",t)},showAdd:function(){this.formWhite.ckey="all:all"==this.formInline.ckey?this.defaultChannel:this.formInline.ckey,this.dialogVisible=!0},addEvent:function(){var e=this;if(this.formWhite.popover=!1,this.formWhite.ckey)if(this.formWhite.uid){this.dialogVisible=!1;var t=this.formWhite.ckey.split(":"),a={url:"/channel/addChannelWhiteList",params:{cid:t[1],channel_history:t[0],uid:this.formWhite.uid,health_degree:this.health_degree,vertical_degree:this.vertical_degree,origin_degree:this.origin_degree,username:this.email,cip:230}};this.$store.dispatch("AddWhiteList",a).then(function(){e.cancelEvent(),e.onSearch()})}else Object(K.Message)({showClose:!0,message:"请输入作者UID！",type:"error",duration:1e3});else Object(K.Message)({showClose:!0,message:"请选择频道！",type:"error",duration:1e3})},cancelEvent:function(){this.dialogVisible=!1,this.formWhite={uid:"",ckey:""}},handleSizeChange:function(e){this.formInline.count=e,this.onSearch()},handleCurrentChange:function(e){this.formInline.curPage=e,this.onSearch()},_parseTime:function(e,t){return T(e,t)},showUpload:function(){this.formUpload.ckey="all:all"==this.formInline.ckey?this.defaultChannel:this.formInline.ckey,this.isUpload=!0},addsEvent:function(){var e=this;this.formUpload.ckey?this.formUpload.uids?this.$confirm("将批量添加用户到白名单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){e.setUids()}).catch(function(){e.$message({type:"info",message:"已取消批量添加！"})}):Object(K.Message)({showClose:!0,message:"请导入用户uid！",type:"error",duration:1e3}):Object(K.Message)({showClose:!0,message:"请选择频道！",type:"error",duration:1e3})},cancelUpload:function(){this.isUpload=!1,this.formUpload.uids=null},setUids:function(){var e=this,t=this.formUpload.ckey.split(":"),a=new URLSearchParams;a.append("cid",t[1]),a.append("channel_history",t[0]),a.append("channel_whitelist",s()(this.formUpload.uids)),a.append("username",this.email),a.append("cip",230);var n={url:"/channel/importChannelWhiteList",params:a};this.$store.dispatch("AddChannelUids",n).then(function(t){if(t.code&&200==Number(t.code)){var a=t.msg||"success";Object(K.Message)({showClose:!0,message:a,type:"success",duration:1e3}),e.onSearch()}else Object(K.Message)({showClose:!0,message:t.msg||"操作失败！",type:"error",duration:3e3})})},getExcel:function(e){this.formUpload.uids=e}},watch:{channelList:function(){this.channelList&&this.channelList.length>0&&(this.defaultChannel=this.channelList[0].channel_history+":"+this.channelList[0].cid,this.onSearch())},whiteList:function(){this.whiteList&&(this.formInline.total=this.whiteList.total||0)}}},dt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-document",staticStyle:{"margin-right":"6px"}}),e._v("用户白名单")])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[e.channelList&&e.channelList.length>0?a("el-col",{attrs:{span:23}},[e.channelList?a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"UID"}},[a("el-input",{attrs:{placeholder:"请输入作者UID",clearable:""},model:{value:e.formInline.uid,callback:function(t){e.$set(e.formInline,"uid",t)},expression:"formInline.uid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择频道"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道"},model:{value:e.formInline.ckey,callback:function(t){e.$set(e.formInline,"ckey",t)},expression:"formInline.ckey"}},[a("el-option",{attrs:{label:"所有频道",value:"all:all"}}),e._v(" "),e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})})],2),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1):e._e()],1):null==e.channelApi?a("el-col",{attrs:{span:23}},[e._v("\n      loading……\n    ")]):"response failed"==e.channelApi?a("el-col",{attrs:{span:23}},[a("el-alert",{attrs:{title:"网络请求异常，请重试~",type:"warning","show-icon":"",closable:!1}})],1):1==e.channelApi?a("el-col",{attrs:{span:23}},[a("el-alert",{attrs:{title:"暂无有权限的频道",type:"warning","show-icon":"",closable:!1}})],1):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("el-dialog",{attrs:{title:"Excel批量操作",visible:e.isUpload},on:{"update:visible":function(t){e.isUpload=t}}},[a("el-form",{attrs:{model:e.formUpload}},[e.channelList?a("el-form-item",{attrs:{label:"选择频道","label-width":"120px",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道",clearable:""},model:{value:e.formUpload.ckey,callback:function(t){e.$set(e.formUpload,"ckey",t)},expression:"formUpload.ckey"}},e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e(),e._v(" "),a("el-form-item",[a("upload-excel",{attrs:{callback:e.getExcel,initdata:e.formUpload.uids}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addsEvent()}}},[e._v("添加")]),e._v(" "),a("el-button",{on:{click:function(t){e.cancelUpload()}}},[e._v("取 消")])],1)],1),e._v(" "),e.channelList&&e.channelList.length>0?a("div",{staticClass:"pane-title-wrap clearfix"},[a("el-button",{staticClass:"left",attrs:{type:"success",round:"",size:"mini"},on:{click:function(t){e.showAdd()}}},[e._v("添加白名单")]),e._v(" "),a("el-button",{staticClass:"right",attrs:{type:"primary",icon:"el-icon-upload2",size:"mini"},on:{click:function(t){e.showUpload()}}},[a("span",{staticClass:"hidden-xs-only"},[e._v("UID批量导入")])])],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"添加白名单账号",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.formWhite}},[e.channelList?a("el-form-item",{attrs:{label:"选择频道","label-width":"120px",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道",clearable:""},model:{value:e.formWhite.ckey,callback:function(t){e.$set(e.formWhite,"ckey",t)},expression:"formWhite.ckey"}},e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"作者UID","label-width":"120px",required:""}},[a("el-input",{staticStyle:{"max-width":"194px"},attrs:{"auto-complete":"off",placeholder:"请输入作者UID",clearable:""},model:{value:e.formWhite.uid,callback:function(t){e.$set(e.formWhite,"uid",t)},expression:"formWhite.uid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"健康度","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择健康度"},model:{value:e.health_degree,callback:function(t){e.health_degree=t},expression:"health_degree"}},e._l(e.degreeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"垂直度","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择健康度"},model:{value:e.vertical_degree,callback:function(t){e.vertical_degree=t},expression:"vertical_degree"}},e._l(e.degreeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"原创度","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择健康度"},model:{value:e.origin_degree,callback:function(t){e.origin_degree=t},expression:"origin_degree"}},e._l(e.degreeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverAdd",attrs:{placement:"top",width:"200"},model:{value:e.formWhite.popover,callback:function(t){e.$set(e.formWhite,"popover",t)},expression:"formWhite.popover"}},[a("p",[e._v("确定添加到白名单？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.formWhite.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.addEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{on:{click:function(t){e.cancelEvent()}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverAdd",arg:"popoverAdd"}],attrs:{type:"primary"}},[e._v("添 加")])],1)],1),e._v(" "),e.whiteList&&e.whiteList.data?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.whiteList.data,border:"",stripe:""}},[a("el-table-column",{attrs:{fixed:"",width:"120",align:"left",prop:"uid",label:"uid"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link-btn",attrs:{href:"//weibo.com/u/"+t.row.uid,target:"_blank",title:"跳转至微博主页"}},[e._v(e._s(t.row.uid))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"username",label:"昵称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{class:t.row.username?"link-btn":"errorBtn",attrs:{href:"//weibo.com/u/"+t.row.uid,target:"_blank",title:"跳转至微博主页"}},[e._v(e._s(t.row.username||"未知"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"channel_name",label:"频道"}}),e._v(" "),a("el-table-column",{attrs:{width:"160",align:"left",prop:"create_time",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._parseTime(t.row.create_time,"{y}-{m}-{d} {h}:{m}:{s}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",align:"left",prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.status?"在线上":"已下线"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operate-white",{attrs:{data:t.row,formInline:e.formInline,callback:e.onSearch}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"padding-top":"10px",overflow:"auto"}},[a("el-pagination",{attrs:{"current-page":e.formInline.curPage,"page-sizes":[5,10,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.formInline.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)],1)],1)},staticRenderFns:[]};var pt=a("VU/8")(mt,dt,!1,function(e){a("8R24")},"data-v-696843a6",null).exports,ht={name:"operateWhite",data:function(){return{delPopover:!1,delBtnPopover:!1,addBtnPopover:!1}},computed:u()({},Object(m.b)(["email"])),props:["data","kapi","callback"],methods:{deleteEvent:function(){var e=this;this.delPopover=!1,this.delBtnPopover=!1;var t={url:this.kapi.del,params:{kid:this.data.id,channel_history:this.data.channel_history,username:this.email,cip:230}};this.$store.dispatch("delKeywordList",t).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"下线成功！",type:"success",duration:1e3}),e.callback()):Object(K.Message)({showClose:!0,message:t.msg||"下线失败!",type:"error",duration:3e3})})},setEvent:function(){var e=this;this.addBtnPopover=!1;var t={url:this.kapi.set,params:{kid:this.data.id,channel_history:this.data.channel_history,status:1,username:this.email,cip:230}};this.$store.dispatch("SetKeywordList",t).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"上线成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(K.Message)({showClose:!0,message:t.msg||"上线失败!",type:"error",duration:3e3})})}},watch:{data:function(){}}},ft={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data&&0===e.data.status?a("div",[a("el-popover",{ref:"popAddBtn",attrs:{placement:"top",width:"200"},model:{value:e.addBtnPopover,callback:function(t){e.addBtnPopover=t},expression:"addBtnPopover"}},[a("p",[e._v("确定上线【"+e._s(e.data.keyword)+"】关键词？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.addBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.setEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popAddBtn",arg:"popAddBtn"}],attrs:{type:"success",icon:"el-icon-check",plain:"",size:"mini",title:"上线"}},[a("span",{staticClass:"hidden-xs-only"},[e._v("上线")])])],1):e.data&&1===e.data.status?a("div",[a("el-popover",{ref:"popDelBtn",attrs:{placement:"top",width:"200"},model:{value:e.delBtnPopover,callback:function(t){e.delBtnPopover=t},expression:"delBtnPopover"}},[a("p",[e._v("确定下线【"+e._s(e.data.keyword)+"】关键词？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.deleteEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popDelBtn",arg:"popDelBtn"}],attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini",title:"下线"}},[a("span",{staticClass:"hidden-xs-only"},[e._v("下线")])])],1):e._e()},staticRenderFns:[]};var _t={name:"keywordList",components:{OperateKeyword:a("VU/8")(ht,ft,!1,function(e){a("TGVr")},"data-v-e59e646a",null).exports},data:function(){return{dialogVisible:!1,defaultChannel:"",formInline:{ckey:"all:all",keyword:"",curPage:1,count:5,total:0},formWord:{keyword:"",ckey:"",popover:!1},keywordList:null}},computed:u()({},Object(m.b)(["pageAuth","email","channelList","channelApi"])),props:["title","kapi"],methods:{onSearch:function(){var e=this,t=this.formInline.ckey.split(":"),a={url:this.kapi.get,params:{cid:t[1],channel_history:t[0],keyword:this.formInline.keyword,username:this.email,page:this.formInline.curPage,count:this.formInline.count,cip:230}};this.$store.dispatch("GetKeywordList",a).then(function(t){e.keywordList=t})},showAdd:function(){this.formWord.ckey="all:all"==this.formInline.ckey?this.defaultChannel:this.formInline.ckey,this.dialogVisible=!0},addEvent:function(){var e=this;if(this.formWord.popover=!1,this.formWord.ckey)if(this.formWord.keyword){this.dialogVisible=!1;var t=this.formWord.ckey.split(":"),a={url:this.kapi.add,params:{cid:t[1],channel_history:t[0],keyword:this.formWord.keyword,username:this.email,cip:230}};this.$store.dispatch("AddKeywordList",a).then(function(){e.cancelEvent(),e.onSearch()})}else Object(K.Message)({showClose:!0,message:"请输入关键词！",type:"error",duration:1e3});else Object(K.Message)({showClose:!0,message:"请选择频道！",type:"error",duration:1e3})},cancelEvent:function(){this.dialogVisible=!1,this.formWord={keyword:"",ckey:""}},handleSizeChange:function(e){this.formInline.count=e,this.onSearch()},handleCurrentChange:function(e){this.formInline.curPage=e,this.onSearch()},_parseTime:function(e,t){return T(e,t)},handleCallback:function(){console.log("查询回调")}},watch:{channelList:function(){this.channelList&&this.channelList.length>0&&(this.defaultChannel=this.channelList[0].channel_history+":"+this.channelList[0].cid,this.onSearch())},keywordList:function(){this.keywordList&&(this.formInline.total=this.keywordList.total)}}},vt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-document",staticStyle:{"margin-right":"6px"}}),e._v(e._s(e.title||"关键词"))])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[e.channelList&&e.channelList.length>0?a("el-col",{attrs:{span:23}},[e.channelList?a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{placeholder:"请输入关键词",clearable:""},model:{value:e.formInline.keyword,callback:function(t){e.$set(e.formInline,"keyword",t)},expression:"formInline.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择频道"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道"},model:{value:e.formInline.ckey,callback:function(t){e.$set(e.formInline,"ckey",t)},expression:"formInline.ckey"}},[a("el-option",{attrs:{label:"所有频道",value:"all:all"}}),e._v(" "),e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})})],2),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1):e._e()],1):null==e.channelApi?a("el-col",{attrs:{span:23}},[e._v("\n      loading……\n    ")]):"response failed"==e.channelApi?a("el-col",{attrs:{span:23}},[a("el-alert",{attrs:{title:"网络请求异常，请重试~",type:"warning","show-icon":"",closable:!1}})],1):1==e.channelApi?a("el-col",{attrs:{span:23}},[a("el-alert",{attrs:{title:"暂无有权限的频道",type:"warning","show-icon":"",closable:!1}})],1):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[e.channelList&&e.channelList.length>0?a("div",{staticClass:"pane-title-wrap clearfix"},[a("el-button",{staticClass:"left",attrs:{type:"success",round:"",size:"mini"},on:{click:function(t){e.showAdd()}}},[e._v("添加关键词")])],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"添加关键词",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.formWord}},[e.channelList?a("el-form-item",{attrs:{label:"选择频道","label-width":"120px",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择频道",clearable:""},model:{value:e.formWord.ckey,callback:function(t){e.$set(e.formWord,"ckey",t)},expression:"formWord.ckey"}},e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"关键词","label-width":"120px",required:""}},[a("el-input",{staticStyle:{"max-width":"194px"},attrs:{"auto-complete":"off",placeholder:"请输入关键词",clearable:""},model:{value:e.formWord.keyword,callback:function(t){e.$set(e.formWord,"keyword",t)},expression:"formWord.keyword"}})],1)],1),e._v(" "),a("div",{staticStyle:{color:"#e6a23c","text-align":"right"}},[e._v("此处只支持单个添加，一次性添加多个请联系\n          "),a("a",{staticClass:"link-btn",attrs:{title:"QQ联系"}},[e._v("@侯雷平（QQ：35675340）、 @李坤（QQ：46163936）")])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverAdd",attrs:{placement:"top",width:"200"},model:{value:e.formWord.popover,callback:function(t){e.$set(e.formWord,"popover",t)},expression:"formWord.popover"}},[a("p",[e._v("确定添加关键词？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.formWord.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.addEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{on:{click:function(t){e.cancelEvent()}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverAdd",arg:"popoverAdd"}],attrs:{type:"primary"}},[e._v("添 加")])],1)],1),e._v(" "),e.keywordList&&e.keywordList.data?a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.keywordList.data,border:"",stripe:""}},[a("el-table-column",{attrs:{fixed:"",align:"left",prop:"keyword",label:"关键词"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"channel_name",label:"频道"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"create_time",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._parseTime(t.row.create_time,"{y}-{m}-{d} {h}:{m}:{s}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",align:"left",prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.status?"在线上":"已下线"))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作项","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operate-keyword",{attrs:{data:t.row,kapi:e.kapi,callback:e.onSearch}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"padding-top":"10px",overflow:"auto"}},[a("el-pagination",{attrs:{"current-page":e.formInline.curPage,"page-sizes":[5,10,20,30,40],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.formInline.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)],1)],1)},staticRenderFns:[]};var gt=a("VU/8")(_t,vt,!1,function(e){a("Zvfs")},"data-v-8bdd9fe4",null).exports,bt={name:"shieldPage",data:function(){return{cname:"",formInline:{popover:!1,content:""}}},computed:u()({},Object(m.b)(["email"])),methods:{onSubmit:function(){if(this.formInline.popover=!1,this.formInline.content){var e={url:"http://i.hot.weibo.com/3/admin/apiAgent",param:{staff:this.email,source:"990750541234567890",action:"off",flow:3,type:1,data:this.formInline.content}},t={data:s()(e),cip:230};this.$store.dispatch("ShieldMaterial",t)}else Object(K.Message)({showClose:!0,message:"请输入mid！",type:"error",duration:1e3})}},watch:{}},yt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-goods",staticStyle:{"margin-right":"6px"}}),e._v("屏蔽操作")])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("el-form",{attrs:{model:e.formInline}},[a("el-form-item",{attrs:{label:"输入物料",required:""}},[a("el-input",{staticStyle:{"max-width":"400px"},attrs:{type:"textarea",placeholder:"输入mid 多个值,分隔",autosize:{minRows:2,maxRows:6},clearable:!0},model:{value:e.formInline.content,callback:function(t){e.$set(e.formInline,"content",t)},expression:"formInline.content"}})],1),e._v(" "),a("el-form-item",[a("el-popover",{ref:"popover",attrs:{placement:"right",width:"200"},model:{value:e.formInline.popover,callback:function(t){e.$set(e.formInline,"popover",t)},expression:"formInline.popover"}},[a("p",[e._v("确定屏蔽以上物料？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.formInline.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.onSubmit()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{type:"success",size:"small"}},[e._v("屏蔽物料")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var wt={name:"datamonitor",components:{ItemHeader:v,Auth:x,MinePage:ze,ChannelList:Ye,Accredit:st,WhiteList:pt,AddChannel:Re,KeywordList:gt,ShieldPage:a("VU/8")(bt,yt,!1,function(e){a("3SLI")},"data-v-1778d86f",null).exports},data:function(){return{tabPosition:"left",activeName:"0",channelApi:{w:{get:"/channel/getKeywordByCid",add:"/channel/addChannelKeyword",set:"/channel/setCKeyStatus",del:"/channel/delChannelKeyword"},b:{get:"/channel/getKeyBlackByCid",add:"/channel/addCKeyBlack",set:"/channel/setCKeyBlackStatus",del:"/channel/delCKeyBlack"}},channelAuth:0}},computed:u()({},Object(m.b)(["pageAuth","email","entireMonitor"])),methods:{init:function(){1===this.pageAuth&&(this.getChannelAuth(),this.setChannelList(),this.getChannelDrop())},getChannelDrop:function(){var e={url:"/channel/getList",params:{username:this.email,cip:230}};this.$store.dispatch("GetChannelDrop",e)},setChannelList:function(){var e={url:"/channel/getAuthChannelList",params:{username:this.email,cip:230}};this.$store.dispatch("SetChannelList",e)},getAllChannel:function(){var e={url:"/channel_auth/getChannelList",params:{channel_name:"",username:this.email,cip:230}};this.$store.dispatch("GetAllChannel",e)},getChannelAuth:function(){var e=this,t={userid:this.email,username:this.email,path:"/hot/#/hotcenter/channel/auth",cip:230};this.$store.dispatch("GetChannelAuth",t).then(function(t){t.code&&200==Number(t.code)&&(e.channelAuth=t.result,e.getAllChannel())})}},created:function(){window.isPhone&&(this.tabPosition="top"),this.init()},watch:{pageAuth:function(){this.init()}}},xt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-tabs",{attrs:{"tab-position":e.tabPosition},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我的频道"}},[a("mine-page")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"频道创建"}},[a("add-channel")],1),e._v(" "),e.channelAuth?a("el-tab-pane",{attrs:{label:"频道列表"}},[a("channel-list")],1):e._e(),e._v(" "),e.channelAuth?a("el-tab-pane",{attrs:{label:"频道授权"}},[a("Accredit")],1):e._e(),e._v(" "),a("el-tab-pane",{attrs:{label:"用户白名单"}},[a("white-list")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"关键词白名单"}},[a("keyword-list",{attrs:{title:"关键词白名单",kapi:e.channelApi.w}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"关键词黑名单"}},[a("keyword-list",{attrs:{title:"关键词黑名单",kapi:e.channelApi.b}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"mid屏蔽"}},[a("shield-page")],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var kt=a("VU/8")(wt,xt,!1,function(e){a("aSn7")},"data-v-aea148b0",null).exports,Ct={name:"setmenu",components:{ItemHeader:v,Auth:x},data:function(){return{menuData:null,editFormVisible:!1,addFormVisible:!1,editTitle:"导航修改",addTitle:"导航添加",editForm:{name:"",path:"",type:""},editRules:{name:[{required:!0,message:"导航名称不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择所属模式",trigger:"change"}]},checkAdd:["inner"],checkUpdate:["inner"],visibleAdd:!0,visibleUpdate:!0,authList:[{label:"内部权限可见",value:"inner"},{label:"外部权限可见",value:"outer"},{label:"特殊权限可见",value:"special"}],addForm:{name:"",path:"",type:""},addRules:{name:[{required:!0,message:"导航名称不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择所属模式",trigger:"change"}]},typeArr:[{value:1,label:"全部模式"},{value:2,label:"应用模式"},{value:3,label:"开发模式"}],formLabelWidth:"80px",defaultProps:{children:"list",label:"name"}}},computed:u()({},Object(m.b)(["pageAuth","email","menulist"])),methods:{init:function(){1==this.pageAuth&&(this.menuData=this.objToArr(this.menulist))},setMenu:function(){var e={userid:this.email,username:this.email,cip:230};this.$store.dispatch("GetMenu",e).then(function(){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3})})},renderContent:function(e,t){var a=this,n=t.node,i=t.data,l=(t.store,{title:"提示",message:"将删除菜单及其子项, 是否继续?",cancelMsg:"已取消删除",callback:this.deleteItem,callbackData:i.id});return e("span",{class:"custom-tree-node"},[e("span",{class:"menu-label",attrs:{draggable:"false"}},[n.label]),e("span",{attrs:{draggable:"false"}},[e("i",{attrs:{title:"修改"},class:"el-icon-edit menu-edit",on:{click:function(){return a.editEvent(i)}}}),e("i",{attrs:{title:"添加"},class:"el-icon-circle-plus menu-add",on:{click:function(){return a.addEvent(i)}}}),e("i",{attrs:{title:"删除"},class:"el-icon-delete menu-delete",on:{click:function(){return a.alertBox(l)}}})])])},deleteItem:function(e){var t=this,a={id:e,username:this.email,cip:230};this.$store.dispatch("DeleteItem",a).then(function(){t.setMenu()})},editEvent:function(e){this.editTitle="【"+e.name+"】— 修改",this.editForm={name:e.name,path:e.path||"",type:e.type,id:e.id,level:e.level,fid:e.fid,time:e.time},this.checkUpdate=e.auth.split(","),this.visibleUpdate=Boolean(e.visible),this.editFormVisible=!0},editItem:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;e.editFormVisible=!1;var a={username:e.email,cip:230},n=u()({},e.editForm,a,{auth:e.checkUpdate.join(","),visible:Number(e.visibleUpdate)});e.$store.dispatch("EditItem",n).then(function(){e.setMenu()})})},cancelEdit:function(){this.$refs.editForm.resetFields(),this.editFormVisible=!1},addEvent:function(e){this.addTitle="【"+e.name+"】— 添加",this.addForm={name:"",path:"",id:e.id,level:e.level,fid:e.fid,time:e.time},this.checkAdd=["inner"],this.visibleAdd=!0,this.addFormVisible=!0},addItem:function(e){var t=this;this.$refs.addForm.validate(function(a){if(!a)return!1;"child"==e?(t.addForm.level=(Number(t.addForm.level)+1).toString(),t.addForm.fid=t.addForm.id,delete t.addForm.time):t.addForm.time+=e,delete t.addForm.id;var n={username:t.email,cip:230},i=u()({},t.addForm,n,{auth:t.checkAdd.join(","),visible:Number(t.visibleAdd)});t.$store.dispatch("AddItem",i).then(function(e){e.code&&200==Number(e.code)?(t.addFormVisible=!1,t.setMenu()):Object(K.Message)({showClose:!0,message:e.msg||"添加失败！",type:"error",duration:3e3})})})},cancelAdd:function(){this.$refs.addForm.resetFields(),this.checkAdd=["inner"],this.visibleAdd=!0,this.addFormVisible=!1},alertBox:function(e){var t=this;this.$confirm(e.message,e.title,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.callback&&e.callback(e.callbackData)}).catch(function(){t.$message({type:"info",message:e.cancelMsg,duration:1e3})})},objToArr:function(e){var t=[];for(var a in e)e[a].list&&(e[a].list=this.objToArr(e[a].list)),t.push(e[a]);return t}},created:function(){this.init()},watch:{email:function(){},pageAuth:function(){this.init()},menulist:function(){this.init()}}},It={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:12,type:"flex",justify:"center"}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-menu"}),e._v(" 导航栏设置")]),e._v(" "),a("el-dialog",{attrs:{width:"50%",title:e.editTitle,visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"导航名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",clearable:"",placeholder:"请输入导航名称"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"导航地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",clearable:"",placeholder:"请输入导航地址"},model:{value:e.editForm.path,callback:function(t){e.$set(e.editForm,"path",t)},expression:"editForm.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属模式",prop:"type","label-width":e.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择所属模式"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.typeArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"页面权限","label-width":e.formLabelWidth,required:""}},[a("el-checkbox-group",{attrs:{min:1},model:{value:e.checkUpdate,callback:function(t){e.checkUpdate=t},expression:"checkUpdate"}},[e._l(e.authList,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t.value}},[e._v(e._s(t.label))])}),e._v(" "),a("span",{staticClass:"add-tips"},[e._v("（至少选择一种权限）")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"导航显示","label-width":e.formLabelWidth}},[a("el-checkbox",{model:{value:e.visibleUpdate,callback:function(t){e.visibleUpdate=t},expression:"visibleUpdate"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"menu-btn",on:{click:e.cancelEdit}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"menu-btn",attrs:{type:"primary"},on:{click:e.editItem}},[e._v("修 改")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"50%",title:e.addTitle,visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules}},[a("el-form-item",{attrs:{label:"导航名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",clearable:"",placeholder:"请输入导航名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"导航地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",clearable:"",placeholder:"请输入导航地址"},model:{value:e.addForm.path,callback:function(t){e.$set(e.addForm,"path",t)},expression:"addForm.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属模式",prop:"type","label-width":e.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择所属模式"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},e._l(e.typeArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"页面权限","label-width":e.formLabelWidth,required:""}},[a("el-checkbox-group",{attrs:{min:1},model:{value:e.checkAdd,callback:function(t){e.checkAdd=t},expression:"checkAdd"}},[e._l(e.authList,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t.value}},[e._v(e._s(t.label))])}),e._v(" "),a("span",{staticClass:"add-tips"},[e._v("（至少选择一种权限）")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"导航显示","label-width":e.formLabelWidth}},[a("el-checkbox",{model:{value:e.visibleAdd,callback:function(t){e.visibleAdd=t},expression:"visibleAdd"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"menu-btn",attrs:{type:"success"},on:{click:function(t){e.addItem(-1)}}},[e._v("向前添加")]),e._v(" "),a("el-button",{staticClass:"menu-btn",attrs:{type:"warning"},on:{click:function(t){e.addItem(1)}}},[e._v("向后添加")]),e._v(" "),a("el-button",{staticClass:"menu-btn",attrs:{type:"primary"},on:{click:function(t){e.addItem("child")}}},[e._v("添加子项")]),e._v(" "),a("el-button",{staticClass:"menu-btn",on:{click:e.cancelAdd}},[e._v("取 消")])],1)],1),e._v(" "),a("el-row",{staticClass:"menu-form"},[e.menuData?a("el-tree",{attrs:{data:e.menuData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent,props:e.defaultProps,"highlight-current":""}}):e._e()],1)],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var St=a("VU/8")(Ct,It,!1,function(e){a("2woI")},null,null).exports,Tt={name:"operateItem",data:function(){return{dialogVisible:!1,delPopover:!1,delBtnPopover:!1,updatePopover:!1,spePopover:!1,userInfo:null,pageids:[]}},computed:u()({},Object(m.b)(["email","specialMenu"])),props:["data","type","refresh"],methods:{_parseTime:function(e,t){return T(e,t)},showEditDialog:function(){var e=this,t={url:"/user/getInfo",params:{userid:this.data.userid,type:this.type,username:this.email,cip:230}};this.$store.dispatch("GetUser",t).then(function(t){t.code&&200==Number(t.code)&&(e.userInfo=t.result,e.userInfo.specialmenu&&e.userInfo.specialmenu.length>0&&e.setPageIds(e.userInfo.specialmenu),e.dialogVisible=!0)})},setPageIds:function(e){this.pageids=[];for(var t=0;t<e.length;t++)this.pageids.push(e[t].id)},deleteEvent:function(){var e=this;this.delPopover=!1,this.delBtnPopover=!1;var t={url:"/user/del",params:{id:this.data.id,type:this.type,username:this.email,cip:230}};this.$store.dispatch("DeleteUser",t).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"删除成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.refresh()):Object(K.Message)({showClose:!0,message:t.msg||"删除失败！",type:"error",duration:3e3})})},updateEvent:function(){var e=this;this.updatePopover=!1;var t={url:"/user/set",params:{id:this.data.id,type:this.type,usergroup:this.userInfo.usergroup,realname:this.userInfo.username,username:this.email,cip:230}};this.$store.dispatch("SetUserInfo",t).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"保存成功！",type:"success",duration:1e3}),e.refresh()):Object(K.Message)({showClose:!0,message:t.msg||"保存失败！",type:"error",duration:3e3})})},setMenuAuth:function(){this.spePopover=!1;var e={url:"/menu/specialMenuAuth",params:{userid:this.data.userid,ids:this.pageids.join(","),username:this.email,cip:230}};this.$store.dispatch("SetMenuAuth",e).then(function(e){e.code&&200==Number(e.code)?Object(K.Message)({showClose:!0,message:"授权成功！",type:"success",duration:1e3}):Object(K.Message)({showClose:!0,message:e.msg||"授权失败！",type:"error",duration:3e3})})}},watch:{data:function(){},email:function(){},specialMenu:function(){}}},Lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data?a("div",[a("el-dialog",{attrs:{title:"编辑【"+e.data.userid+"】用户信息",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.userInfo?a("el-form",[a("el-form-item",{attrs:{label:"用户名","label-width":"120px"}},[a("el-input",{staticStyle:{"max-width":"190px"},attrs:{"auto-complete":"off",placeholder:"请输入中文名",clearable:""},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"type",label:"选择平台","label-width":"120px"}},[a("el-select",{attrs:{placeholder:"请选择平台",disabled:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{attrs:{label:"机器学习平台",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"热门管理平台",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择用户组"},model:{value:e.userInfo.usergroup,callback:function(t){e.$set(e.userInfo,"usergroup",t)},expression:"userInfo.usergroup"}},[a("el-option",{attrs:{label:"内部",value:"inner"}}),e._v(" "),a("el-option",{attrs:{label:"外部",value:"outer"}})],1)],1),e._v(" "),e.specialMenu?a("el-form-item",{attrs:{label:"授权特殊页","label-width":"120px"}},[a("el-select",{staticStyle:{"min-width":"200px"},attrs:{placeholder:"请选择需要授权的特殊页面",multiple:"",filterable:"",clearable:""},model:{value:e.pageids,callback:function(t){e.pageids=t},expression:"pageids"}},e._l(e.specialMenu,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-popover",{ref:"popoverSpecial",attrs:{placement:"top",width:"200"},model:{value:e.spePopover,callback:function(t){e.spePopover=t},expression:"spePopover"}},[a("p",[e._v("确定修改页面授权？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.spePopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.setMenuAuth()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverSpecial",arg:"popoverSpecial"}],attrs:{type:"success",plain:""}},[e._v("修改授权")])],1):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverDel",attrs:{placement:"top",width:"200"},model:{value:e.delPopover,callback:function(t){e.delPopover=t},expression:"delPopover"}},[a("p",[e._v("确定将【"+e._s(e.data.userid)+"】删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.deleteEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-popover",{ref:"popoverUpdate",attrs:{placement:"top",width:"200"},model:{value:e.updatePopover,callback:function(t){e.updatePopover=t},expression:"updatePopover"}},[a("p",[e._v("确定保存当前修改？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.updatePopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.updateEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverUpdate",arg:"popoverUpdate"}],attrs:{type:"primary"}},[e._v("保 存")]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverDel",arg:"popoverDel"}]},[e._v("删 除")])],1)],1),e._v(" "),a("el-popover",{ref:"popDelBtn",attrs:{placement:"top",width:"200"},model:{value:e.delBtnPopover,callback:function(t){e.delBtnPopover=t},expression:"delBtnPopover"}},[a("p",[e._v("确定将【"+e._s(e.data.userid)+"】删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delBtnPopover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.deleteEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini",title:"编辑"},on:{click:function(t){e.showEditDialog()}}},[a("span",{staticClass:"hidden-xs-only"},[e._v("编辑")])]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popDelBtn",arg:"popDelBtn"}],attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini",title:"删除"}},[a("span",{staticClass:"hidden-xs-only"},[e._v("删除")])])],1):e._e()},staticRenderFns:[]};var Dt={name:"datamonitor",components:{ItemHeader:v,Auth:x,OperateItem:a("VU/8")(Tt,Lt,!1,function(e){a("L7t5")},"data-v-2adc54d9",null).exports},data:function(){return{dialogVisible:!1,addRules:{userid:[{required:!0,message:"邮箱前缀不能为空！",trigger:"blur"}]},addForm:{popover:!1,userid:"",realname:"",type:"2",usergroup:"outer"},formInline:{userid:"",type:"2",total:0,page:1,count:10},userList:null,typeName:"机器学习平台",curType:"1"}},computed:u()({},Object(m.b)(["pageAuth","email"])),methods:{init:function(){1===this.pageAuth&&(this.getUserList(),this.getSpecialMenu())},getSpecialMenu:function(){var e={url:"/menu/getSpecialMenu",params:{username:this.email,cip:230}};this.$store.dispatch("GetSpecialMenu",e)},getUserList:function(){var e=this,t={url:"/user/get",params:{userid:this.formInline.userid,type:this.formInline.type,page:this.formInline.page,count:this.formInline.count,username:this.email,cip:230}};this.$store.dispatch("GetUserList",t).then(function(t){t.code&&200==Number(t.code)&&(e.typeName=1==Number(e.formInline.type)?"机器学习平台":"热门管理平台",e.curType=e.formInline.type,e.userList=t.result&&t.result.data||[],e.formInline.total=t.result&&t.result.total||0)})},addEvent:function(){var e=this;this.addForm.popover=!1,this.$refs.addForm.validate(function(t){if(!t)return!1;var a={url:"/user/add",params:{userid:e.addForm.userid,realname:e.addForm.realname,type:e.addForm.type,usergroup:e.addForm.usergroup,username:e.email,cip:230}};e.$store.dispatch("SetUser",a).then(function(t){t.code&&200==Number(t.code)?(Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),e.getUserList()):Object(K.Message)({showClose:!0,message:t.msg||"添加失败！",type:"error",duration:3e3})})})},cancelEvent:function(){this.$refs.addForm.resetFields(),this.dialogVisible=!1},handleSizeChange:function(e){this.formInline.count=e,this.getUserList()},handleCurrentChange:function(e){this.formInline.page=e,this.getUserList()},_parseTime:function(e,t){return T(e,t)}},created:function(){this.init()},watch:{pageAuth:function(){this.init()}}},At={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),1===e.pageAuth?a("el-main",[a("el-row",{staticClass:"pane-title-wrap",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-document",staticStyle:{"margin-right":"6px"}}),e._v("用户信息管理")])])],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("el-form",{attrs:{inline:"",model:e.formInline}},[a("el-form-item",{attrs:{label:"邮箱前缀"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户邮箱前缀",clearable:""},model:{value:e.formInline.userid,callback:function(t){e.$set(e.formInline,"userid",t)},expression:"formInline.userid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择平台"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择平台"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[a("el-option",{attrs:{label:"机器学习平台",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"热门管理平台",value:"2"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getUserList}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:23}},[a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules}},[a("el-form-item",{attrs:{prop:"realname",label:"用户名","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入中文名",clearable:""},model:{value:e.addForm.realname,callback:function(t){e.$set(e.addForm,"realname",t)},expression:"addForm.realname"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"userid",label:"邮箱前缀","label-width":"120px",required:""}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入邮箱前缀",clearable:""},model:{value:e.addForm.userid,callback:function(t){e.$set(e.addForm,"userid",t)},expression:"addForm.userid"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"type",label:"选择平台","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择平台"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},[a("el-option",{attrs:{label:"机器学习平台",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"热门管理平台",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"usergroup",label:"用户组","label-width":"120px",required:""}},[a("el-select",{attrs:{placeholder:"请选择用户组"},model:{value:e.addForm.usergroup,callback:function(t){e.$set(e.addForm,"usergroup",t)},expression:"addForm.usergroup"}},[a("el-option",{attrs:{label:"内部",value:"inner"}}),e._v(" "),a("el-option",{attrs:{label:"外部",value:"outer"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-popover",{ref:"popoverAdd",attrs:{placement:"top",width:"200"},model:{value:e.addForm.popover,callback:function(t){e.$set(e.addForm,"popover",t)},expression:"addForm.popover"}},[a("p",[e._v("确定添加新用户？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.addForm.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.addEvent()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{on:{click:function(t){e.cancelEvent()}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverAdd",arg:"popoverAdd"}],attrs:{type:"primary"}},[e._v("添 加")])],1)],1),e._v(" "),e.userList?a("el-row",[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"table-title left"},[e._v(e._s(e.typeName)+"用户列表")]),e._v(" "),a("el-button",{staticClass:"right",attrs:{type:"success",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加用户")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"userid",label:"邮箱前缀"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"usergroup",label:"用户组"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"add_time",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._parseTime(t.row.add_time,"{y}-{m}-{d} {h}:{m}:{s}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operate-item",{attrs:{data:t.row,type:e.curType,refresh:e.getUserList}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"padding-top":"10px",overflow:"auto"}},[a("el-pagination",{attrs:{"current-page":e.formInline.page,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.formInline.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var Mt=a("VU/8")(Dt,At,!1,function(e){a("pEgr")},"data-v-dfad4c08",null).exports,Et=a("//Fk"),Nt=a.n(Et),$t={name:"imageUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],result:"",uploadFile:""}},methods:{handleSuccess:function(e,t){this.result=e,this.dialogVisible=!1,this.$emit("successCBK",this.result,this.uploadFile)},handleRemove:function(e,t){},beforeUpload:function(e){var t=this,a=this,n=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new Nt.a(function(l,r){var o=new Image;t.uploadFile=n.createObjectURL(e),o.onload=function(){a.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},l(!0)})}}},Pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-container"},[a("el-button",{staticClass:"active",attrs:{icon:"el-icon-upload",size:"medium",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传图片\n  ")]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{name:"image_file",action:"http://10.77.9.71:5700/smart_crop/v1.0/predict.json",accept:"image/jpeg,image/gif,image/png,image/bmp","on-remove":e.handleRemove,multiple:!1,limit:1,"list-type":"picture-card","on-success":e.handleSuccess,"before-upload":e.beforeUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),a("div",{staticClass:"tips"},[e._v("Tips:每次仅可上传一张图片")])],1)],1)},staticRenderFns:[]};var Ft=a("VU/8")($t,Pt,!1,function(e){a("+xM4")},"data-v-0ed4d2cd",null).exports,jt={name:"textHover",props:{className:{type:String},text:{type:String,default:"vue-element-admin"}}},Ut={render:function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"link--mallki",class:this.className},[this._v("\n  "+this._s(this.text)+"\n  "),t("span",{attrs:{"data-letters":this.text}}),this._v(" "),t("span",{attrs:{"data-letters":this.text}})])},staticRenderFns:[]};var Ot=a("VU/8")(jt,Ut,!1,function(e){a("cnlH")},null,null).exports,Bt={name:"imgcut",components:{ElCol:a("kMct").a,ImageUpload:Ft,TextHover:Ot,ItemHeader:v,Auth:x},data:function(){return{screenWidth:467,isActive:!0,activeWidth:"active-width",activeHeight:"active-height",imgSrc:"https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/pic/item/4b90f603738da9778d1df437bc51f8198618e3f8.jpg"}},computed:u()({},Object(m.b)(["isLogin","email","cutImage","auth"])),mounted:function(){var e=this;window.onresize=function(){return window.screenWidth=document.getElementById("box").offsetWidth,void(e.screenWidth=window.screenWidth)}},methods:{init:function(){Number(this.auth)>0?(console.log("用户已登录"),this.onSearch()):console.log("用户未登录")},urlFn:function(){var e=this;this.$prompt("请输入图片url地址","提示",{confirmButtonText:"上传",cancelButtonText:"取消",inputPattern:/http(s)?:/,inputErrorMessage:"请输入正确的图片url地址"}).then(function(t){var a=t.value;e.$message({type:"success",message:"success"}),e.imgSrc=a}).catch(function(){e.$message({type:"info",message:"取消url上传"})})},onSearch:function(){var e={url:"http://10.77.9.71:5700/smart_crop/v1.0/predict.json",param:{url:this.imgSrc}},t={data:s()(e),cip:230};this.$store.dispatch("GetImageInfo",t),this.cutImage},imageSize:function(){var e=this,t=new Image;t.src=this.imgSrc,t.onload=function(){t.width>t.height?e.isActive=!0:e.isActive=!1;var a=void 0,n=void 0;e.isActive?(a=parseInt(.8*e.screenWidth*t.height/t.width),n=parseInt(.8*e.screenWidth)):(a=parseInt(384),n=parseInt(384*t.width/t.height)),e.canvasDefault(t.width,t.height),e.canvasModel(n,a,e.cutImage)}},canvasModel:function(e,t,a){var n=new Image;n.src=this.imgSrc;var i=document.getElementById("canvas-model");i.style.opacity=0;var l=i.getContext("2d");n.onload=function(){var n=document.getElementById("primary-img");i.width=i.height=e>t?2*t:2*e,l.drawImage(n,-Math.abs(Number(a[2]))*e*2,-Math.abs(Number(a[0]))*t*2,2*e,2*t),i.style.width=i.style.height=e>t?t+"px":e+"px",i.style.opacity=1}},canvasDefault:function(e,t){var a=this,n=void 0,i=void 0,l=new Image;l.src=this.imgSrc,l.onload=function(){var l=document.getElementById("canvas-default"),r=l.getContext("2d");a.isActive?(n=.8*a.screenWidth*t/e,i=.8*a.screenWidth,l.width=l.height=2*n,r.drawImage(document.getElementById("primary-img"),-(2*i-l.width)/2,0,2*i,2*n),l.style.width=l.style.height=n+"px"):(n=384,i=384*e/t,l.width=l.height=2*i,r.drawImage(document.getElementById("primary-img"),0,-(2*n-l.height)/2,2*i,2*n),l.style.width=l.style.height=i+"px")}},imageSuccessCBK:function(e,t){var a=this;console.log(e),console.log(t),document.getElementById("primary-img").src=t;var n=new Image;n.src=t,n.onload=function(){n.width>n.height?a.isActive=!0:a.isActive=!1;var t=void 0,i=void 0;a.isActive?(t=parseInt(.8*a.screenWidth*n.height/n.width),i=parseInt(.8*a.screenWidth)):(t=parseInt(384),i=parseInt(384*n.width/n.height)),a.canvasDefault(n.width,n.height),a.canvasModel(i,t,e.thumbnail_square)}},failFn:function(){var e=this;this.$alert("裁剪失败,换张图片试试","提示",{confirmButtonText:"确定",type:"error",callback:function(t){e.$message({type:"info",message:"请重新选择图片"})}})}},created:function(){this.init()},watch:{cutImage:function(e){void 0==e?(this.failFn(),this.imgSrc="https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/pic/item/4b90f603738da9778d1df437bc51f8198618e3f8.jpg"):(document.getElementById("primary-img").style.opacity=1,this.imageSize(),this.screenWidth=document.getElementById("box").offsetWidth)},isLogin:function(){},email:function(){},auth:function(){this.init()},imgSrc:function(){var e=this;this.onSearch();var t=new Image;t.src=this.imgSrc,t.onload=function(){t.width>t.height?e.isActive=!0:e.isActive=!1;e.isActive?(parseInt(.8*e.screenWidth*t.height/t.width),parseInt(.8*e.screenWidth)):(parseInt(384),parseInt(384*t.width/t.height))}},screenWidth:function(e){if(!this.timer){this.screenWidth=document.getElementById("box").offsetWidth,this.timer=!0;var t=this;setTimeout(function(){console.log(t.screenWidth),t.init(),t.timer=!1},400)}}}},zt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{direction:"vertical"}},[a("item-header"),e._v(" "),Number(e.auth)>0?a("el-main",[a("el-row",[a("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[a("i",{staticClass:"el-icon-picture-outline"}),e._v(" "),a("text-hover",{attrs:{className:"mallki-text",text:"原始图片"}}),e._v(" "),a("div",{staticClass:"grid-content bg-purple"},[a("img",{class:[e.isActive?e.activeWidth:e.activeHeight],attrs:{src:e.imgSrc,id:"primary-img"}})])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[a("i",{staticClass:"el-icon-view"}),e._v(" "),a("text-hover",{attrs:{className:"mallki-text",text:"智能裁剪"}}),e._v(" "),a("div",{staticClass:"grid-content bg-purple-light"},[a("canvas",{attrs:{data:e.cutImage,id:"canvas-model"}})])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[a("i",{staticClass:"el-icon-rank"}),e._v(" "),a("text-hover",{attrs:{className:"mallki-text",text:"默认裁剪"}}),e._v(" "),a("div",{staticClass:"grid-content bg-purple",attrs:{id:"box"}},[a("canvas",{attrs:{id:"canvas-default"}})])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:5,sm:5,md:3,lg:3,xl:3}},[a("image-upload",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"medium"},on:{click:e.urlFn}},[e._v("url上传")])],1)],1),e._v(" "),a("div",{staticClass:"tips"},[e._v("Tips:图片大小请控制在3M以内")])],1):e.isLogin?a("el-main",[a("auth")],1):e._e()],1)},staticRenderFns:[]};var Vt=a("VU/8")(Bt,zt,!1,function(e){a("2ZbU")},"data-v-b3207998",null).exports;n.default.use(r.a);var Wt=new r.a({routes:[{path:"/404",component:function(){return a.e(0).then(a.bind(null,"+H76"))},hidden:!0},{path:"/hotcenter",redirect:"/hotcenter/basemonitor",hidden:!0},{path:"/hotcenter/querymaterial",name:"/hotcenter/querymaterial",meta:{activeidx:"",title:"物料查询 | 热门管理"},component:E},{path:"/hotcenter/operatematerial",name:"/hotcenter/operatematerial",meta:{activeidx:"7-63",title:"物料管理 | 热门管理"},component:j},{path:"/hotcenter/monitormaterial",name:"/hotcenter/monitormaterial",meta:{activeidx:"",title:"物料库监控 | 热门管理"},component:B},{path:"/hotcenter/materialstatus",name:"/hotcenter/materialstatus",meta:{activeidx:"",title:"物料库现状 | 热门管理"},component:W},{path:"/hotcenter/manage",name:"/hotcenter/manage",meta:{activeidx:"",title:"管理后台 | 热门管理"},component:Z},{path:"/hotcenter/datamonitor",name:"/hotcenter/datamonitor",meta:{activeidx:"",title:"热门流数据监控 | 热门管理"},component:oe},{path:"/hotcenter/analydata",name:"/hotcenter/analydata",meta:{activeidx:"",title:"热门流数据分析 | 热门管理"},component:he},{path:"/hotcenter/basemonitor",name:"/hotcenter/basemonitor",meta:{activeidx:"7-35",title:"常规监控 | 热门管理"},component:Ie},{path:"/hotcenter/analysis/data",name:"/hotcenter/analysis/data",meta:{activeidx:"7-36",title:"数据分析 | 热门管理"},component:Ae},{path:"/hotcenter/analysis/material",name:"/hotcenter/analysis/material",meta:{activeidx:"7-37",title:"物料分析 | 热门管理"},component:Ue},{path:"/hotcenter/channel",name:"/hotcenter/channel",meta:{activeidx:"7-64",title:"频道管理 | 热门管理"},component:kt},{path:"/platform/setmenu",name:"/platform/setmenu",meta:{activeidx:"19-38",title:"导航栏设置 | 平台管理"},component:St},{path:"/platform/usermanage",name:"/platform/usermanage",meta:{activeidx:"19-90",title:"用户管理 | 平台管理"},component:Mt},{path:"/lab/smart/imgcut",name:"/lab/smart/imgcut",meta:{activeidx:"47-54",title:"图片智能裁剪 | 效果演示"},component:Vt},{path:"*",redirect:"/404",hidden:!0}]}),Rt=a("mtWM"),Ht=void 0,qt=a.n(Rt).a.create({baseURL:Object({NODE_ENV:"production"}).BASE_API,timeout:15e3});qt.interceptors.request.use(function(e){return Ht=K.Loading.service({fullscreen:!0,text:"Loading",background:"rgba(0, 0, 0, 0.8)"}),e},function(e){console.log("config error:",e),Nt.a.reject(e)}),qt.interceptors.response.use(function(e){return Ht&&Ht.close(),e.data},function(e){return Ht&&Ht.close(),Object(K.Message)({showClose:!0,message:"response failed",type:"error",duration:1e3}),console.log("response error:"+e),Nt.a.reject(e)});var Gt=qt;function Kt(e){return Gt({url:Api_Domain+"/proxy/get",method:"get",params:e})}function Yt(e){return Gt({url:""+Api_Domain+e.url,method:"get",params:e.params})}var Qt={state:{dataInfo:null,record:null,monitor:null,status:null,authorInfo:null,authorType:null,blackList:null,curvideo:null},mutations:{SET_DATA_INFO:function(e,t){e.dataInfo=t},SET_RECORD:function(e,t){e.record=t},SET_MONITOR:function(e,t){e.monitor=t},SET_STATUS:function(e,t){e.status=t},SET_AUTHOR_INFO:function(e,t){e.authorInfo=t},SET_AUTHOR_TYPE:function(e,t){e.authorType=t},SET_BLACK_LIST:function(e,t){e.blackList=t},SET_CUR_VIDEO:function(e,t){e.curvideo=t}},actions:{GetMaterial:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){a("SET_DATA_INFO",t),e()}).catch(function(e){n(e)})})},ShowBatch:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){var n=t&&t[0];if(n){var i=n.link,l=n.text,r=n.user,o=r.name,s=r.avatar_hd,c=r.friends_count,u=r.followers_count,m=r.statuses_count,d=r.profile_url;a("SET_AUTHOR_INFO",{user:{name:o,avatar_hd:s,friends_count:c,followers_count:u,statuses_count:m,profile_url:d},link:i,text:l})}else a("SET_AUTHOR_INFO",null);e()}).catch(function(e){n(e)})})},AuthorType:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){var n=t&&t.publisher_status;if(n&&n[1]&&n[2]){var i={vtype:n[1].value,clevel:n[2].value};a("SET_AUTHOR_TYPE",i)}else a("SET_AUTHOR_TYPE",null);e()}).catch(function(e){n(e)})})},TopMaterial:function(e,t){e.commit;return new Nt.a(function(e,a){Kt(t).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),e()}).catch(function(e){a(e)})})},ShieldMaterial:function(e,t){e.commit;return new Nt.a(function(e,a){Kt(t).then(function(t){t.code&&200==Number(t.code)?Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}):Object(K.Message)({showClose:!0,message:t.msg||"操作失败！",type:"error",duration:3e3}),e()}).catch(function(e){a(e)})})},GetRecord:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),a("SET_RECORD",t),e()}).catch(function(e){n(e)})})},GetMonitor:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){var n=t.data;a("SET_MONITOR",n),e()}).catch(function(e){n(e)})})},GetStatus:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3});var n=t.data;a("SET_STATUS",n),e()}).catch(function(e){n(e)})})},GetBlackList:function(e,t){var a=e.commit;return new Nt.a(function(e,n){(function(e){return Gt({url:Api_Domain+"/Shield/get",method:"get",params:e})})(t).then(function(t){if(t.code&&200==Number(t.code)){var n=t.result;a("SET_BLACK_LIST",n)}e()}).catch(function(e){n(e)})})},AddBlackList:function(e,t){e.commit;return new Nt.a(function(e,a){(function(e){return Gt({url:Api_Domain+"/Shield/add",method:"get",params:e})})(t).then(function(t){t.msg&&400==Number(t.code)&&Object(K.Message)({showClose:!0,message:t.msg,type:"info",duration:0}),e()}).catch(function(e){a(e)})})},SetBlackList:function(e,t){e.commit;return new Nt.a(function(e,a){(function(e){return Gt({url:Api_Domain+"/Shield/set",method:"get",params:e})})(t).then(function(t){e()}).catch(function(e){a(e)})})},GetManageData:function(e,t){e.commit;return new Nt.a(function(e,a){Kt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},updateVideo:function(e,t){(0,e.commit)("SET_CUR_VIDEO",t)},GetThirdTag:function(e,t){e.commit;return new Nt.a(function(e,a){Kt(t).then(function(t){e(t)}).catch(function(e){a(e)})})}}};function Jt(){return new Nt.a(function(e,t){var a=null;try{window.frames.userInfo.contentDocument?a=window.frames.userInfo.contentDocument.body.innerText:window.frames.userInfo.document&&(a=window.frames.userInfo.document.body.innerText);var n=JSON.parse(a);n.email&&""!=n.email?e(n):(console.log("解析用户信息失败",n),t({msg:"解析用户信息失败"}))}catch(e){console.log("获取用户信息出错：",e),t({msg:"获取用户信息出错，可能是未登录"})}})}function Zt(e){return Gt({url:Api_Domain+"/menu/checkUserMenuAuth",method:"get",params:e})}var Xt={state:{email:"visitor",isLogin:null,auth:null,usergroup:null,pageAuth:null},mutations:{SET_USER_INFO:function(e,t){e.isLogin=t.isLogin,e.isLogin&&(e.email=t.data.email)},SET_AUTH_INFO:function(e,t){e.auth=t.auth||0,e.usergroup=t.usergroup||"unknow"},SET_PAGE_AUTH:function(e,t){e.pageAuth=t}},actions:{GetUserInfo:function(e){var t=e.commit;return new Nt.a(function(e,a){var n=K.Loading.service({fullscreen:!0,text:"Loading",background:"rgba(0, 0, 0, 0.8)"}),i=document.getElementById("userInfo");i&&i.parentNode.removeChild(i);var l=document.createElement("iframe");l.id="userInfo",l.style.cssText="display:none",l.src="//mlplat.intra.weibo.com/proxy/login?cip=230";l.attachEvent?l.attachEvent("onload",function(){Jt().then(function(a){n.close(),t("SET_USER_INFO",{data:a,isLogin:!0}),e()},function(e){n.close(),t("SET_USER_INFO",{isLogin:!1}),console.log("未获取到用户信息原因：",e.msg)})}):l.onload=function(){Jt().then(function(a){n.close(),t("SET_USER_INFO",{data:a,isLogin:!0}),e()},function(e){n.close(),t("SET_USER_INFO",{isLogin:!1}),console.log("未获取到用户信息原因：",e.msg)})},document.body.appendChild(l)})},GetAuth:function(e,t){var a=e.commit;return new Nt.a(function(e,n){(function(e){return Gt({url:Api_Domain+"/proxy/getauth",method:"get",params:e})})(t).then(function(t){var n=t.result,i=n&&n[0]||{auth:"no permissions",usergroup:"no permissions"};a("SET_AUTH_INFO",i),e()}).catch(function(e){a("SET_AUTH_INFO",{auth:"response failed",usergroup:"response failed"}),n(e)})})},GetPageAuth:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Zt(t).then(function(t){t.code&&200==Number(t.code)?a("SET_PAGE_AUTH",t.result):a("SET_PAGE_AUTH","response failed"),e()}).catch(function(e){a("SET_PAGE_AUTH","response failed"),n(e)})})},GetUserList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},SetUser:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},DeleteUser:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetUser:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},SetUserInfo:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},SetMenuAuth:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})}}};var ea={state:{list:null,specialList:null},mutations:{SET_LIST:function(e,t){e.list=t},SET_SPECIAL:function(e,t){e.specialList=t}},actions:{GetMenu:function(e,t){var a=e.commit;return new Nt.a(function(e,n){(function(e){return Gt({url:Api_Domain+"/menu/get",method:"get",params:e})})(t).then(function(t){var n=t.result;a("SET_LIST",n),e()}).catch(function(e){n(e)})})},DeleteItem:function(e,t){e.commit;return new Nt.a(function(e,a){(function(e){return Gt({url:Api_Domain+"/menu/del",method:"get",params:e})})(t).then(function(t){e()}).catch(function(e){a(e)})})},EditItem:function(e,t){e.commit;return new Nt.a(function(e,a){(function(e){return Gt({url:Api_Domain+"/menu/set",method:"get",params:e})})(t).then(function(t){e()}).catch(function(e){a(e)})})},AddItem:function(e,t){e.commit;return new Nt.a(function(e,a){(function(e){return Gt({url:Api_Domain+"/menu/add",method:"get",params:e})})(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetSpecialMenu:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Yt(t).then(function(t){t.code&&200==Number(t.code)&&a("SET_SPECIAL",t.result),e()}).catch(function(e){n(e)})})}}},ta={state:{cutImage:null},mutations:{SET_IMAGE_INFO:function(e,t){e.cutImage=t.thumbnail_square}},actions:{GetImageInfo:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),a("SET_IMAGE_INFO",t),e()}).catch(function(e){n(e)})})}}},aa={state:{dataMonitor:null,entireMonitor:null,analyDropList:null,analyData:null},mutations:{SET_DATA_MONITOR:function(e,t){e.dataMonitor=t},SET_ENTIRE_DATA:function(e,t){e.entireMonitor=t},SET_ANALY_DROP:function(e,t){e.analyDropList=t},SET_ANALY_DATA:function(e,t){e.analyData=t}},actions:{GetDataMonitor:function(e,t){e.commit;return new Nt.a(function(e,a){Kt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetEntireMonitor:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),t.code&&200==Number(t.code)&&a("SET_ENTIRE_DATA",t.data),e()}).catch(function(e){n(e)})})},GetAnalyDrop:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),t.code&&200==Number(t.code)&&a("SET_ANALY_DROP",t.data),e()}).catch(function(e){n(e)})})},GetAnalyData:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Kt(t).then(function(t){Object(K.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),t.code&&200==Number(t.code)&&a("SET_ANALY_DATA",t.data),e()}).catch(function(e){n(e)})})},GetBaseAnaly:function(e,t){e.commit;return new Nt.a(function(e,a){Kt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetSourceList:function(e,t){e.commit;return new Nt.a(function(e,a){Kt(t).then(function(t){e(t)}).catch(function(e){a(e)})})}}},na={state:{channelDrop:{typeList:null,tagList:null},channelList:null,allChannel:null,channelApi:null,channelData:null,whiteList:null,keywordList:null},mutations:{SET_CHANNEL_DROP:function(e,t){e.channelDrop=t},SET_CHANNEL_LIST:function(e,t){e.channelList=t},SET_ALL_CHANNEL:function(e,t){e.allChannel=t},SET_CHANNEL_DATA:function(e,t){e.channelData=t},SET_WHITE_LIST:function(e,t){e.whiteList=t},SET_KEYWORD_LIST:function(e,t){e.keywordList=t},SET_CHANNEL_API:function(e,t){e.channelApi=t}},actions:{GetChannelDrop:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Yt(t).then(function(t){t.code&&200==Number(t.code)&&a("SET_CHANNEL_DROP",t.result),e()}).catch(function(e){n(e)})})},SetChannelList:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Yt(t).then(function(t){t.code&&200==Number(t.code)?(a("SET_CHANNEL_LIST",t.result),a("SET_CHANNEL_API",!0)):a("SET_CHANNEL_API","response failed"),e()}).catch(function(e){a("SET_CHANNEL_API","response failed"),n(e)})})},GetChannelData:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Yt(t).then(function(t){t.code&&200==Number(t.code)&&a("SET_CHANNEL_DATA",t.result),e()}).catch(function(e){n(e)})})},GetWhiteList:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Yt(t).then(function(t){var n=t.result;a("SET_WHITE_LIST",n),e()}).catch(function(e){n(e)})})},AddWhiteList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){if(t.code&&200==Number(t.code)){var a=t.msg||"success";Object(K.Message)({showClose:!0,message:a,type:"success",duration:1e3})}else Object(K.Message)({showClose:!0,message:t.msg||"操作失败！",type:"error",duration:3e3});e()}).catch(function(e){a(e)})})},SetChannelData:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},delWhiteList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},SetWhiteList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},updateWhiteList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},editWhiteList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetKeywordList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){var a=t.result;e(a)}).catch(function(e){a(e)})})},AddKeywordList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){if(t.code&&200==Number(t.code)){var a=t.msg||"success";Object(K.Message)({showClose:!0,message:a,type:"success",duration:1e3})}else Object(K.Message)({showClose:!0,message:t.msg||"操作失败！",type:"error",duration:3e3});e()}).catch(function(e){a(e)})})},delKeywordList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},SetKeywordList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetChannelList:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetAllChannel:function(e,t){var a=e.commit;return new Nt.a(function(e,n){Yt(t).then(function(t){t.code&&200==Number(t.code)&&a("SET_ALL_CHANNEL",t.result),e()}).catch(function(e){n(e)})})},AddChannelUids:function(e,t){e.commit;return new Nt.a(function(e,a){(function(e){return Gt({url:""+Api_Domain+e.url,method:"post",data:e.params,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})})(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetChannelUsers:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},AddChannelUsers:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},SetUserChannels:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},DeleteUserChannels:function(e,t){e.commit;return new Nt.a(function(e,a){Yt(t).then(function(t){e(t)}).catch(function(e){a(e)})})},GetChannelAuth:function(e,t){e.commit;return new Nt.a(function(e,a){Zt(t).then(function(t){e(t)}).catch(function(e){a(e)})})}}},ia={materialInfo:function(e){return e.material.dataInfo},authorInfo:function(e){return e.material.authorInfo},authorType:function(e){return e.material.authorType},materialRecord:function(e){return e.material.record},materialMonitor:function(e){return e.material.monitor},materialStatus:function(e){return e.material.status},email:function(e){return e.user.email},isLogin:function(e){return e.user.isLogin},auth:function(e){return e.user.auth},usergroup:function(e){return e.user.usergroup},pageAuth:function(e){return e.user.pageAuth},menulist:function(e){return e.menu.list},specialMenu:function(e){return e.menu.specialList},blackList:function(e){return e.material.blackList},cutImage:function(e){return e.smart.cutImage},dataMonitor:function(e){return e.kpidata.dataMonitor},entireMonitor:function(e){return e.kpidata.entireMonitor},analyDropList:function(e){return e.kpidata.analyDropList},analyData:function(e){return e.kpidata.analyData},channelList:function(e){return e.channel.channelList},allChannel:function(e){return e.channel.allChannel},channelType:function(e){return e.channel.channelDrop.typeList},channelTag:function(e){return e.channel.channelDrop.tagList},channelData:function(e){return e.channel.channelData},whiteList:function(e){return e.channel.whiteList},keywordList:function(e){return e.channel.keywordList},channelApi:function(e){return e.channel.channelApi},curvideo:function(e){return e.material.curvideo}};n.default.use(m.a);var la=new m.a.Store({modules:{material:Qt,user:Xt,menu:ea,smart:ta,kpidata:aa,channel:na},getters:ia});a("tvR6"),a("sfy8"),a("yh13");n.default.use(Y.a),n.default.config.productionTip=!1,window.Api_Domain=location.origin,window.isPhone=!!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),new n.default({el:"#app",router:Wt,store:la,components:{App:l},template:"<App/>"})},Nrh6:function(e,t){},QOzx:function(e,t){},"R+Uz":function(e,t){},Skx4:function(e,t){},TGVr:function(e,t){},Vgte:function(e,t){},WNga:function(e,t){},Wd3M:function(e,t){},WxJg:function(e,t){},XFJ3:function(e,t){},"YS+L":function(e,t){},Yiw3:function(e,t){},Zvfs:function(e,t){},aSn7:function(e,t){},cV7a:function(e,t){},cnlH:function(e,t){},"d/H7":function(e,t){},"e+tk":function(e,t){},iXiC:function(e,t){},iv7A:function(e,t){},mozD:function(e,t){},o6l3:function(e,t){},pEgr:function(e,t){},qPyZ:function(e,t){},sfy8:function(e,t){},tvR6:function(e,t){},u1kt:function(e,t){},uvbm:function(e,t){},yh13:function(e,t){},zuAU:function(e,t){}},["NHnr"]);