webpackJsonp([72],{"5IJ3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),s=a.n(n),i=a("Dd8w"),o=a.n(i),c=a("vzON"),r=a("NYxO"),l=(a("0xDb"),a("zL8q")),m="http://i.hot.weibo.com",u={name:"operateMixture",components:{Auth:c.a},data:function(){return{configForm:{data:null},tempDegrade:!1,tips:"loading…"}},computed:o()({},Object(r.b)(["email","pageAuth"])),methods:{init:function(){1===this.pageAuth&&this.getConfig()},getConfig:function(){var t=this,e={url:m+"/3/admin/getChannel",param:{source:"990750541234567890",t:Date.now()}},a={data:s()(e),cip:230};this.$store.dispatch("ProxyGet",a).then(function(e){e?(t.configForm.data=1===e.channel_degrade,t.tempDegrade=1===e.channel_degrade,t.tips="success"):t.tips="频道流降级配置获取失败"})},resetForm:function(t){this.configForm.data=this.tempDegrade},saveEvent:function(){var t=this;this.$confirm("保存当前配置, 是否继续?","确认修改配置",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){t.saveConfig()}).catch(function(){t.$message({type:"info",message:"取消操作"})})},saveConfig:function(){var t=this,e={url:m+"/3/admin/setChannel",param:{staff:this.email,source:"990750541234567890",t:Date.now(),data:this.configForm.data?1:0}},a={data:s()(e),cip:230};console.log(e),this.$store.dispatch("ProxyGet",a).then(function(e){e&&"设置成功!"===e.msg?(t.tempDegrade=t.configForm.data,Object(l.Message)({showClose:!0,message:"设置成功!",type:"success",duration:1e3})):Object(l.Message)({showClose:!0,message:e&&e.msg||"设置失败",type:"error",duration:0})})}},created:function(){this.init()},watch:{email:function(){},pageAuth:function(){this.init()}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1===t.pageAuth?a("el-main",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-date hidden-xs-only",staticStyle:{"margin-right":"6px"}}),t._v("频道流降级开关")])]),t._v(" "),a("el-row",{staticClass:"content-box-wrap"},["success"===t.tips?a("el-col",{attrs:{xs:24,sm:18,md:12,lg:9,xl:4}},[a("el-form",{ref:"configForm",staticClass:"pane-form",attrs:{model:t.configForm,size:"small"}},[a("el-form-item",{attrs:{label:"开启降级",prop:"data"}},[a("el-switch",{model:{value:t.configForm.data,callback:function(e){t.$set(t.configForm,"data",e)},expression:"configForm.data"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:t.saveEvent}},[t._v("保存设置")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){t.resetForm()}}},[t._v("重置")])],1)],1)],1):a("p",{staticClass:"none-tips"},[t._v(t._s(t.tips))])],1)],1):0===t.pageAuth?a("el-main",[a("auth")],1):t._e()},staticRenderFns:[]};var p=a("VU/8")(u,f,!1,function(t){a("a38v")},"data-v-65aeed9e",null);e.default=p.exports},a38v:function(t,e){}});