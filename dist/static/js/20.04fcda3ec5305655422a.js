webpackJsonp([20],{YCcH:function(e,t){},eXo5:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("mvHQ"),i=l.n(a),s=l("Dd8w"),n=l.n(s),o=l("NYxO"),r=l("0xDb"),c=l("zL8q"),u=l("vzON"),h={name:"operateWhite",data:function(){return{dialogVisible:!1,delBtnPopover:!1,updatePopover:!1,addBtnPopover:!1,new_v:!1,frequency_loss:!1,mcn:!1,account_type:[],originList:[{value:5,label:"极好｜81%－100%为原创"},{value:4,label:"良好｜61%－80%为原创"},{value:3,label:"一般｜41％－60%为原创"},{value:2,label:"较低｜21%－40%为原创"},{value:1,label:"极低｜20%以下为原创"}],verticalList:[{value:5,label:"极好｜同领域匹配度81%－100％"},{value:4,label:"良好｜同领域匹配度 61%-80%"},{value:3,label:"一般｜同领域匹配度 41%-60%"},{value:2,label:"较低｜同领域匹配度21%-40%"},{value:1,label:"极低｜同领域匹配度20%以下"}],healthList:[{value:5,label:"极好｜不健康内容占比0%-4%"},{value:4,label:"良好｜不健康内容占比5%-10%"},{value:3,label:"一般｜不健康内容占比11%-20%"},{value:2,label:"较低｜不健康内容占比21%-50%"},{value:1,label:"极低｜不健康内容占比51%以上"}],accountMap:{1:"个人账号",2:"自媒体",3:"媒体",4:"企业",5:"营销号",6:"纯明星",7:"政府",8:"其他机构"},whiteList:null,logList:null,ability1:null,ability2:null,clevel:0}},computed:n()({},Object(o.b)(["email"])),props:["data","callback"],methods:{_parseTime:function(e,t){return Object(r.e)(e,t)},showEditDialog:function(){var e=this,t={url:"/Channel/editChannelWhiteList",params:{wid:this.data.id,channel_history:this.data.channel_history,username:this.email,cip:230}};this.$store.dispatch("editWhiteList",t).then(function(t){t.code&&200==Number(t.code)&&(e.whiteList=t.result&&t.result.whiteList[0],e.whiteList.origin_degree=e.whiteList.origin_degree||"",e.whiteList.vertical_degree=e.whiteList.vertical_degree||"",e.whiteList.health_degree=e.whiteList.health_degree||"",e.new_v=1==e.whiteList.new_v,e.frequency_loss=1==e.whiteList.frequency_loss,e.mcn=1==e.whiteList.mcn,e.account_type=e.whiteList.account_type&&e.whiteList.account_type.toString().split(",")||[],e.logList=t.result&&t.result.logList,e.dialogVisible=!0)});var l={url:"/feature/getFeature",params:{input:this.data.uid,flag:1,username:this.email,cip:230}};this.$store.dispatch("GetFeature",l).then(function(t){if(t.code&&200==Number(t.code)){var l=t.result;e.ability1=l.ability1,e.ability2=l.ability2,e.clevel=l.acount_status&&(0===l.acount_status.user_C_level?0:l.acount_status.user_C_level||"未知"),e.dialogVisible=!0}})},deleteEvent:function(){var e=this;this.delBtnPopover=!1;var t={url:"/Channel/delChannelWhiteList",params:{wid:this.data.id,channel_history:this.data.channel_history,username:this.email,cip:230}};this.$store.dispatch("delWhiteList",t).then(function(t){t.code&&200==Number(t.code)?(Object(c.Message)({showClose:!0,message:"下线成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(c.Message)({showClose:!0,message:t.msg||"下线失败!",type:"error",duration:3e3})})},updateEvent:function(){var e=this;this.updatePopover=!1;var t=this.account_type.join(",");if(t)if(this.whiteList.origin_degree)if(this.whiteList.vertical_degree)if(this.whiteList.health_degree){var l={url:"/Channel/editSaveChannelWhiteList",params:{wid:this.data.id,channel_history:this.data.channel_history,health_degree:this.whiteList.health_degree,vertical_degree:this.whiteList.vertical_degree,origin_degree:this.whiteList.origin_degree,new_v:Number(this.new_v),frequency_loss:Number(this.frequency_loss),mcn:Number(this.mcn),account_type:t||0,mark:1,username:this.email,cip:230}};this.$store.dispatch("updateWhiteList",l).then(function(t){t.code&&200==Number(t.code)?(Object(c.Message)({showClose:!0,message:"保存成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(c.Message)({showClose:!0,message:t.msg||"保存失败!",type:"error",duration:3e3})})}else Object(c.Message)({showClose:!0,message:"请选择健康度！",type:"error",duration:1e3});else Object(c.Message)({showClose:!0,message:"请选择垂直度！",type:"error",duration:1e3});else Object(c.Message)({showClose:!0,message:"请选择原创度！",type:"error",duration:1e3});else Object(c.Message)({showClose:!0,message:"请选择账号类型！",type:"error",duration:3e3})},setEvent:function(){var e=this;this.addBtnPopover=!1;var t={url:"/channel/setCWLStatus",params:{wid:this.data.id,channel_history:this.data.channel_history,status:1,username:this.email,cip:230}};this.$store.dispatch("CommonGet",t).then(function(t){t.code&&200==Number(t.code)?(Object(c.Message)({showClose:!0,message:"上线成功！",type:"success",duration:1e3}),e.dialogVisible=!1,e.callback()):Object(c.Message)({showClose:!0,message:t.msg||"上线失败!",type:"error",duration:0})})},setStatusEvent:function(e,t){var l=this;this.$confirm("确定"+t+"?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){l.setStatusAction(e,t)}).catch(function(){l.$message({type:"info",message:"取消操作"})})},setStatusAction:function(e,t){var l=this,a={url:"/channel/setCWLStatus",params:{wid:this.data.id,channel_history:this.data.channel_history,status:e,username:this.email,cip:230}};this.$store.dispatch("SetWhiteList",a).then(function(e){e.code&&200==Number(e.code)?(Object(c.Message)({showClose:!0,message:t+"成功！",type:"success",duration:1e3}),l.dialogVisible=!1,l.callback()):Object(c.Message)({showClose:!0,message:e.msg||t+"失败!",type:"error",duration:0})})},formartAbility:function(e){if(!e||e.length<1)return"暂无";for(var t=[],l=0;l<e.length;l++)t.push(e[l].display_name);return t.join("、")},getFLevel:function(e){var t="未知";switch(e){case"F0":t="F0";break;case"F1":t="F1";break;case"F2":t="F2";break;default:t="未知"}return t}},watch:{data:function(){}}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.data?l("div",[l("el-dialog",{attrs:{title:"【"+e.data.channel_name+"】频道 白名单编辑",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.whiteList?l("el-form",{attrs:{inline:!0,"label-position":"left",size:"small"}},[l("el-form-item",{attrs:{label:"作者UID","label-width":"64px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.whiteList.uid))])],1),e._v(" "),l("el-form-item",{attrs:{label:"用户名","label-width":"54px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.whiteList.username||"未知"))])],1),e._v(" "),l("el-form-item",{attrs:{label:"认证信息","label-width":"70px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.whiteList.verified_reason||"暂无"))])],1),e._v(" "),l("el-form-item",{attrs:{label:"一级能力标签","label-width":"100px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.formartAbility(e.ability1)))])],1),e._v(" "),l("el-form-item",{attrs:{label:"二级能力标签","label-width":"100px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.formartAbility(e.ability2)))])],1),e._v(" "),l("el-form-item",{attrs:{label:"F层级","label-width":"52px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.getFLevel(e.whiteList.F_level)))])],1),e._v(" "),l("el-form-item",{attrs:{label:"C层级","label-width":"52px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.clevel))])],1),e._v(" "),l("el-form-item",{attrs:{label:"添加时间","label-width":"70px"}},[l("el-tag",{attrs:{type:"info"}},[e._v(e._s(e._parseTime(e.whiteList.create_time,"{y}-{m}-{d} {h}:{i}:{s}")))])],1)],1):e._e(),e._v(" "),l("div",{staticClass:"clearfix"},[l("div",{staticClass:"table-title left"},[e._v("【操作区域】")])]),e._v(" "),e.whiteList?l("el-form",{attrs:{"label-position":"left",size:"small"}},[l("el-form-item",[l("el-checkbox",{model:{value:e.new_v,callback:function(t){e.new_v=t},expression:"new_v"}},[e._v("是新拓展的大V")]),e._v(" "),l("el-checkbox",{model:{value:e.frequency_loss,callback:function(t){e.frequency_loss=t},expression:"frequency_loss"}},[e._v("有降频流失的风险")]),e._v(" "),l("el-checkbox",{model:{value:e.mcn,callback:function(t){e.mcn=t},expression:"mcn"}},[e._v("已加入MCN机构")])],1),e._v(" "),l("el-form-item",{attrs:{label:"账号类型（可多选）",required:""}},[l("el-checkbox-group",{attrs:{min:1},model:{value:e.account_type,callback:function(t){e.account_type=t},expression:"account_type"}},e._l(e.accountMap,function(t,a){return l("el-checkbox",{key:a,staticStyle:{"margin-left":"10px"},attrs:{label:a}},[e._v(e._s(t))])}))],1),e._v(" "),l("el-form-item",{attrs:{label:"原创度","label-width":"70px",required:""}},[l("el-select",{staticClass:"white-item left",attrs:{placeholder:"请选择原创度",clearable:""},model:{value:e.whiteList.origin_degree,callback:function(t){e.$set(e.whiteList,"origin_degree",t)},expression:"whiteList.origin_degree"}},e._l(e.originList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("span",{staticClass:"white-tips left"},[e._v("（考量直发微博中，原创和搬运内容的比例）")])],1),e._v(" "),l("el-form-item",{attrs:{label:"垂直度","label-width":"70px",required:""}},[l("el-select",{staticClass:"white-item left",attrs:{placeholder:"请选择垂直度",clearable:""},model:{value:e.whiteList.vertical_degree,callback:function(t){e.$set(e.whiteList,"vertical_degree",t)},expression:"whiteList.vertical_degree"}},e._l(e.verticalList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("span",{staticClass:"white-tips left"},[e._v("（考量直发微博中，其内容是否跟当前垂直领域一致）")])],1),e._v(" "),l("el-form-item",{attrs:{label:"健康度","label-width":"70px",required:""}},[l("el-select",{staticClass:"white-item left",attrs:{placeholder:"请选择健康度",clearable:""},model:{value:e.whiteList.health_degree,callback:function(t){e.$set(e.whiteList,"health_degree",t)},expression:"whiteList.health_degree"}},e._l(e.healthList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("span",{staticClass:"white-tips left"},[e._v("（考量发布微博中，违规、不良或广告营销信息的比例）")])],1)],1):e._e(),e._v(" "),e.logList?l("el-row",[l("div",{staticClass:"table-title left"},[e._v("【操作日志】")]),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logList,"max-height":"200",border:"",stripe:""}},[l("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),l("el-table-column",{attrs:{align:"left",prop:"create_time",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._parseTime(t.row.create_time,"{y}-{m}-{d} {h}:{i}:{s}")))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"left",prop:"content",label:"内容"}})],1)],1):e._e(),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-popover",{ref:"popoverUpdate",attrs:{placement:"top",width:"200"},model:{value:e.updatePopover,callback:function(t){e.updatePopover=t},expression:"updatePopover"}},[l("p",[e._v("确定保存当前修改？")]),e._v(" "),l("div",{staticStyle:{"text-align":"right",margin:"0"}},[l("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.updatePopover=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.updateEvent()}}},[e._v("确定")])],1)]),e._v(" "),l("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverUpdate",arg:"popoverUpdate"}],attrs:{type:"primary",size:"small"}},[e._v("保 存")]),e._v(" "),l("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),l("el-button",{staticStyle:{"margin-left":"5px","margin-bottom":"5px"},attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini",title:"编辑"},on:{click:function(t){e.showEditDialog()}}},[l("span",{staticClass:"hidden-xs-only"},[e._v("编辑")])]),e._v(" "),1!==e.data.status?l("el-button",{staticStyle:{"margin-left":"5px","margin-bottom":"5px"},attrs:{type:"success",icon:"el-icon-check",plain:"",size:"mini",title:"上线"},on:{click:function(t){e.setStatusEvent(1,"上线")}}},[l("span",{staticClass:"hidden-xs-only"},[e._v("上线")])]):e._e(),e._v(" "),0!==e.data.status?l("el-button",{staticStyle:{"margin-left":"5px","margin-bottom":"5px"},attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini",title:"下线"},on:{click:function(t){e.setStatusEvent(0,"下线")}}},[l("span",{staticClass:"hidden-xs-only"},[e._v("下线")])]):e._e(),e._v(" "),-1!==e.data.status?l("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning",icon:"el-icon-remove-outline",plain:"",size:"mini",title:"拉黑"},on:{click:function(t){e.setStatusEvent(-1,"拉黑")}}},[l("span",{staticClass:"hidden-xs-only"},[e._v("拉黑")])]):e._e()],1):e._e()},staticRenderFns:[]};var p=l("VU/8")(h,d,!1,function(e){l("x8nZ")},"data-v-6464dd9e",null).exports,m={name:"uploadExcel",components:{UploadExcelComponent:l("9K13").a},props:["callback","initdata","example","showexample"],data:function(){return{tableData:[],tableHeader:[]}},methods:{selected:function(e){this.tableData=e.results,this.tableHeader=e.header,this.callback(e.results)}},watch:{initdata:function(){this.initdata||(this.tableData=[],this.tableHeader=[])},example:function(){}}},f={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("upload-excel-component",{attrs:{example:e.example,showexample:e.showexample},on:{"on-selected-file":e.selected}}),e._v(" "),l("el-table",{staticClass:"tableBox",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:"","max-height":"200"}},e._l(e.tableHeader,function(e){return l("el-table-column",{key:e,attrs:{prop:e,label:e}})})),e._v(" "),e.tableData&&e.tableData.length>0?l("div",{staticClass:"excel-upload-tips"},[l("span",[e._v(e._s(e.tableData.length))]),e._v(" 条数据，请点击【添加】按钮上传")]):e._e()],1)},staticRenderFns:[]};var v=l("VU/8")(m,f,!1,function(e){l("ytZF")},"data-v-5101741c",null).exports,_=[{email:"hongjiao"},{email:"likun1"},{email:"yaxing1"},{email:"shixi_jinyao"},{email:"weifei3"},{email:"wangyang29"},{email:"juanmin"},{email:"siyuan17"},{email:"yufei7"}],b={name:"whiteList",components:{Auth:u.a,OperateWhite:p,UploadExcel:v},data:function(){return{readonly:!0,whiteList:null,isUpload:!1,downloadAllLoading:!1,downloadCurLoading:!1,dialogVisible:!1,defaultChannel:"",formInline:{ckey:"all:all",uid:"",mark:"",flevel:"",curPage:1,count:10,total:0},formWhite:{uid:"",ckey:"",popover:!1,status:1},formUpload:{status:1,ckey:"",uids:null},uidsIsLegal:!1,illegalUidTips:"",new_v:!1,frequency_loss:!1,mcn:!1,account_type:[],checkList:["1"],health_degree:"",vertical_degree:"",origin_degree:"",originList:[{value:"5",label:"极好｜81%－100%为原创"},{value:"4",label:"良好｜61%－80%为原创"},{value:"3",label:"一般｜41％－60%为原创"},{value:"2",label:"较低｜21%－40%为原创"},{value:"1",label:"极低｜20%以下为原创"}],verticalList:[{value:"5",label:"极好｜同领域匹配度81%－100％"},{value:"4",label:"良好｜同领域匹配度 61%-80%"},{value:"3",label:"一般｜同领域匹配度 41%-60%"},{value:"2",label:"较低｜同领域匹配度21%-40%"},{value:"1",label:"极低｜同领域匹配度20%以下"}],healthList:[{value:5,label:"极好｜不健康内容占比0%-4%"},{value:4,label:"良好｜不健康内容占比5%-10%"},{value:3,label:"一般｜不健康内容占比11%-20%"},{value:2,label:"较低｜不健康内容占比21%-50%"},{value:1,label:"极低｜不健康内容占比51%以上"}],markList:[{value:"",label:"所有状态"},{value:"1",label:"已编辑"},{value:"0",label:"未编辑"}],flevelList:[{value:"",label:"全部"},{value:"F0",label:"F0"},{value:"F1",label:"F1"},{value:"F2",label:"F2"},{value:"NULL",label:"其他"}],accountMap:{1:"个人账号",2:"自媒体",3:"媒体",4:"企业",5:"营销号",6:"纯明星",7:"政府",8:"其他机构"},uploadExample:{tableHeader:["uid"],tableData:[{uid:"2675435273"}]}}},computed:n()({},Object(o.b)(["pageAuth","email","channelList","channelApi"])),methods:{init:function(){1===this.pageAuth&&(this.setChannelList(),this.setReadonly())},setReadonly:function(){var e=this;_.map(function(t,l){e.email&&e.email==t.email&&(e.readonly=!1)})},setChannelList:function(){var e={url:"/channel/getAuthChannelList",params:{username:this.email,cip:230}};this.$store.dispatch("SetChannelList",e)},onSearch:function(){var e=this,t=this.formInline.ckey.split(":"),l={cid:t[1],channel_history:t[0],uid:this.formInline.uid,username:this.email,page:this.formInline.curPage,count:this.formInline.count,cip:230};""!=this.formInline.mark&&(l.mark=this.formInline.mark),""!=this.formInline.flevel&&(l.F_level=this.formInline.flevel);var a={url:"/channel/getWhiteListByCid",params:l};this.$store.dispatch("GetWhiteList",a).then(function(t){t.code&&200==Number(t.code)&&(e.whiteList=t.result)})},showAdd:function(){this.formWhite.ckey="all:all"==this.formInline.ckey?this.defaultChannel:this.formInline.ckey,this.dialogVisible=!0},addEvent:function(){var e=this;this.formWhite.popover=!1;var t=this.account_type.join(",");if(this.formWhite.ckey)if(this.formWhite.uid)if(t)if(this.origin_degree)if(this.vertical_degree)if(this.health_degree){this.dialogVisible=!1;var l=this.formWhite.ckey.split(":"),a={url:"/channel/addChannelWhiteList",params:{status:this.formWhite.status,cid:l[1],channel_history:l[0],uid:this.formWhite.uid,health_degree:this.health_degree,vertical_degree:this.vertical_degree,origin_degree:this.origin_degree,new_v:Number(this.new_v),frequency_loss:Number(this.frequency_loss),mcn:Number(this.mcn),account_type:t||0,mark:1,username:this.email,cip:230}};this.$store.dispatch("AddWhiteList",a).then(function(){e.cancelEvent(),e.onSearch()})}else Object(c.Message)({showClose:!0,message:"请选择健康度！",type:"error",duration:3e3});else Object(c.Message)({showClose:!0,message:"请选择垂直度！",type:"error",duration:3e3});else Object(c.Message)({showClose:!0,message:"请选择原创度！",type:"error",duration:3e3});else Object(c.Message)({showClose:!0,message:"请选择账号类型！",type:"error",duration:3e3});else Object(c.Message)({showClose:!0,message:"请输入作者UID！",type:"error",duration:3e3});else Object(c.Message)({showClose:!0,message:"请选择频道！",type:"error",duration:3e3})},cancelEvent:function(){this.dialogVisible=!1,this.formWhite={uid:"",ckey:"",popover:!1,status:1},this.health_degree="",this.vertical_degree="",this.origin_degree="",this.new_v=!1,this.frequency_loss=!1,this.mcn=!1,this.account_type=[]},handleSizeChange:function(e){this.formInline.count=e,this.onSearch()},handleCurrentChange:function(e){this.formInline.curPage=e,this.onSearch()},_parseTime:function(e,t){return Object(r.e)(e,t)},showUpload:function(){this.formUpload.ckey="all:all"==this.formInline.ckey?this.defaultChannel:this.formInline.ckey,this.isUpload=!0},addsEvent:function(){var e=this;this.formUpload.ckey?this.formUpload.uids?this.uidsIsLegal?this.$confirm("将批量添加用户到白名单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){e.setUids()}).catch(function(){e.$message({type:"info",message:"已取消批量添加！"})}):Object(c.Message)({showClose:!0,message:this.illegalUidTips,type:"error",duration:3e3}):Object(c.Message)({showClose:!0,message:"请导入用户uid！",type:"error",duration:3e3}):Object(c.Message)({showClose:!0,message:"请选择频道！",type:"error",duration:3e3})},cancelUpload:function(){this.isUpload=!1,this.formUpload.uids=null},setUids:function(){var e=this,t=this.formUpload.ckey.split(":"),l=new URLSearchParams;l.append("status",this.formUpload.status),l.append("cid",t[1]),l.append("channel_history",t[0]),l.append("channel_whitelist",i()(this.formUpload.uids)),l.append("username",this.email),l.append("cip",230);var a={url:"/channel/importChannelWhiteList",params:l};this.$store.dispatch("AddChannelUids",a).then(function(t){if(t.code&&200==Number(t.code)){var l=t.msg||"success";Object(c.Message)({showClose:!0,message:l,type:"success",duration:0}),e.onSearch()}else Object(c.Message)({showClose:!0,message:t.msg||"操作失败！",type:"error",duration:0})})},getExcel:function(e){if(this.formUpload.uids=e,e&&e.length>0){if(!e[0].hasOwnProperty("uid"))return this.illegalUidTips="表头没有uid，请参考样例！",void Object(c.Message)({showClose:!0,message:this.illegalUidTips,type:"error",duration:0});for(var t=0;t<e.length;t++)if(!e[t].uid)return this.illegalUidTips="第"+(t+1)+"行 uid不能为空！",void Object(c.Message)({showClose:!0,message:this.illegalUidTips,type:"error",duration:0});this.uidsIsLegal=!0}else Object(c.Message)({showClose:!0,message:tips,type:"导入Excel为空!",duration:0})},handleDownloadAll:function(){var e=this;this.downloadAllLoading=!0;var t=this.formInline.ckey.split(":"),l={cid:t[1],channel_history:t[0],uid:this.formInline.uid,username:this.email,page:1,count:this.formInline.total,cip:230};""!=this.formInline.mark&&(l.mark=this.formInline.mark),""!=this.formInline.flevel&&(l.F_level=this.formInline.flevel);var a={url:"/channel/getWhiteListByCid",params:l};this.$store.dispatch("GetWhiteList",a).then(function(t){t.code&&200==Number(t.code)?e.downloadAll(t.result.data):e.downloadAllLoading=!1})},downloadAll:function(e){var t=this;l.e(112).then(l.bind(null,"zWO4")).then(function(l){var a=t.formatJson(["index","uid","channel_name","mark","origin_degree","vertical_degree","health_degree","modify_time","operator","status","new_v","frequency_loss","mcn","account_type"],e);l.export_json_to_excel(["序号","uid","频道","编辑状态","原创度","垂直度","健康度","操作时间","操作人","状态","新拓展的大V","有降频流失的风险","已加入MCN机构","账号类型"],a,"whitelist"),t.downloadAllLoading=!1})},handleDownloadCur:function(){var e=this;this.downloadCurLoading=!0,l.e(112).then(l.bind(null,"zWO4")).then(function(t){var l=e.whiteList.data,a=e.formatJson(["index","uid","username","channel_name","mark","origin_degree","vertical_degree","health_degree","modify_time","operator","status","new_v","frequency_loss","mcn","account_type"],l);t.export_json_to_excel(["序号","uid","昵称","频道","编辑状态","原创度","垂直度","健康度","操作时间","操作人","状态","新拓展的大V","有降频流失的风险","已加入MCN机构","账号类型"],a,"whitelist"),e.downloadCurLoading=!1})},formatJson:function(e,t){var l=this;return t.map(function(t,a){return e.map(function(e){return"index"===e?a+1:"mark"===e?1===t[e]?"已编辑":"未编辑":"status"===e?l.getStatusCN(t[e]):"origin_degree"===e||"vertical_degree"===e||"health_degree"===e?t[e]&&t[e]+"级"||"暂无":"new_v"===e||"frequency_loss"===e||"mcn"===e?1===t[e]?"是":"否":"account_type"===e?l.getAccountList(t[e]):t[e]})})},getAccountList:function(e){if(0==e)return"暂无";for(var t=e.toString().split(","),l=[],a=0;a<t.length;a++)l.push(this.accountMap[t[a]]);return l.join("、")},getStatusCN:function(e){var t="已下线";return 1===e?t="在线上":-1===e&&(t="已拉黑"),t}},created:function(){this.init()},watch:{pageAuth:function(){this.init()},channelList:function(){this.channelList&&this.channelList.length>0&&(this.defaultChannel=this.channelList[0].channel_history+":"+this.channelList[0].cid,this.formInline.ckey=this.defaultChannel,this.onSearch())},whiteList:function(){this.whiteList&&(this.formInline.total=this.whiteList.total||0)}}},g={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return 1===e.pageAuth?l("el-main",[l("el-row",{staticClass:"pane-title-wrap"},[l("el-col",{staticClass:"clearfix",attrs:{span:24}},[l("h6",{staticClass:"pane-title left"},[l("i",{staticClass:"el-icon-document hidden-xs-only",staticStyle:{"margin-right":"6px"}}),e._v("用户管理")]),e._v(" "),l("a",{staticClass:"help-doc-tips left",attrs:{href:"/hot/#/channel/user/whitelist/document",target:"_blank"}},[l("i",{staticClass:"el-icon-question"}),e._v("\n        用户分级标准与编辑手册\n      ")])])],1),e._v(" "),l("el-row",{staticClass:"search-form-wrap"},[e.channelList&&e.channelList.length>0?l("el-col",{attrs:{span:24}},[e.channelList?l("el-form",{attrs:{inline:"",model:e.formInline,"label-position":"left",size:"mini"}},[l("el-form-item",{attrs:{label:"UID","label-width":"40px"}},[l("el-input",{attrs:{placeholder:"请输入作者UID",clearable:""},model:{value:e.formInline.uid,callback:function(t){e.$set(e.formInline,"uid",t)},expression:"formInline.uid"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"编辑状态","label-width":"70px"}},[l("el-select",{attrs:{placeholder:"请选择编辑状态"},model:{value:e.formInline.mark,callback:function(t){e.$set(e.formInline,"mark",t)},expression:"formInline.mark"}},e._l(e.markList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"F层级","label-width":"70px"}},[l("el-select",{attrs:{placeholder:"请选择F层级"},model:{value:e.formInline.flevel,callback:function(t){e.$set(e.formInline,"flevel",t)},expression:"formInline.flevel"}},e._l(e.flevelList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"选择频道","label-width":"70px"}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择频道"},model:{value:e.formInline.ckey,callback:function(t){e.$set(e.formInline,"ckey",t)},expression:"formInline.ckey"}},[l("el-option",{attrs:{label:"所有频道",value:"all:all"}}),e._v(" "),e._l(e.channelList,function(e,t){return l("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})})],2),e._v(" "),l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[l("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1):e._e()],1):null==e.channelApi?l("el-col",{attrs:{span:24}},[e._v("\n      loading……\n    ")]):"response failed"==e.channelApi?l("el-col",{attrs:{span:24}},[l("el-alert",{attrs:{title:"网络请求异常，请重试~",type:"warning","show-icon":"",closable:!1}})],1):1==e.channelApi?l("el-col",{attrs:{span:24}},[l("el-alert",{attrs:{title:"暂无有权限的频道",type:"warning","show-icon":"",closable:!1}})],1):e._e()],1),e._v(" "),l("el-row",{staticClass:"content-box-wrap"},[l("el-col",{attrs:{span:24}},[l("el-dialog",{attrs:{title:"Excel批量操作",visible:e.isUpload},on:{"update:visible":function(t){e.isUpload=t}}},[l("el-form",{attrs:{model:e.formUpload}},[l("el-form-item",{attrs:{label:"用户类型","label-width":"80px",required:""}},[l("el-radio-group",{model:{value:e.formUpload.status,callback:function(t){e.$set(e.formUpload,"status",t)},expression:"formUpload.status"}},[l("el-radio",{attrs:{label:1}},[e._v("白名单")]),e._v(" "),l("el-radio",{attrs:{label:-1}},[e._v("黑名单")])],1)],1),e._v(" "),e.channelList?l("el-form-item",{attrs:{label:"选择频道","label-width":"90px",required:""}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择频道",clearable:""},model:{value:e.formUpload.ckey,callback:function(t){e.$set(e.formUpload,"ckey",t)},expression:"formUpload.ckey"}},e._l(e.channelList,function(e,t){return l("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e(),e._v(" "),l("el-form-item",[l("upload-excel",{attrs:{callback:e.getExcel,initdata:e.formUpload.uids,example:e.uploadExample,showexample:!0}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addsEvent()}}},[e._v("添加")]),e._v(" "),l("el-button",{attrs:{size:"small"},on:{click:function(t){e.cancelUpload()}}},[e._v("取 消")])],1)],1),e._v(" "),e.channelList&&e.channelList.length>0?l("div",{staticClass:"clearfix",staticStyle:{padding:"10px 0"}},[l("el-button",{staticClass:"left",attrs:{type:"success",size:"mini"},on:{click:function(t){e.showAdd()}}},[e._v("添加用户")]),e._v(" "),e.readonly?e._e():l("el-button",{staticClass:"left",attrs:{type:"primary",size:"mini",title:"Excel批量导入uid"},on:{click:function(t){e.showUpload()}}},[l("span",[e._v("uid导入")])]),e._v(" "),l("el-button",{staticClass:"right",attrs:{type:"danger",size:"mini",title:"批量导出全部 Excel",loading:e.downloadAllLoading},on:{click:e.handleDownloadAll}},[l("span",[e._v("导出全部")])]),e._v(" "),l("el-button",{staticClass:"right",attrs:{type:"warning",size:"mini",title:"批量导出当前页数据 Excel",loading:e.downloadCurLoading},on:{click:e.handleDownloadCur}},[l("span",[e._v("导出当前页")])])],1):e._e(),e._v(" "),l("el-dialog",{attrs:{title:"添加用户账号",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{attrs:{model:e.formWhite,"label-position":"left"}},[l("el-form-item",{attrs:{label:"用户类型","label-width":"80px",required:""}},[l("el-radio-group",{model:{value:e.formWhite.status,callback:function(t){e.$set(e.formWhite,"status",t)},expression:"formWhite.status"}},[l("el-radio",{attrs:{label:1}},[e._v("白名单")]),e._v(" "),l("el-radio",{attrs:{label:-1}},[e._v("黑名单")])],1)],1),e._v(" "),e.channelList?l("el-form-item",{attrs:{label:"选择频道","label-width":"80px",required:""}},[l("el-select",{staticClass:"white-item",attrs:{filterable:"",placeholder:"请选择频道",clearable:""},model:{value:e.formWhite.ckey,callback:function(t){e.$set(e.formWhite,"ckey",t)},expression:"formWhite.ckey"}},e._l(e.channelList,function(e,t){return l("el-option",{key:t,attrs:{label:e.channel_name,value:e.channel_history+":"+e.cid}})}))],1):e._e(),e._v(" "),l("el-form-item",{attrs:{label:"作者UID","label-width":"80px",required:""}},[l("el-input",{staticClass:"white-item",attrs:{placeholder:"请输入作者UID",clearable:""},model:{value:e.formWhite.uid,callback:function(t){e.$set(e.formWhite,"uid",t)},expression:"formWhite.uid"}})],1),e._v(" "),l("el-form-item",[l("el-checkbox",{model:{value:e.new_v,callback:function(t){e.new_v=t},expression:"new_v"}},[e._v("是新拓展的大V")]),e._v(" "),l("el-checkbox",{model:{value:e.frequency_loss,callback:function(t){e.frequency_loss=t},expression:"frequency_loss"}},[e._v("有降频流失的风险")]),e._v(" "),l("el-checkbox",{model:{value:e.mcn,callback:function(t){e.mcn=t},expression:"mcn"}},[e._v("已加入MCN机构")])],1),e._v(" "),l("el-form-item",{attrs:{label:"账号类型（可多选）",required:""}},[l("el-checkbox-group",{attrs:{min:1},model:{value:e.account_type,callback:function(t){e.account_type=t},expression:"account_type"}},e._l(e.accountMap,function(t,a){return l("el-checkbox",{key:a,staticStyle:{"margin-left":"10px"},attrs:{label:a}},[e._v(e._s(t))])}))],1),e._v(" "),l("el-form-item",{attrs:{label:"原创度","label-width":"80px",required:""}},[l("el-select",{staticClass:"white-item left",attrs:{placeholder:"请选择原创度",clearable:""},model:{value:e.origin_degree,callback:function(t){e.origin_degree=t},expression:"origin_degree"}},e._l(e.originList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("span",{staticClass:"white-tips left"},[e._v("（考量直发微博中，原创和搬运内容的比例）")])],1),e._v(" "),l("el-form-item",{attrs:{label:"垂直度","label-width":"80px",required:""}},[l("el-select",{staticClass:"white-item left",attrs:{placeholder:"请选择垂直度",clearable:""},model:{value:e.vertical_degree,callback:function(t){e.vertical_degree=t},expression:"vertical_degree"}},e._l(e.verticalList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("span",{staticClass:"white-tips left"},[e._v("（考量直发微博中，其内容是否跟当前垂直领域一致）")])],1),e._v(" "),l("el-form-item",{attrs:{label:"健康度","label-width":"80px",required:""}},[l("el-select",{staticClass:"white-item left",attrs:{placeholder:"请选择健康度",clearable:""},model:{value:e.health_degree,callback:function(t){e.health_degree=t},expression:"health_degree"}},e._l(e.healthList,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("span",{staticClass:"white-tips left"},[e._v("（考量发布微博中，违规、不良或广告营销信息的比例）")])],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-popover",{ref:"popoverAdd",attrs:{placement:"top",width:"200"},model:{value:e.formWhite.popover,callback:function(t){e.$set(e.formWhite,"popover",t)},expression:"formWhite.popover"}},[l("p",[e._v("确定添加到用户列表？")]),e._v(" "),l("div",{staticStyle:{"text-align":"right",margin:"0"}},[l("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.formWhite.popover=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.addEvent()}}},[e._v("确定")])],1)]),e._v(" "),l("el-button",{attrs:{size:"small"},on:{click:function(t){e.cancelEvent()}}},[e._v("取 消")]),e._v(" "),l("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverAdd",arg:"popoverAdd"}],attrs:{type:"primary",size:"small"}},[e._v("添 加")])],1)],1),e._v(" "),e.whiteList&&e.whiteList.data?l("el-row",[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.whiteList.data,border:"",stripe:"",size:"mini"}},[l("el-table-column",{attrs:{fixed:"",width:"120",align:"left",prop:"uid",label:"uid"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("a",{staticClass:"link-btn",attrs:{href:"//weibo.com/u/"+t.row.uid,target:"_blank",title:"跳转至微博主页"}},[e._v(e._s(t.row.uid))])]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"left",prop:"username",label:"昵称"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("a",{class:t.row.username?"link-btn":"errorBtn",attrs:{href:"//weibo.com/u/"+t.row.uid,target:"_blank",title:"跳转至微博主页"}},[e._v(e._s(t.row.username||"未知"))])]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"left",prop:"channel_name",label:"频道"}}),e._v(" "),l("el-table-column",{attrs:{width:"80",align:"left",prop:"",label:"编辑状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:1==t.row.mark?"":"errorBtn"},[e._v(e._s(1==t.row.mark?"已编辑":"未编辑"))])]}}])}),e._v(" "),l("el-table-column",{attrs:{width:"70",align:"left",prop:"origin_degree",label:"原创度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.origin_degree?l("span",[e._v(e._s(t.row.origin_degree)+"级")]):l("span",{staticStyle:{color:"#c0c4cc"}},[e._v("暂无")])]}}])}),e._v(" "),l("el-table-column",{attrs:{width:"70",align:"left",prop:"origin_degree",label:"垂直度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.vertical_degree?l("span",[e._v(e._s(t.row.vertical_degree)+"级")]):l("span",{staticStyle:{color:"#c0c4cc"}},[e._v("暂无")])]}}])}),e._v(" "),l("el-table-column",{attrs:{width:"70",align:"left",prop:"origin_degree",label:"健康度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.health_degree?l("span",[e._v(e._s(t.row.health_degree)+"级")]):l("span",{staticStyle:{color:"#c0c4cc"}},[e._v("暂无")])]}}])}),e._v(" "),l("el-table-column",{attrs:{width:"160",align:"left",prop:"modify_time",label:"操作时间"}}),e._v(" "),l("el-table-column",{attrs:{align:"left",prop:"operator",label:"操作人"}}),e._v(" "),l("el-table-column",{attrs:{width:"70",align:"left",prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.getStatusCN(t.row.status)))]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"left",label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("operate-white",{attrs:{data:t.row,formInline:e.formInline,callback:e.onSearch}})]}}])})],1),e._v(" "),l("div",{staticStyle:{"padding-top":"10px",overflow:"auto"}},[l("el-pagination",{attrs:{"current-page":e.formInline.curPage,"page-sizes":[5,10,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.formInline.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)],1)],1):0===e.pageAuth?l("el-main",[l("auth")],1):e._e()},staticRenderFns:[]};var y=l("VU/8")(b,g,!1,function(e){l("YCcH")},"data-v-06edf81e",null);t.default=y.exports},x8nZ:function(e,t){},ytZF:function(e,t){}});