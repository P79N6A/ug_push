webpackJsonp([25],{"6h01":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),l=a("fZjL"),n=a.n(l),o=a("Dd8w"),r=a.n(o),c=a("NYxO"),d=a("zL8q"),u=a("vzON"),h=a("7t+N"),m=a.n(h),p={name:"MarkSubtitle",components:{Auth:u.a},data:function(){return{videoID:"",itemData:"",labelData:"",tags:"",textState:!1,defaultProps:{children:"children",label:"label"}}},computed:r()({weight:function(){var t=this;return function(e){return t.getWeight(e)}}},Object(c.b)(["pageAuth","email"])),created:function(){document.body.scrollTop=0},methods:{getWeight:function(t){return Math.floor(100*t)/100},activeVideo:function(){m()(".start-icon").css("display","none");var t=m()(".start-icon").next("video");t.attr("src",this.itemData.video),t[0].play()},disposeLableData:function(t){var e=this,a=[];return n()(t).forEach(function(i,s){a.push({label:i+" / "+e.getWeight(t[i].weight),children:[]}),n()(t[i].label).forEach(function(l,o){a[s].children.push({label:l+" / "+e.getWeight(t[i].label[l].weight),children:[]}),n()(t[i].label[l].label).forEach(function(n,r){a[s].children[o].children.push({label:n+" / "+e.getWeight(t[i].label[l].label[n].weight),children:[]})})})}),a},getVideoLabel:function(){var t=this,e=this,a={url:"http://10.87.52.132:13141/get_video_label.json",param:{videoUrl:this.itemData.video.replace("https","http")}},i={data:s()(a),time:20,cip:230};this.$store.dispatch("ProxyGetTimeout",i).then(function(a){a?t.labelData=e.disposeLableData(a.data):Object(d.Message)({showClose:!0,message:a.msg||"视频标签解析失败！",type:"error",duration:0})},function(t){Object(d.Message)({showClose:!0,message:"视频标签解析口异常！",type:"error",duration:0})})},handleNodeClick:function(t){},onSearch:function(){var t=this,e=this;this.itemData={},this.labelData="";var a={url:"http://mlplat.intra.weibo.com/lab/showbatch",param:{ids:this.videoID}},i={data:s()(a),cip:230};this.$store.dispatch("ProxyGet",i).then(function(a){if(a){var i=a[0].user.created_at;i=(i=i.substring(0,i.length)).replace(/-/g,"/");var s=new Date(i).getTime(),l=new Date(s),n=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds();e.itemData={face_img:a[0].user.avatar_large,name:a[0].user.name,created_at:n,weibo_link:a[0].link,text:a[0].text,cover_img:a[0].url_objects[0].object.object.image.url,video:a[0].url_objects[0].object.object.stream.url},t.getVideoLabel()}else Object(d.Message)({showClose:!0,message:a.msg||"视频获取失败！",type:"error",duration:0})},function(t){Object(d.Message)({showClose:!0,message:"视频获取接口异常！",type:"error",duration:0})})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1===t.pageAuth?a("el-main",[a("el-row",{staticClass:"pane-title-wrap"},[a("el-col",{attrs:{span:24}},[a("h6",{staticClass:"pane-title"},[t._v("视频打标签")])])],1),t._v(" "),a("el-row",{staticClass:"search-form-wrap"},[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{inline:"",size:"small"}},[a("el-form-item",{attrs:{label:"视频mid"}},[a("el-input",{staticStyle:{"min-width":"290px"},attrs:{placeholder:"请输入mid",clearable:""},model:{value:t.videoID,callback:function(e){t.videoID=e},expression:"videoID"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[t._v("识别")])])],1)],1)],1)],1),t._v(" "),a("el-row",{staticClass:"content-box-wrap"},[t.itemData&&t.labelData?a("el-col",{staticClass:"content-box-list"},[a("div",{staticClass:"user-wrap"},[a("img",{staticClass:"face-img",attrs:{src:t.itemData.face_img},on:{click:t.getVideoLabel}}),t._v(" "),a("a",{staticClass:"user-name",attrs:{target:"_blank",href:t.itemData.weibo_link}},[t._v(t._s(t.itemData.name))]),t._v(" "),a("span",{staticClass:"created-at"},[a("i",{staticClass:"el-icon-time"}),t._v("\n          "+t._s(t.itemData.created_at)+"\n        ")])]),t._v(" "),t.textState?t._e():a("el-button",{staticClass:"text-btn",attrs:{size:"small",type:"success",round:""},on:{click:function(e){t.textState=!0}}},[t._v("查看博文")]),t._v(" "),t.textState?a("el-button",{staticClass:"text-btn",attrs:{size:"small",type:"info",round:""},on:{click:function(e){t.textState=!1}}},[t._v("关闭博文")]):t._e(),t._v(" "),t.textState?a("p",{staticClass:"text"},[t._v(t._s(t.itemData.text))]):t._e(),t._v(" "),a("div",{staticClass:"video-wrap"},[a("i",{staticClass:"el-icon-caret-right start-icon",on:{click:t.activeVideo}}),t._v(" "),a("video",{attrs:{poster:t.itemData.cover_img,controls:"controls"}},[t._v("您的浏览器不支持HTML5")])]),t._v(" "),a("el-tree",{staticClass:"label-tree-demo",attrs:{data:t.labelData,"expand-on-click-node":!1,"default-expand-all":!0,props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1):t._e()],1)],1):t._e()},staticRenderFns:[]};var v=a("VU/8")(p,b,!1,function(t){a("YmSL"),a("dmET")},"data-v-eb99bbae",null);e.default=v.exports},YmSL:function(t,e){},dmET:function(t,e){}});