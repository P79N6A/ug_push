webpackJsonp([64],{"14XK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("Dd8w"),l=a.n(n),r=a("vzON"),o=a("Obyv"),c=a("NYxO"),m=a("0xDb"),u=a("zL8q"),d={name:"ratePage",components:{Auth:r.a,ItemChart:o.a},data:function(){return{formInline:{database:"offline",status:"second_tag_rate_material",date:[],items:["1042015:tagCategory_050"]},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},chartData:null,itemsList:null,statusList:[{label:"内容标签2级覆盖率(按物料统计)",value:"second_tag_rate_material"},{label:"内容标签3级覆盖率(按物料统计)",value:"third_tag_rate_material"},{label:"内容标签2级覆盖率(按曝光统计)",value:"second_tag_rate_expose"},{label:"内容标签3级覆盖率(按曝光统计)",value:"third_tag_rate_expose"},{label:"用户2级兴趣匹配度(按曝光统计)",value:"second_user_rate_expose"},{label:"用户3级兴趣匹配度(按曝光统计)",value:"third_user_rate_expose"}]}},computed:l()({},Object(c.b)(["pageAuth"])),methods:{init:function(){if(1===this.pageAuth){var e=Object(m.e)(Date.now()-2592e6,"{y}{m}{d}"),t=Object(m.e)(Date.now()-864e5,"{y}{m}{d}");this.formInline.date=[e,t],this.getSourceList()}},onSearch:function(){var e=this,t=this.formInline.items.join(",");if(t){var a={url:"http://172.16.105.67:8091/newtest1011/getMaterialLineData.html",param:{database:this.formInline.database,type:"source",items:t,status:this.formInline.status,dt_start:this.formInline.date[0],dt_end:this.formInline.date[1]}},i={data:s()(a),cip:230};this.$store.dispatch("GetBaseAnaly",i).then(function(t){Object(u.Message)({showClose:!0,message:"success",type:"success",duration:1e3}),t.code&&200==Number(t.code)&&(e.chartData=e.setAnalyData(t.data,t.data.yAxis.name))})}else Object(u.Message)({showClose:!0,message:"请选择查询领域！",type:"error",duration:1e3})},getSourceList:function(){var e=this,t={data:s()({url:"http://172.16.105.67:8091/newtest1011/getMaterialWeiduName.html",param:{type:"rate"}}),cip:230};this.$store.dispatch("GetSourceList",t).then(function(t){t.code&&200==Number(t.code)&&(e.itemsList=t.data,e.onSearch())})},setAnalyData:function(e,t){for(var a=e.series,i=[],s=0;s<a.length;s++)i.push({name:a[s].name,type:"line",data:a[s].data,smooth:!0});return{title:t,width:"100%",height:"400px",legendName:e.legendName,xAxis:[{type:"category",data:e.xAxis.data,name:e.xAxis.name,axisLabel:{rotate:0},axisLine:{symbol:["none","arrow"]},splitLine:{show:!0},axisTick:{show:!1}}],yAxis:[{type:"value",name:"",axisLine:{symbol:["none","arrow"]},axisTick:{show:!1}}],series:i}}},created:function(){this.init()},watch:{pageAuth:function(){this.init()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return 1===e.pageAuth?a("el-main",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-printer hidden-xs-only",staticStyle:{"margin-right":"6px"}}),e._v("兴趣标签覆盖率")])]),e._v(" "),a("el-row",{staticClass:"search-form-wrap"},[a("el-form",{attrs:{inline:"",model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"数据库"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:"请选择数据库"},model:{value:e.formInline.database,callback:function(t){e.$set(e.formInline,"database",t)},expression:"formInline.database"}},[a("el-option",{attrs:{label:"原始数据",value:"offline"}}),e._v(" "),a("el-option",{attrs:{label:"入库数据",value:"online"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"维度"}},[a("el-select",{staticStyle:{"min-width":"250px"},attrs:{placeholder:"请选择查询维度"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},e._l(e.statusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"领域"}},[a("el-select",{attrs:{placeholder:"请选择领域，支持搜索",filterable:"",multiple:""},model:{value:e.formInline.items,callback:function(t){e.$set(e.formInline,"items",t)},expression:"formInline.items"}},e._l(e.itemsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"290px"},attrs:{align:"center","unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1)],1),e._v(" "),e.chartData?a("el-row",{staticClass:"content-box-wrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:24}},[a("item-chart",{attrs:{data:e.chartData}})],1)],1):e._e()],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()},staticRenderFns:[]};var h=a("VU/8")(d,p,!1,function(e){a("NszD")},"data-v-ae2c2f4c",null);t.default=h.exports},NszD:function(e,t){}});