webpackJsonp([73],{"/gEQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s=a("Dd8w"),n=a.n(s),o=a("vzON"),l=a("Obyv"),c=a("NYxO"),d=a("0xDb"),p=a("bzuE"),m=a("zL8q"),u={name:"materialPage",components:{Auth:o.a,ItemChart:l.a},data:function(){return{category:p.b,formOrigin:{date:[]},formField:{date:[]},formType:{date:[]},originDataList:[],fieldDataList:[],typeDataList:[],formInline:{database:"offline",type:"entire",date:[],items:[]},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},chartData:null,itemsList:null}},computed:n()({},Object(c.b)(["pageAuth"])),methods:{init:function(){if(1===this.pageAuth){var e=Object(d.e)(Date.now()-2592e6,"{y}{m}{d}"),t=Object(d.e)(Date.now()-864e5,"{y}{m}{d}");this.formInline.date=[e,t],this.formOrigin.date=[e,t],this.formField.date=[e,t],this.formType.date=[e,t],this.getSourceList(),this.onSearch(),this.getOriginData(),this.getFieldData(),this.getTypeData()}},onSearch:function(){var e=this,t={database:this.formInline.database,type:this.formInline.type,dt_start:this.formInline.date[0],dt_end:this.formInline.date[1],status:"total_num"};if("source"==this.formInline.type){var a=this.formInline.items.join(",");if(!a)return void Object(m.Message)({showClose:!0,message:"请选择查询领域！",type:"error",duration:1e3});t.items=a}var i={url:"http://172.16.105.67:8091/newtest1011/getMaterialLineData.html",param:t},s={data:r()(i),cip:230};this.$store.dispatch("GetBaseAnaly",s).then(function(t){t.code&&200==Number(t.code)?e.chartData=e.setAnalyData(t.data,"趋势分析"):Object(m.Message)({showClose:!0,message:"物料日增规模趋势分析图数据获取失败",type:"error",duration:1e3})},function(e){Object(m.Message)({showClose:!0,message:"物料日增规模趋势分析图数据接口请求失败",type:"error",duration:1e3})})},getSourceList:function(){var e=this,t={data:r()({url:"http://172.16.105.67:8091/newtest1011/getMaterialWeiduName.html",param:{type:"material"}}),cip:230};this.$store.dispatch("GetSourceList",t).then(function(t){t.code&&200==Number(t.code)?e.itemsList=t.data:Object(m.Message)({showClose:!0,message:"领域列表获取失败",type:"error",duration:1e3})},function(e){Object(m.Message)({showClose:!0,message:"领域列表接口请求失败",type:"error",duration:1e3})})},setAnalyData:function(e,t){for(var a=e.series,i=[],r=0;r<a.length;r++)i.push({name:a[r].name,type:"line",data:a[r].data,smooth:!0});return{title:t,width:"100%",height:"400px",legendName:e.legendName,xAxis:[{type:"category",data:e.xAxis.data,name:e.xAxis.name,axisLabel:{rotate:0},axisLine:{symbol:["none","arrow"]},splitLine:{show:!0},axisTick:{show:!1}}],yAxis:[{type:"value",name:e.yAxis.name,axisLine:{symbol:["none","arrow"]},axisTick:{show:!1}}],series:i}},getOriginData:function(){var e=this,t={url:"http://172.16.105.67:8091/newtest1011/getHotwbHotmblogMaterielsSource.html",param:{dt_start:this.formOrigin.date[0],dt_end:this.formOrigin.date[1]}},a={data:r()(t),cip:230};this.$store.dispatch("ProxyGet",a).then(function(t){t.code&&200==Number(t.code)?e.originDataList=t.data||[]:Object(m.Message)({showClose:!0,message:"物料库数据———来源分布数据获取失败",type:"error",duration:1e3})},function(e){Object(m.Message)({showClose:!0,message:"物料库数据———来源分布数据接口请求失败",type:"error",duration:1e3})})},getFieldData:function(){var e=this,t={url:"http://172.16.105.67:8091/newtest1011/getHotwbHotmblogMaterielsTag.html",param:{dt_start:this.formField.date[0],dt_end:this.formField.date[1]}},a={data:r()(t),cip:230};this.$store.dispatch("ProxyGet",a).then(function(t){t.code&&200==Number(t.code)?e.fieldDataList=t.data||[]:Object(m.Message)({showClose:!0,message:"物料库数据———领域分布数据获取失败",type:"error",duration:1e3})},function(e){Object(m.Message)({showClose:!0,message:"物料库数据———领域分布数据接口请求失败",type:"error",duration:1e3})})},getTypeData:function(){var e=this,t={url:"http://172.16.105.67:8091/newtest1011/getHotwbHotmblogMaterielsType.html",param:{dt_start:this.formType.date[0],dt_end:this.formType.date[1]}},a={data:r()(t),cip:230};this.$store.dispatch("ProxyGet",a).then(function(t){t.code&&200==Number(t.code)?e.typeDataList=t.data||[]:Object(m.Message)({showClose:!0,message:"物料库数据———类型分布数据获取失败",type:"error",duration:1e3})},function(e){Object(m.Message)({showClose:!0,message:"物料库数据———类型分布数据接口请求失败",type:"error",duration:1e3})})},_formatNum:function(e){return Object(d.b)(e)},_parsePercent:function(e){return Object(d.d)(e)}},created:function(){this.init()},watch:{pageAuth:function(){this.init()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return 1===e.pageAuth?a("el-main",[a("el-row",{staticClass:"pane-title-wrap"},[a("h6",{staticClass:"pane-title"},[a("i",{staticClass:"el-icon-printer hidden-xs-only",staticStyle:{"margin-right":"6px"}}),e._v("物料日增规模")])]),e._v(" "),a("el-row",{staticClass:"search-form-wrap"},[a("el-form",{attrs:{inline:"",model:e.formInline,size:"mini"}},[a("el-form-item",{attrs:{label:"数据库"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:"请选择数据库"},model:{value:e.formInline.database,callback:function(t){e.$set(e.formInline,"database",t)},expression:"formInline.database"}},[a("el-option",{attrs:{label:"原始数据",value:"offline"}}),e._v(" "),a("el-option",{attrs:{label:"入库数据",value:"online"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"维度"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:"请选择查询维度"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[a("el-option",{attrs:{label:"整体数据",value:"entire"}}),e._v(" "),e.itemsList?a("el-option",{attrs:{label:"分领域",value:"source"}}):e._e()],1)],1),e._v(" "),"source"==e.formInline.type?a("el-form-item",{attrs:{label:"领域"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择领域，支持搜索",multiple:""},model:{value:e.formInline.items,callback:function(t){e.$set(e.formInline,"items",t)},expression:"formInline.items"}},e._l(e.itemsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"290px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[a("span",{staticClass:"hidden-xs-only"},[e._v("查询")])])],1)],1)],1),e._v(" "),e.chartData?a("el-row",{staticClass:"content-box-wrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:24}},[a("item-chart",{attrs:{data:e.chartData}})],1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"content-box-wrap"},[a("div",{staticClass:"table-title left"},[e._v("物料库数据—来源分布")]),e._v(" "),a("el-date-picker",{staticClass:"left",staticStyle:{width:"290px"},attrs:{"unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions,clearable:!1,size:"mini"},on:{change:function(t){e.getOriginData()}},model:{value:e.formOrigin.date,callback:function(t){e.$set(e.formOrigin,"date",t)},expression:"formOrigin.date"}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.originDataList,border:"",stripe:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"source_name",label:"物料来源"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.source_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"materiel_source",sortable:"",label:"可分发物料量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.materiel_source)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expo_materiel_source",sortable:"",label:"曝光物料个数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.expo_materiel_source)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expo_materiel_source_cnt",sortable:"",label:"物料曝光量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.expo_materiel_source_cnt)))])]}}])})],1)],1),e._v(" "),a("el-row",{staticClass:"content-box-wrap"},[a("div",{staticClass:"table-title left"},[e._v("物料库数据—领域分布")]),e._v(" "),a("el-date-picker",{staticClass:"left",staticStyle:{width:"290px"},attrs:{"unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions,clearable:!1,size:"mini"},on:{change:function(t){e.getFieldData()}},model:{value:e.formField.date,callback:function(t){e.$set(e.formField,"date",t)},expression:"formField.date"}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fieldDataList,border:"",stripe:"",size:"mini","max-height":"500"}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"tag_category_name",label:"领域"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.category[t.row.tag_category_name]||t.row.tag_category_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tag_category_materiels",sortable:"",label:"领域可分发物料量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.tag_category_materiels)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"user_ability_statistic_materiels",sortable:"",label:"领域可分发博主物料量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.user_ability_statistic_materiels)))])]}}])})],1)],1),e._v(" "),a("el-row",{staticClass:"content-box-wrap"},[a("div",{staticClass:"table-title left"},[e._v("物料库数据—类型分布")]),e._v(" "),a("el-date-picker",{staticClass:"left",staticStyle:{width:"290px"},attrs:{"unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy年MM月dd日","value-format":"yyyyMMdd","picker-options":e.pickerOptions,clearable:!1,size:"mini"},on:{change:function(t){e.getTypeData()}},model:{value:e.formType.date,callback:function(t){e.$set(e.formType,"date",t)},expression:"formType.date"}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.typeDataList,border:"",stripe:"",size:"mini","max-height":"500"}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"statistic_type_name",label:"物料类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statistic_type_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"value",sortable:"",label:"可分发物料量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._formatNum(t.row.value)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"value_ratio",sortable:"",label:"可分发物料占比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._parsePercent(t.row.value_ratio)))])]}}])})],1)],1)],1):0===e.pageAuth?a("el-main",[a("auth")],1):e._e()},staticRenderFns:[]};var h=a("VU/8")(u,f,!1,function(e){a("ch9B")},"data-v-611d139b",null);t.default=h.exports},ch9B:function(e,t){}});